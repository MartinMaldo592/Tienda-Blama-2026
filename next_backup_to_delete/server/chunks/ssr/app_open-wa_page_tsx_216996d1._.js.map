{"version":3,"sources":["../../../../app/open-wa/page.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport React, { useEffect, useState } from 'react'\r\n\r\nexport default function OpenWaPageClient() {\r\n  const [phone, setPhone] = useState('')\r\n  const [text, setText] = useState('')\r\n  const [autoOpen, setAutoOpen] = useState(false)\r\n\r\n  useEffect(() => {\r\n    const params = new URLSearchParams(window.location.search)\r\n    setPhone(params.get('phone') || '')\r\n    setText(params.get('text') || '')\r\n    setAutoOpen(params.get('auto') === '1')\r\n  }, [])\r\n\r\n  const whatsappWeb = `https://web.whatsapp.com/send?phone=${encodeURIComponent(phone)}&text=${encodeURIComponent(text)}`\r\n  const apiWhatsApp = `https://api.whatsapp.com/send?phone=${encodeURIComponent(phone)}&text=${encodeURIComponent(text)}`\r\n  const appLink = `whatsapp://send?phone=${encodeURIComponent(phone)}&text=${encodeURIComponent(text)}`\r\n\r\n  const [triedApp, setTriedApp] = useState(false)\r\n\r\n  useEffect(() => {\r\n    // Intentar abrir la aplicación nativa en móviles.\r\n    // Ejecutamos esto solo una vez al cargar la página.\r\n    if (!phone) return\r\n    if (!autoOpen) return\r\n\r\n    // Solo intentar si estamos en un entorno móvil (simple UA check)\r\n    const isMobile = /Mobi|Android|iPhone|iPad|iPod|Windows Phone/i.test(navigator.userAgent)\r\n    if (!isMobile) return\r\n\r\n    // Intento de abrir la app nativa. Algunos navegadores ignoran redirecciones\r\n    // a esquemas personalizados si no hay interacción, pero dado que esta pestaña\r\n    // se abrió desde una interacción del usuario debería funcionar en la mayoría.\r\n    try {\r\n      // Primero asignamos el esquema whatsapp://\r\n      window.location.href = appLink\r\n      setTriedApp(true)\r\n\r\n      // Si tras 800ms seguimos en esta página, navegamos al enlace web como fallback.\r\n      setTimeout(() => {\r\n        // Si la app no abrió (seguimos aquí), redirigimos al API web.\r\n        window.location.href = apiWhatsApp\r\n      }, 800)\r\n    } catch (err) {\r\n      // Fallback: nada, el usuario puede usar los botones.\r\n      console.warn('Error al intentar abrir la app nativa:', err)\r\n    }\r\n  }, [phone])\r\n\r\n  return (\r\n    <div style={{ minHeight: '100vh', display: 'flex', alignItems: 'center', justifyContent: 'center', padding: 24, fontFamily: 'system-ui, -apple-system, Segoe UI, Roboto' }}>\r\n      <div style={{ maxWidth: 680, width: '100%', textAlign: 'center' }}>\r\n        <h1 style={{ margin: 0, fontSize: 20, marginBottom: 8 }}>Chatea en WhatsApp</h1>\r\n        <p style={{ color: '#444', marginTop: 0 }}>Pulsa una opción para abrir tu chat preferido. La tienda quedará abierta en la otra pestaña.</p>\r\n\r\n        {triedApp && (\r\n          <p style={{ color: '#444', marginTop: 0, fontSize: 12 }}>\r\n            Intentando abrir la aplicación de WhatsApp...\r\n          </p>\r\n        )}\r\n\r\n        <textarea readOnly value={text} style={{ width: '100%', minHeight: 120, marginTop: 12, padding: 12, borderRadius: 8, border: '1px solid #e6e6e6', resize: 'vertical' }} />\r\n\r\n        <div style={{ display: 'flex', flexDirection: 'column', gap: 12, marginTop: 18 }}>\r\n          <a href={appLink} style={{ display: 'inline-block', padding: '12px 16px', background: '#25D366', color: '#fff', borderRadius: 999, textDecoration: 'none', fontWeight: 600 }}>Abrir en la aplicación</a>\r\n          <a href={apiWhatsApp} target=\"_blank\" rel=\"noopener noreferrer\" style={{ display: 'inline-block', padding: '12px 16px', background: '#fff', color: '#111', borderRadius: 999, border: '1px solid #ddd', textDecoration: 'none', fontWeight: 600 }}>Continuar en WhatsApp Web</a>\r\n          <a href={whatsappWeb} target=\"_blank\" rel=\"noopener noreferrer\" style={{ display: 'inline-block', padding: '12px 16px', background: '#fff', color: '#111', borderRadius: 999, border: '1px solid #ddd', textDecoration: 'none', fontWeight: 600 }}>Abrir web.whatsapp.com</a>\r\n        </div>\r\n\r\n        <div style={{ marginTop: 18 }}>\r\n          <a href=\"/\" style={{ color: '#111', textDecoration: 'underline' }}>Volver a la tienda</a>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}