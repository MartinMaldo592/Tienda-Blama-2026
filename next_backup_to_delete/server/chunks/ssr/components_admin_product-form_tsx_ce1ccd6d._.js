module.exports=[14468,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(7291);a.i(17209);var e=a.i(17071),f=a.i(40695),g=a.i(5522),h=a.i(17171),i=a.i(46893),j=a.i(70106);let k=(0,j.default)("arrow-down",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]),l=(0,j.default)("arrow-up",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);var m=a.i(96221),n=a.i(14548),o=a.i(21374),p=a.i(81560),q=a.i(74618),r=a.i(87682);function s({productToEdit:a,categories:j=[],onSuccess:s,onCancel:t}){let[u,v]=(0,c.useState)(!1),[w,x]=(0,c.useState)(!1),[y,z]=(0,c.useState)(""),[A,B]=(0,c.useState)(""),[C,D]=(0,c.useState)(""),[E,F]=(0,c.useState)(""),[G,H]=(0,c.useState)("5"),[I,J]=(0,c.useState)(""),[K,L]=(0,c.useState)([]),[M,N]=(0,c.useState)(""),[O,P]=(0,c.useState)([]),[Q,R]=(0,c.useState)("default"),[S,T]=(0,c.useState)("default"),[U,V]=(0,c.useState)(""),[W,X]=(0,c.useState)(""),[Y,Z]=(0,c.useState)(""),[$,_]=(0,c.useState)(""),[aa,ab]=(0,c.useState)(""),[ac,ad]=(0,c.useState)(""),[ae,af]=(0,c.useState)([]),[ag,ah]=(0,c.useState)([]),[ai,aj]=(0,c.useState)(!1),[ak,al]=(0,c.useState)(!1),[am,an]=(0,c.useState)("");function ao(a){let b=[];for(let c of a){let a=String(c||"").trim();if(a&&(b.includes(a)||b.push(a),b.length>=10))break}return b}function ap(a){let b=[];for(let c of a){let a=String(c||"").trim();if(a&&(b.includes(a)||b.push(a),b.length>=6))break}return b}async function aq(a){if(a.target.files&&0!==a.target.files.length)try{x(!0);let b=Array.from(a.target.files),c=Math.max(0,6-O.length),d=b.slice(0,c),f=await (0,e.uploadProductVideos)({files:d}),g=ap([...O,...f]);P(g)}catch(a){alert("Error subiendo video: "+a.message)}finally{x(!1),a.target.value=""}}function ar(a,b){if(a===b||a<0||b<0||a>=K.length||b>=K.length)return;let c=[...K],[d]=c.splice(a,1);c.splice(b,0,d),L(c),c.length>0&&J(c[0])}function as(a,b){if(a===b||a<0||b<0||a>=O.length||b>=O.length)return;let c=[...O],[d]=c.splice(a,1);c.splice(b,0,d),P(c)}async function at(){if(am.trim())try{v(!0);let a=await (0,e.createAdminCategoria)({nombre:am});R(a.id.toString()),al(!1),an("")}catch(a){alert("Error creando categoría: "+a.message)}finally{v(!1)}}async function au(a){if(a.target.files&&0!==a.target.files.length)try{x(!0);let b=Array.from(a.target.files).filter(a=>{let b=String(a?.type||"").toLowerCase(),c=String(a?.name||"").toLowerCase();return b?b.startsWith("image/"):c.endsWith(".png")||c.endsWith(".jpg")||c.endsWith(".jpeg")||c.endsWith(".webp")||c.endsWith(".gif")}),c=Math.max(0,10-K.length),d=b.slice(0,c),f=await (0,e.uploadProductImages)({files:d}),g=ao([...K,...f]);L(g),!I&&g.length>0&&J(g[0])}catch(a){alert("Error subiendo imagen: "+a.message)}finally{x(!1),a.target.value=""}}async function av(b){b.preventDefault(),v(!0);try{let b=await d.supabase.auth.getSession(),c=b?.data?.session?.access_token;if(!c){alert("Tu sesión expiró. Vuelve a iniciar sesión."),v(!1);return}let f=null;if(!a?.categoria_id||ai){if(!Q||"default"===Q){alert("Debes seleccionar una Categoría Principal."),v(!1);return}if(f=Q,j.some(a=>String(a.parent_id)===Q)&&(!S||"default"===S)){alert("Debes seleccionar una Subcategoría para la nueva categoría seleccionada."),v(!1);return}S&&"default"!==S&&(f=S)}else if(a?.categoria_id)f=a.categoria_id;else{alert("Error de lógica: No hay categoría asignada y no se seleccionó ninguna."),v(!1);return}let g=Number(A);if(!Number.isFinite(g)||g<=0){alert("Ingresa un precio actual válido"),v(!1);return}let h=String(C||"").trim(),i=h?Number(h):null;if(null!=i&&(!Number.isFinite(i)||i<=0)){alert("Ingresa un precio antes válido o déjalo vacío"),v(!1);return}if(null!=i&&i<=g){alert("El precio antes debe ser mayor que el precio actual para mostrar oferta"),v(!1);return}let k=Number(E);if(!Number.isFinite(k)||k<0){alert("Ingresa un stock válido"),v(!1);return}let l=Number(G);if(!Number.isFinite(l)||l<0||l>5){alert("Ingresa una calificación válida (0-5)"),v(!1);return}let m=K.length>0?ao(K):ao([...I?[I]:[]]),n=m.filter(a=>{let b=String(a||"").toLowerCase();return!(b.endsWith(".mp4")||b.endsWith(".webm")||b.endsWith(".mov")||b.endsWith(".m4v"))}),o=m.filter(a=>{let b=String(a||"").toLowerCase();return b.endsWith(".mp4")||b.endsWith(".webm")||b.endsWith(".mov")||b.endsWith(".m4v")}),p=ap([...O,...o]),q=n[0]||I||null,r={nombre:y,precio:g,precio_antes:i,stock:k,calificacion:l,imagen_url:q,imagenes:n,videos:p,descripcion:U.trim()||null,materiales:W.trim()||null,tamano:Y.trim()||null,color:$.trim()||null,cuidados:aa.trim()||null,uso:ac.trim()||null,categoria_id:f?parseInt(String(f)):null},t=ae.map(a=>({clave:String(a.clave||"").trim(),valor:String(a.valor||"").trim(),orden:Number(a.orden||0)})).filter(a=>a.clave.length>0),u=ag.map(a=>({etiqueta:String(a.etiqueta||"").trim(),precio:String(a.precio||"").trim(),precio_antes:String(a.precio_antes||"").trim(),stock:String(a.stock||"").trim(),activo:!!a.activo})).filter(a=>a.etiqueta.length>0),w=a?"PUT":"POST",x={product:r,specs:t,variants:u.map(a=>({etiqueta:a.etiqueta,precio:a.precio?Number(a.precio):null,precio_antes:a.precio_antes?Number(a.precio_antes):null,stock:Number(a.stock||0),activo:a.activo}))};a&&(x.id=Number(a.id)),await (0,e.saveAdminProductoViaApi)({accessToken:c,method:w,body:x}),s()}catch(a){alert("Error al guardar: "+a.message)}finally{v(!1)}}return(0,c.useEffect)(()=>{if(a){z(a.nombre||""),B(a.precio?.toString()||""),D(null!=a.precio_antes?String(a.precio_antes):""),F(a.stock?.toString()||""),H(null!=a.calificacion?String(a.calificacion):"5"),J(a.imagen_url||""),V(a.descripcion||""),X(a.materiales||""),Z(a.tamano||""),_(a.color||""),ab(a.cuidados||""),ad(a.uso||"");let b=Array.isArray(a.imagenes)?a.imagenes:[];L(Array.from(new Set([...a.imagen_url?[a.imagen_url]:[],...b].map(a=>String(a||"").trim()).filter(Boolean))).slice(0,10)),N(""),P(Array.from(new Set((Array.isArray(a.videos)?a.videos:[]).map(a=>String(a||"").trim()).filter(Boolean))).slice(0,6)),a.categoria_id||(R("default"),T("default")),(async()=>{try{let b=Number(a.id);if(!b){af([]),ah([]);return}let{specs:c,variants:d}=await (0,e.fetchProductoSpecsAndVariants)(b),f=Array.isArray(c)?c.map(a=>({id:Number(a.id),clave:String(a.clave||""),valor:String(a.valor||""),orden:Number(a.orden||0)})):[];af(f);let g=Array.isArray(d)?d.map(a=>({id:Number(a.id),etiqueta:String(a.etiqueta||""),precio:null!=a.precio?String(a.precio):"",precio_antes:null!=a.precio_antes?String(a.precio_antes):"",stock:String(a.stock??0),activo:!!(a.activo??!0)})):[];ah(g)}catch(a){af([]),ah([])}})()}else z(""),B(""),D(""),F(""),H("5"),J(""),V(""),X(""),Z(""),_(""),ab(""),ad(""),L([]),N(""),P([]),R("default"),T("default"),af([]),ah([])},[a,j]),(0,b.jsxs)("form",{onSubmit:av,className:"space-y-6 py-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"name",children:"Nombre del Producto"}),(0,b.jsx)(g.Input,{id:"name",placeholder:"Ej: Zapatillas Nike Air",required:!0,value:y,onChange:a=>z(a.target.value)})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"descripcion",children:"Descripción (general)"}),(0,b.jsx)(i.Textarea,{id:"descripcion",placeholder:"Descripción completa del producto...",value:U,onChange:a=>V(a.target.value)})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"materiales",children:"Materiales"}),(0,b.jsx)(i.Textarea,{id:"materiales",value:W,onChange:a=>X(a.target.value)})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"tamano",children:"Tamaño / Medidas"}),(0,b.jsx)(i.Textarea,{id:"tamano",value:Y,onChange:a=>Z(a.target.value)})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"color",children:"Color"}),(0,b.jsx)(i.Textarea,{id:"color",value:$,onChange:a=>_(a.target.value)})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"cuidados",children:"Cuidados"}),(0,b.jsx)(i.Textarea,{id:"cuidados",value:aa,onChange:a=>ab(a.target.value)})]}),(0,b.jsxs)("div",{className:"space-y-2 sm:col-span-2",children:[(0,b.jsx)(h.Label,{htmlFor:"uso",children:"Uso recomendado"}),(0,b.jsx)(i.Textarea,{id:"uso",value:ac,onChange:a=>ad(a.target.value)})]})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(h.Label,{children:"Ficha técnica (especificaciones)"}),(0,b.jsx)(f.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>af(a=>[...a,{clave:"",valor:"",orden:a.length}]),children:"Agregar"})]}),0===ae.length?(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"Sin especificaciones"}):(0,b.jsx)("div",{className:"space-y-2",children:ae.slice().sort((a,b)=>Number(a.orden||0)-Number(b.orden||0)).map((a,c)=>(0,b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-12 gap-2 rounded-lg border bg-popover p-3",children:[(0,b.jsxs)("div",{className:"sm:col-span-4",children:[(0,b.jsx)(h.Label,{className:"text-xs",children:"Clave"}),(0,b.jsx)(g.Input,{value:a.clave,onChange:b=>{let c=b.target.value;af(b=>b.map(b=>b===a?{...b,clave:c}:b))}})]}),(0,b.jsxs)("div",{className:"sm:col-span-6",children:[(0,b.jsx)(h.Label,{className:"text-xs",children:"Valor"}),(0,b.jsx)(g.Input,{value:a.valor,onChange:b=>{let c=b.target.value;af(b=>b.map(b=>b===a?{...b,valor:c}:b))}})]}),(0,b.jsxs)("div",{className:"sm:col-span-2 flex items-end gap-2",children:[(0,b.jsx)(f.Button,{type:"button",variant:"ghost",size:"icon",className:"h-9 w-9",onClick:()=>af(b=>b.map(b=>b===a?{...b,orden:Math.max(0,Number(b.orden||0)-1)}:b)),children:(0,b.jsx)(l,{className:"h-4 w-4"})}),(0,b.jsx)(f.Button,{type:"button",variant:"ghost",size:"icon",className:"h-9 w-9",onClick:()=>af(b=>b.map(b=>b===a?{...b,orden:Number(b.orden||0)+1}:b)),children:(0,b.jsx)(k,{className:"h-4 w-4"})}),(0,b.jsx)(f.Button,{type:"button",variant:"ghost",size:"icon",className:"h-9 w-9",onClick:()=>af(b=>b.filter(b=>b!==a)),children:(0,b.jsx)(p.Trash2,{className:"h-4 w-4"})})]})]},a.id??`new-${c}`))})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(h.Label,{children:"Videos (hasta 6)"}),(0,b.jsxs)("span",{className:"text-xs text-muted-foreground",children:[O.length,"/6"]})]}),(0,b.jsx)("div",{className:"flex items-center gap-3",children:(0,b.jsx)(g.Input,{type:"file",accept:"video/mp4,video/webm",multiple:!0,onChange:aq,disabled:w||O.length>=6})}),O.length>0&&(0,b.jsx)("div",{className:"space-y-2",children:O.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center gap-3 rounded-lg border bg-popover p-2",children:[(0,b.jsx)("div",{className:"h-7 w-7 rounded-md bg-primary text-primary-foreground flex items-center justify-center text-xs font-bold",children:c+1}),(0,b.jsx)("div",{className:"min-w-0 flex-1",children:(0,b.jsx)("p",{className:"text-xs text-muted-foreground truncate",children:a})}),(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(f.Button,{type:"button",variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>as(c,c-1),disabled:0===c,children:(0,b.jsx)(l,{className:"h-4 w-4"})}),(0,b.jsx)(f.Button,{type:"button",variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>as(c,c+1),disabled:c===O.length-1,children:(0,b.jsx)(k,{className:"h-4 w-4"})}),(0,b.jsx)(f.Button,{type:"button",variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>P(b=>b.filter(b=>b!==a)),children:(0,b.jsx)(p.Trash2,{className:"h-4 w-4"})})]})]},`${a}-${c}`))})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(h.Label,{children:"Variantes (talla / color / modelo)"}),(0,b.jsx)(f.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>ah(a=>[...a,{etiqueta:"",precio:"",precio_antes:"",stock:"0",activo:!0}]),children:"Agregar"})]}),0===ag.length?(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"Sin variantes"}):(0,b.jsx)("div",{className:"space-y-2",children:ag.map((a,c)=>(0,b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-12 gap-2 rounded-lg border bg-popover p-3",children:[(0,b.jsxs)("div",{className:"sm:col-span-4",children:[(0,b.jsx)(h.Label,{className:"text-xs",children:"Etiqueta"}),(0,b.jsx)(g.Input,{value:a.etiqueta,onChange:b=>{let c=b.target.value;ah(b=>b.map(b=>b===a?{...b,etiqueta:c}:b))}})]}),(0,b.jsxs)("div",{className:"sm:col-span-2",children:[(0,b.jsx)(h.Label,{className:"text-xs",children:"Precio (opcional)"}),(0,b.jsx)(g.Input,{inputMode:"decimal",value:a.precio,onChange:b=>{let c=b.target.value;ah(b=>b.map(b=>b===a?{...b,precio:c}:b))}})]}),(0,b.jsxs)("div",{className:"sm:col-span-2",children:[(0,b.jsx)(h.Label,{className:"text-xs",children:"Precio antes (opcional)"}),(0,b.jsx)(g.Input,{inputMode:"decimal",value:a.precio_antes,onChange:b=>{let c=b.target.value;ah(b=>b.map(b=>b===a?{...b,precio_antes:c}:b))}})]}),(0,b.jsxs)("div",{className:"sm:col-span-2",children:[(0,b.jsx)(h.Label,{className:"text-xs",children:"Stock"}),(0,b.jsx)(g.Input,{inputMode:"numeric",value:a.stock,onChange:b=>{let c=b.target.value;ah(b=>b.map(b=>b===a?{...b,stock:c}:b))}})]}),(0,b.jsxs)("div",{className:"sm:col-span-2 flex items-end gap-2",children:[(0,b.jsx)(f.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>ah(b=>b.map(b=>b===a?{...b,activo:!b.activo}:b)),children:a.activo?"Activa":"Inactiva"}),(0,b.jsx)(f.Button,{type:"button",variant:"ghost",size:"icon",className:"h-9 w-9",onClick:()=>ah(b=>b.filter(b=>b!==a)),children:(0,b.jsx)(p.Trash2,{className:"h-4 w-4"})})]})]},a.id??`vnew-${c}`))})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"price",children:"Precio actual (S/)"}),(0,b.jsx)(g.Input,{id:"price",type:"number",step:"0.01",required:!0,placeholder:"0.00",value:A,onChange:a=>B(a.target.value)})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"priceBefore",children:"Precio antes (S/) (opcional)"}),(0,b.jsx)(g.Input,{id:"priceBefore",type:"number",step:"0.01",placeholder:"0.00",value:C,onChange:a=>D(a.target.value)})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"stock",children:"Stock (Unidades)"}),(0,b.jsx)(g.Input,{id:"stock",type:"number",required:!0,placeholder:"10",value:E,onChange:a=>F(a.target.value)})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"calificacion",children:"Calificación (0-5)"}),(0,b.jsx)(g.Input,{id:"calificacion",type:"number",step:"0.1",min:"0",max:"5",required:!0,placeholder:"5.0",value:G,onChange:a=>H(a.target.value)})]})]}),(0,b.jsx)("div",{className:"space-y-2",children:(()=>{let c=!!a?.categoria_id,d="",e="";if(c&&j.length>0){let b=String(a.categoria_id),c=j.find(a=>String(a.id)===b);if(c)if(c.parent_id){let a=j.find(a=>String(a.id)===String(c.parent_id));d=a?.nombre||"...",e=c.nombre}else d=c.nombre}return(0,b.jsxs)("div",{className:"space-y-4",children:[c&&(0,b.jsxs)("div",{className:"p-4 border rounded-md bg-muted/40",children:[(0,b.jsx)(h.Label,{className:"text-sm font-semibold mb-2 block",children:"Categoría Asignada (Actual)"}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,b.jsx)("span",{className:"bg-primary/10 text-primary px-3 py-1 rounded-full font-medium",children:d||"Desconocida"}),e&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"/"}),(0,b.jsx)("span",{className:"bg-secondary text-secondary-foreground px-3 py-1 rounded-full font-medium",children:e})]})]}),(0,b.jsx)("div",{className:"mt-4",children:(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)("input",{type:"checkbox",id:"changeCat",className:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary",checked:ai,onChange:a=>aj(a.target.checked)}),(0,b.jsx)(h.Label,{htmlFor:"changeCat",className:"font-normal cursor-pointer select-none",children:"Quiero cambiar la categoría actual"})]})})]}),(!c||ai)&&(0,b.jsxs)("div",{className:`space-y-4 ${c?"p-4 border border-dashed rounded-md bg-background animate-in fade-in zoom-in-95 duration-200":""}`,children:[c&&(0,b.jsx)(h.Label,{className:"text-sm font-semibold text-primary",children:"Seleccionar Nueva Categoría"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsxs)(h.Label,{className:"text-xs text-muted-foreground",children:["Categoría Principal ",c?"(Nueva)":""]}),(0,b.jsxs)(r.Select,{value:Q,onValueChange:a=>{R(a),T("default")},children:[(0,b.jsx)(r.SelectTrigger,{children:(0,b.jsx)(r.SelectValue,{placeholder:"Seleccionar Principal"})}),(0,b.jsxs)(r.SelectContent,{children:[(0,b.jsx)(r.SelectItem,{value:"default",children:"Seleccionar..."}),j.filter(a=>!a.parent_id).sort((a,b)=>a.nombre.localeCompare(b.nombre)).map(a=>(0,b.jsx)(r.SelectItem,{value:String(a.id),children:a.nombre},a.id))]})]})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)(h.Label,{className:"text-xs text-muted-foreground",children:"Subcategoría (Opcional)"}),(0,b.jsxs)(r.Select,{value:S,onValueChange:T,disabled:"default"===Q||!j.some(a=>String(a.parent_id)===Q),children:[(0,b.jsx)(r.SelectTrigger,{children:(0,b.jsx)(r.SelectValue,{placeholder:"Seleccionar Subcategoría"})}),(0,b.jsxs)(r.SelectContent,{children:[(0,b.jsx)(r.SelectItem,{value:"default",children:"Ninguna"}),j.filter(a=>String(a.parent_id)===Q).sort((a,b)=>a.nombre.localeCompare(b.nombre)).map(a=>(0,b.jsx)(r.SelectItem,{value:String(a.id),children:a.nombre},a.id))]})]})]})]}),ak?(0,b.jsxs)("div",{className:"flex gap-2 mt-2",children:[(0,b.jsx)(g.Input,{placeholder:"Nombre nueva categoría...",value:am,onChange:a=>an(a.target.value),className:"flex-1"}),(0,b.jsx)(f.Button,{type:"button",size:"sm",onClick:at,disabled:!am.trim()||u,children:(0,b.jsx)(n.Save,{className:"h-4 w-4"})}),(0,b.jsx)(f.Button,{type:"button",variant:"ghost",size:"sm",onClick:()=>al(!1),children:"Cancelar"})]}):(0,b.jsx)(f.Button,{type:"button",variant:"link",className:"h-auto p-0 text-xs text-accent mt-2",onClick:()=>al(!0),children:"+ Crear Nueva Categoría Global"})]})]})})()}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{children:"Imagen"}),(0,b.jsx)("div",{className:"flex gap-2 items-center",children:(0,b.jsx)(g.Input,{value:I,onChange:a=>J(a.target.value),placeholder:"https://...",className:"flex-1"})}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Pega una URL externa o sube una imagen (si tienes bucket)."}),(0,b.jsxs)("div",{className:"mt-2",children:[(0,b.jsxs)(h.Label,{htmlFor:"file-upload",className:"cursor-pointer inline-flex items-center gap-2 text-sm bg-primary text-primary-foreground px-3 py-2 rounded-md transition-colors hover:bg-primary/90 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 shadow-sm",children:[(0,b.jsx)(q.UploadCloud,{className:"h-4 w-4"}),w?"Subiendo...":"Subir desde PC (puedes seleccionar varias)"]}),(0,b.jsx)(g.Input,{id:"file-upload",type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:au,disabled:w})]}),I&&(0,b.jsx)("div",{className:"mt-2 h-32 w-32 rounded-lg border overflow-hidden relative bg-popover",children:(0,b.jsx)("img",{src:I,alt:"Preview",className:"h-full w-full object-cover"})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(h.Label,{children:"Galería (hasta 10)"}),(0,b.jsxs)("span",{className:"text-xs text-muted-foreground",children:[K.length,"/10"]})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(g.Input,{value:M,onChange:a=>N(a.target.value),placeholder:"Pega otra URL de imagen...",className:"flex-1"}),(0,b.jsx)(f.Button,{type:"button",onClick:()=>{if(M.trim()&&!(K.length>=10)){let a;L(a=ao([...K,M])),!I&&a.length>0&&J(a[0]),N("")}},disabled:!M.trim()||K.length>=10,children:"Agregar"})]}),K.length>0&&(0,b.jsx)("div",{className:"space-y-2",children:K.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center gap-3 rounded-lg border bg-popover p-2",children:[(0,b.jsx)("div",{className:"h-7 w-7 rounded-md bg-primary text-primary-foreground flex items-center justify-center text-xs font-bold",children:c+1}),(0,b.jsx)("div",{className:"h-12 w-12 rounded-md overflow-hidden border bg-background flex-shrink-0",children:(0,b.jsx)("img",{src:a,alt:"Imagen",className:"h-full w-full object-cover"})}),(0,b.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground truncate",children:a}),0===c&&(0,b.jsx)("p",{className:"text-xs font-medium",children:"Principal"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(f.Button,{type:"button",variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>{let b;L(b=ao([a,...K.filter(b=>b!==a)])),J(b[0]||"")},disabled:0===c,children:(0,b.jsx)(o.Star,{className:"h-4 w-4"})}),(0,b.jsx)(f.Button,{type:"button",variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>ar(c,c-1),disabled:0===c,children:(0,b.jsx)(l,{className:"h-4 w-4"})}),(0,b.jsx)(f.Button,{type:"button",variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>ar(c,c+1),disabled:c===K.length-1,children:(0,b.jsx)(k,{className:"h-4 w-4"})}),(0,b.jsx)(f.Button,{type:"button",variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>{let b;L(b=K.filter(b=>b!==a)),I===a&&J(b[0]||"")},children:(0,b.jsx)(p.Trash2,{className:"h-4 w-4"})})]})]},`${a}-${c}`))})]}),(0,b.jsxs)("div",{className:"pt-4 flex gap-3 justify-end",children:[(0,b.jsx)(f.Button,{type:"button",variant:"outline",onClick:t,children:"Cancelar"}),(0,b.jsx)(f.Button,{type:"submit",className:"bg-primary text-primary-foreground hover:bg-primary/90",disabled:u||w,children:u?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(m.Loader2,{className:"mr-2 h-4 w-4 animate-spin"})," Guardando..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(n.Save,{className:"mr-2 h-4 w-4"})," Guardar Producto"]})})]})]})}a.s(["ProductForm",()=>s],14468)}];

//# sourceMappingURL=components_admin_product-form_tsx_ce1ccd6d._.js.map