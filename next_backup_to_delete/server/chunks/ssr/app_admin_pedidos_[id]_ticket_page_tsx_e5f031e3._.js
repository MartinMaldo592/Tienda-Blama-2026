module.exports=[30313,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(40695),f=a.i(97895);a.i(17209);var g=a.i(39367);function h(){let a=(0,d.useParams)(),h=(0,d.useRouter)(),i=a.id,[j,k]=(0,c.useState)(null),[l,m]=(0,c.useState)([]),[n,o]=(0,c.useState)(!0);async function p(){o(!0);try{let a=Number(i);if(!a){k(null),m([]),o(!1);return}let b=await (0,g.fetchPedidoDetail)(a);k(b.pedido),m(b.items)}catch(a){k(null),m([])}o(!1)}if((0,c.useEffect)(()=>{i&&p()},[i]),(0,c.useEffect)(()=>{if(j)try{let a=String(j.id).padStart(6,"0");document.title=`Ticket Pedido #${a} - Blama Shop`}catch(a){}},[j]),n)return(0,b.jsx)("div",{className:"p-10 text-center",children:"Cargando ticket..."});if(!j)return(0,b.jsx)("div",{className:"p-10 text-center",children:"Pedido no encontrado"});let q=Number(j.subtotal??j.total),r=Number(j.descuento??0),s=Number(j.total??0);return(0,b.jsxs)("div",{className:"max-w-2xl mx-auto p-6 print:p-0",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between gap-2 mb-6 print:hidden",children:[(0,b.jsx)(e.Button,{variant:"outline",onClick:()=>h.back(),children:"Volver"}),(0,b.jsx)("div",{className:"flex gap-2",children:(0,b.jsx)(e.Button,{variant:"outline",onClick:()=>window.print(),children:"Descargar ticket"})})]}),(0,b.jsxs)("div",{className:"border border-border rounded-lg p-6 bg-card text-card-foreground print:border-0 print:rounded-none print:p-0",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-xl font-bold",children:"Ticket de Pedido"}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:["#",String(j.id).padStart(6,"0")," • ",new Date(j.created_at).toLocaleString()]})]}),(0,b.jsxs)("div",{className:"text-right text-sm",children:[(0,b.jsx)("div",{className:"font-medium",children:"Estado"}),(0,b.jsx)("div",{className:"text-muted-foreground",children:j.status})]})]}),(0,b.jsxs)("div",{className:"mt-6 grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"border border-border rounded-md p-4",children:[(0,b.jsx)("div",{className:"font-semibold",children:"Cliente"}),(0,b.jsx)("div",{className:"text-sm mt-1",children:j.clientes?.nombre||""}),(0,b.jsxs)("div",{className:"text-sm text-muted-foreground",children:["DNI: ",j.clientes?.dni||""]}),(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:j.clientes?.telefono||""})]}),(0,b.jsxs)("div",{className:"border border-border rounded-md p-4",children:[(0,b.jsx)("div",{className:"font-semibold",children:"Entrega"}),(0,b.jsx)("div",{className:"text-sm mt-1",children:j.clientes?.direccion||""})]})]}),(0,b.jsxs)("div",{className:"mt-6",children:[(0,b.jsx)("div",{className:"font-semibold mb-2",children:"Productos"}),(0,b.jsxs)("div",{className:"border border-border rounded-md overflow-hidden",children:[(0,b.jsxs)("div",{className:"grid grid-cols-12 gap-2 p-3 bg-popover text-sm font-medium",children:[(0,b.jsx)("div",{className:"col-span-6",children:"Producto"}),(0,b.jsx)("div",{className:"col-span-2 text-right",children:"Cant."}),(0,b.jsx)("div",{className:"col-span-2 text-right",children:"Unit."}),(0,b.jsx)("div",{className:"col-span-2 text-right",children:"Importe"})]}),l.map(a=>{let c=Number(a.productos?.precio??0),d=Number(a.cantidad??0);return(0,b.jsxs)("div",{className:"grid grid-cols-12 gap-2 p-3 border-t border-border text-sm",children:[(0,b.jsx)("div",{className:"col-span-6",children:a.productos?.nombre||"Producto"}),(0,b.jsx)("div",{className:"col-span-2 text-right",children:d}),(0,b.jsx)("div",{className:"col-span-2 text-right",children:(0,f.formatCurrency)(c)}),(0,b.jsx)("div",{className:"col-span-2 text-right",children:(0,f.formatCurrency)(c*d)})]},a.id)})]})]}),(0,b.jsxs)("div",{className:"mt-6 border-t border-border pt-4 space-y-2",children:[j.cupon_codigo&&(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Cupón"}),(0,b.jsx)("span",{className:"font-medium",children:j.cupon_codigo})]}),(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Subtotal"}),(0,b.jsx)("span",{className:"font-medium",children:(0,f.formatCurrency)(q)})]}),r>0&&(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Descuento"}),(0,b.jsxs)("span",{className:"font-medium",children:["- ",(0,f.formatCurrency)(r)]})]}),(0,b.jsxs)("div",{className:"flex justify-between text-base font-bold",children:[(0,b.jsx)("span",{children:"Total"}),(0,b.jsx)("span",{children:(0,f.formatCurrency)(s)})]}),(0,b.jsxs)("div",{className:"pt-3 text-xs text-muted-foreground",children:["Pago: ",j.pago_status]})]})]})]})}a.s(["default",()=>h])}];

//# sourceMappingURL=app_admin_pedidos_%5Bid%5D_ticket_page_tsx_e5f031e3._.js.map