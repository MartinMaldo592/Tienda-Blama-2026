module.exports=[88237,a=>{"use strict";var b=a.i(87924),c=a.i(97895);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,b.jsx)("table",{"data-slot":"table",className:(0,c.cn)("w-full caption-bottom text-sm",a),...d})})}function e({className:a,...d}){return(0,b.jsx)("thead",{"data-slot":"table-header",className:(0,c.cn)("[&_tr]:border-b",a),...d})}function f({className:a,...d}){return(0,b.jsx)("tbody",{"data-slot":"table-body",className:(0,c.cn)("[&_tr:last-child]:border-0",a),...d})}function g({className:a,...d}){return(0,b.jsx)("tr",{"data-slot":"table-row",className:(0,c.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",a),...d})}function h({className:a,...d}){return(0,b.jsx)("th",{"data-slot":"table-head",className:(0,c.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...d})}function i({className:a,...d}){return(0,b.jsx)("td",{"data-slot":"table-cell",className:(0,c.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...d})}a.s(["Table",()=>d,"TableBody",()=>f,"TableCell",()=>i,"TableHead",()=>h,"TableHeader",()=>e,"TableRow",()=>g])},32528,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(38246),f=a.i(7291),g=a.i(40695),h=a.i(5522),i=a.i(8999),j=a.i(46639),k=a.i(88237),l=a.i(97895),m=a.i(15618),n=a.i(87532);let o=(0,a.i(70106).default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);var p=a.i(81560),q=a.i(38632);a.i(17209);var r=a.i(17071);function s(){(0,d.useRouter)();let[a,s]=(0,c.useState)([]),[t,u]=(0,c.useState)(!0),v=(0,i.useRoleGuard)({allowedRoles:["admin"]});async function w(){u(!0);try{let a=await (0,r.fetchAdminProductos)();s(a)}catch(a){s([])}u(!1)}(0,c.useEffect)(()=>{v.loading||v.accessDenied||w()},[v.loading,v.accessDenied]);let x=async a=>{if(!confirm("¿Estás seguro de que deseas eliminar este producto?"))return;let b=await f.supabase.auth.getSession(),c=b?.data?.session?.access_token;if(!c)return void alert("Tu sesión expiró. Vuelve a iniciar sesión.");try{await (0,r.deleteAdminProductoViaApi)({accessToken:c,id:a})}catch(a){alert("Error al eliminar: "+String(a?.message||"No se pudo eliminar"));return}w()};return v.accessDenied?(0,b.jsx)(j.AccessDenied,{}):v.loading?(0,b.jsx)("div",{className:"p-6 text-muted-foreground",children:"Cargando..."}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Productos"}),(0,b.jsx)("p",{className:"text-gray-500",children:"Administra el inventario de tu tienda."})]}),(0,b.jsx)(g.Button,{asChild:!0,className:"bg-black text-white gap-2 hover:bg-gray-800",children:(0,b.jsxs)(e.default,{href:"/admin/productos/nuevo",children:[(0,b.jsx)(m.Plus,{className:"h-4 w-4"})," Nuevo Producto"]})})]}),(0,b.jsx)("div",{className:"flex gap-2 bg-white p-4 rounded-xl shadow-sm border",children:(0,b.jsxs)("div",{className:"relative flex-1",children:[(0,b.jsx)(n.Search,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),(0,b.jsx)(h.Input,{placeholder:"Buscar produto...",className:"pl-9 border-gray-200"})]})}),(0,b.jsx)("div",{className:"bg-white rounded-xl shadow-sm border overflow-hidden",children:(0,b.jsxs)(k.Table,{children:[(0,b.jsx)(k.TableHeader,{className:"bg-gray-50",children:(0,b.jsxs)(k.TableRow,{children:[(0,b.jsx)(k.TableHead,{className:"w-[80px]",children:"Imagen"}),(0,b.jsx)(k.TableHead,{children:"Nombre"}),(0,b.jsx)(k.TableHead,{children:"Precio"}),(0,b.jsx)(k.TableHead,{children:"Stock"}),(0,b.jsx)(k.TableHead,{className:"text-right",children:"Acciones"})]})}),(0,b.jsx)(k.TableBody,{children:t?(0,b.jsx)(k.TableRow,{children:(0,b.jsx)(k.TableCell,{colSpan:5,className:"text-center py-10",children:"Cargando..."})}):0===a.length?(0,b.jsx)(k.TableRow,{children:(0,b.jsx)(k.TableCell,{colSpan:5,className:"text-center py-10",children:"No hay productos."})}):a.map(a=>(0,b.jsxs)(k.TableRow,{children:[(0,b.jsx)(k.TableCell,{children:(0,b.jsx)("div",{className:"h-10 w-10 bg-gray-100 rounded-md overflow-hidden flex items-center justify-center",children:a.imagen_url?(0,b.jsx)("img",{src:a.imagen_url,alt:a.nombre,className:"h-full w-full object-cover"}):(0,b.jsx)(q.Image,{className:"h-4 w-4 text-gray-400"})})}),(0,b.jsx)(k.TableCell,{className:"font-medium",children:a.nombre}),(0,b.jsx)(k.TableCell,{children:(0,b.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,b.jsx)("span",{className:"font-semibold",children:(0,l.formatCurrency)(a.precio)}),null!=a.precio_antes&&Number(a.precio_antes)>Number(a.precio)&&(0,b.jsx)("span",{className:"text-xs text-gray-500 line-through",children:(0,l.formatCurrency)(a.precio_antes)})]})}),(0,b.jsx)(k.TableCell,{children:(0,b.jsxs)("span",{className:`px-2 py-1 rounded-full text-xs font-bold ${a.stock>0?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[a.stock," un."]})}),(0,b.jsxs)(k.TableCell,{className:"text-right space-x-2",children:[(0,b.jsx)(g.Button,{asChild:!0,variant:"ghost",size:"icon",className:"h-8 w-8 hover:bg-gray-100",children:(0,b.jsx)(e.default,{href:`/admin/productos/${a.id}/editar`,"aria-label":"Editar",children:(0,b.jsx)(o,{className:"h-4 w-4 text-gray-600"})})}),(0,b.jsx)(g.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 hover:bg-red-50",onClick:()=>x(a.id),children:(0,b.jsx)(p.Trash2,{className:"h-4 w-4 text-red-500"})})]})]},a.id))})]})})]})}a.s(["default",()=>s],32528)}];

//# sourceMappingURL=_2168ab2a._.js.map