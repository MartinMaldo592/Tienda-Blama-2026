module.exports=[3130,a=>{"use strict";var b=a.i(87924),c=a.i(97895);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card",className:(0,c.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...d})}function e({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-header",className:(0,c.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...d})}function f({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-title",className:(0,c.cn)("leading-none font-semibold",a),...d})}function g({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-content",className:(0,c.cn)("px-6",a),...d})}function h({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-footer",className:(0,c.cn)("flex items-center px-6 [.border-t]:pt-6",a),...d})}a.s(["Card",()=>d,"CardContent",()=>g,"CardFooter",()=>h,"CardHeader",()=>e,"CardTitle",()=>f])},88237,a=>{"use strict";var b=a.i(87924),c=a.i(97895);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,b.jsx)("table",{"data-slot":"table",className:(0,c.cn)("w-full caption-bottom text-sm",a),...d})})}function e({className:a,...d}){return(0,b.jsx)("thead",{"data-slot":"table-header",className:(0,c.cn)("[&_tr]:border-b",a),...d})}function f({className:a,...d}){return(0,b.jsx)("tbody",{"data-slot":"table-body",className:(0,c.cn)("[&_tr:last-child]:border-0",a),...d})}function g({className:a,...d}){return(0,b.jsx)("tr",{"data-slot":"table-row",className:(0,c.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",a),...d})}function h({className:a,...d}){return(0,b.jsx)("th",{"data-slot":"table-head",className:(0,c.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...d})}function i({className:a,...d}){return(0,b.jsx)("td",{"data-slot":"table-cell",className:(0,c.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...d})}a.s(["Table",()=>d,"TableBody",()=>f,"TableCell",()=>i,"TableHead",()=>h,"TableHeader",()=>e,"TableRow",()=>g])},69520,a=>{"use strict";let b=(0,a.i(70106).default)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);a.s(["RefreshCw",()=>b],69520)},28160,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(38246),e=a.i(50944),f=a.i(8999),g=a.i(46639),h=a.i(40695),i=a.i(3130),j=a.i(5522),k=a.i(88237),l=a.i(97895),m=a.i(210),n=a.i(69520);a.i(17209);var o=a.i(44538);function p(){let a=(0,e.useRouter)(),[p,q]=(0,c.useState)(!0),r=(0,f.useRoleGuard)({allowedRoles:["admin"]}),[s,t]=(0,c.useState)(!1),[u,v]=(0,c.useState)(new Date().toISOString().slice(0,10)),[w,x]=(0,c.useState)(new Date().toISOString().slice(0,10)),[y,z]=(0,c.useState)([]),A=(0,c.useCallback)(async()=>{q(!0);try{let a=await (0,o.fetchAdminVentasEntregadas)({from:u,to:w});z(a)}catch(a){console.error("Error fetching ventas:",a),z([])}q(!1)},[u,w]);(0,c.useEffect)(()=>{r.loading||r.accessDenied||s||(async()=>{await A(),t(!0)})()},[r.loading,r.accessDenied,s,A]);let B=(0,c.useMemo)(()=>{let a=y.reduce((a,b)=>a+(Number(b.total)||0),0),b=y.length;return{total:a,count:b,avg:b>0?a/b:0}},[y]);return r.loading?(0,b.jsx)("div",{className:"p-10",children:"Cargando..."}):r.accessDenied?(0,b.jsx)(g.AccessDenied,{message:"Solo administradores pueden ver esta sección."}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(h.Button,{variant:"ghost",size:"icon",onClick:()=>a.push("/admin/dashboard"),children:(0,b.jsx)(m.ArrowLeft,{className:"h-5 w-5"})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Ventas (Entregado)"}),(0,b.jsx)("p",{className:"text-gray-500",children:"Ventas reales: solo pedidos marcados como “Entregado”."})]}),(0,b.jsxs)(h.Button,{variant:"outline",className:"gap-2",onClick:A,disabled:p,children:[(0,b.jsx)(n.RefreshCw,{className:"h-4 w-4"})," Actualizar"]})]}),(0,b.jsxs)(i.Card,{className:"shadow-sm border-gray-200",children:[(0,b.jsx)(i.CardHeader,{children:(0,b.jsx)(i.CardTitle,{children:"Rango de fechas"})}),(0,b.jsxs)(i.CardContent,{className:"flex flex-col md:flex-row gap-3 md:items-end",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Desde"}),(0,b.jsx)(j.Input,{type:"date",value:u,onChange:a=>v(a.target.value)})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Hasta"}),(0,b.jsx)(j.Input,{type:"date",value:w,onChange:a=>x(a.target.value)})]}),(0,b.jsx)(h.Button,{className:"md:ml-auto",onClick:A,disabled:p,children:"Aplicar"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,b.jsx)(i.Card,{className:"shadow-sm border-gray-200",children:(0,b.jsxs)(i.CardContent,{className:"p-5",children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total vendido"}),(0,b.jsx)("p",{className:"text-2xl font-bold",children:(0,l.formatCurrency)(B.total)})]})}),(0,b.jsx)(i.Card,{className:"shadow-sm border-gray-200",children:(0,b.jsxs)(i.CardContent,{className:"p-5",children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Cantidad de ventas"}),(0,b.jsx)("p",{className:"text-2xl font-bold",children:B.count})]})}),(0,b.jsx)(i.Card,{className:"shadow-sm border-gray-200",children:(0,b.jsxs)(i.CardContent,{className:"p-5",children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Ticket promedio"}),(0,b.jsx)("p",{className:"text-2xl font-bold",children:(0,l.formatCurrency)(B.avg)})]})})]}),(0,b.jsx)("div",{className:"bg-white rounded-xl shadow-sm border overflow-hidden",children:(0,b.jsxs)(k.Table,{children:[(0,b.jsx)(k.TableHeader,{className:"bg-gray-50",children:(0,b.jsxs)(k.TableRow,{children:[(0,b.jsx)(k.TableHead,{children:"Pedido"}),(0,b.jsx)(k.TableHead,{children:"Fecha"}),(0,b.jsx)(k.TableHead,{children:"Cliente"}),(0,b.jsx)(k.TableHead,{children:"Total"}),(0,b.jsx)(k.TableHead,{className:"text-right",children:"Detalle"})]})}),(0,b.jsx)(k.TableBody,{children:p?(0,b.jsx)(k.TableRow,{children:(0,b.jsx)(k.TableCell,{colSpan:5,className:"text-center py-10",children:"Cargando..."})}):0===y.length?(0,b.jsx)(k.TableRow,{children:(0,b.jsx)(k.TableCell,{colSpan:5,className:"text-center py-10",children:"No hay ventas en ese rango."})}):y.map(a=>(0,b.jsxs)(k.TableRow,{children:[(0,b.jsxs)(k.TableCell,{className:"font-medium",children:["#",String(a.id).padStart(6,"0")]}),(0,b.jsx)(k.TableCell,{className:"text-sm text-muted-foreground",children:new Date(a.created_at).toLocaleString()}),(0,b.jsx)(k.TableCell,{children:(0,b.jsxs)("div",{className:"text-sm",children:[(0,b.jsx)("p",{className:"font-medium",children:a.clientes?.nombre||"—"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:a.clientes?.telefono||""}),(0,b.jsxs)("p",{className:"text-muted-foreground",children:["DNI: ",a.clientes?.dni||"—"]})]})}),(0,b.jsx)(k.TableCell,{className:"font-semibold",children:(0,l.formatCurrency)(a.total)}),(0,b.jsx)(k.TableCell,{className:"text-right",children:(0,b.jsx)(d.default,{href:`/admin/pedidos/${a.id}`,className:"text-sm font-medium text-primary hover:underline",children:"Ver"})})]},a.id))})]})})]})}a.s(["default",()=>p])}];

//# sourceMappingURL=_63ccdc0c._.js.map