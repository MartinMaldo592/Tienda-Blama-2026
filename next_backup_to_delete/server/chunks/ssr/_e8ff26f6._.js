module.exports=[3130,a=>{"use strict";var b=a.i(87924),c=a.i(97895);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card",className:(0,c.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...d})}function e({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-header",className:(0,c.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...d})}function f({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-title",className:(0,c.cn)("leading-none font-semibold",a),...d})}function g({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-content",className:(0,c.cn)("px-6",a),...d})}function h({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-footer",className:(0,c.cn)("flex items-center px-6 [.border-t]:pt-6",a),...d})}a.s(["Card",()=>d,"CardContent",()=>g,"CardFooter",()=>h,"CardHeader",()=>e,"CardTitle",()=>f])},34157,a=>{"use strict";let b=(0,a.i(70106).default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);a.s(["default",()=>b])},88237,a=>{"use strict";var b=a.i(87924),c=a.i(97895);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,b.jsx)("table",{"data-slot":"table",className:(0,c.cn)("w-full caption-bottom text-sm",a),...d})})}function e({className:a,...d}){return(0,b.jsx)("thead",{"data-slot":"table-header",className:(0,c.cn)("[&_tr]:border-b",a),...d})}function f({className:a,...d}){return(0,b.jsx)("tbody",{"data-slot":"table-body",className:(0,c.cn)("[&_tr:last-child]:border-0",a),...d})}function g({className:a,...d}){return(0,b.jsx)("tr",{"data-slot":"table-row",className:(0,c.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",a),...d})}function h({className:a,...d}){return(0,b.jsx)("th",{"data-slot":"table-head",className:(0,c.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...d})}function i({className:a,...d}){return(0,b.jsx)("td",{"data-slot":"table-cell",className:(0,c.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...d})}a.s(["Table",()=>d,"TableBody",()=>f,"TableCell",()=>i,"TableHead",()=>h,"TableHeader",()=>e,"TableRow",()=>g])},69520,a=>{"use strict";let b=(0,a.i(70106).default)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);a.s(["RefreshCw",()=>b],69520)},87050,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(38246),e=a.i(50944),f=a.i(8999),g=a.i(46639),h=a.i(40695),i=a.i(3130),j=a.i(5522),k=a.i(87682),l=a.i(88237),m=a.i(97895),n=a.i(210),o=a.i(69520);a.i(17209);var p=a.i(44538);let q=["Confirmado","Preparando","Enviado"];function r(){let a=(0,e.useRouter)(),[r,s]=(0,c.useState)(!0),t=(0,f.useRoleGuard)({allowedRoles:["admin"]}),[u,v]=(0,c.useState)("all"),[w,x]=(0,c.useState)(new Date().toISOString().slice(0,10)),[y,z]=(0,c.useState)(new Date().toISOString().slice(0,10)),[A,B]=(0,c.useState)([]),C=(0,c.useCallback)(async a=>{s(!0);try{let b=await (0,p.fetchAdminPedidosEnProceso)(a);B(b)}catch(a){console.error("Error fetching pedidos en proceso:",a),B([])}s(!1)},[]);(0,c.useEffect)(()=>{t.loading||t.accessDenied||C({status:"all",from:w,to:y})},[t.loading,t.accessDenied,C,w,y]);let D=(0,c.useMemo)(()=>{let a=A.length,b=A.reduce((a,b)=>a+(Number(b.total)||0),0),c=new Map;for(let a of q)c.set(a,0);for(let a of A){let b=String(a.status||"");c.has(b)&&c.set(b,(c.get(b)||0)+1)}return{count:a,total:b,ticket:a>0?b/a:0,confirmado:c.get("Confirmado")||0,preparando:c.get("Preparando")||0,enviado:c.get("Enviado")||0}},[A]);return t.loading?(0,b.jsx)("div",{className:"p-10",children:"Cargando..."}):t.accessDenied?(0,b.jsx)(g.AccessDenied,{message:"Solo administradores pueden ver esta sección."}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(h.Button,{variant:"ghost",size:"icon",onClick:()=>a.push("/admin/dashboard"),children:(0,b.jsx)(n.ArrowLeft,{className:"h-5 w-5"})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Pedidos en Proceso"}),(0,b.jsx)("p",{className:"text-gray-500",children:"Confirmado / Preparando / Enviado"})]}),(0,b.jsxs)(h.Button,{variant:"outline",className:"gap-2",onClick:()=>C({status:u,from:w,to:y}),disabled:r,children:[(0,b.jsx)(o.RefreshCw,{className:"h-4 w-4"})," Actualizar"]})]}),(0,b.jsxs)(i.Card,{className:"shadow-sm border-gray-200",children:[(0,b.jsx)(i.CardHeader,{children:(0,b.jsx)(i.CardTitle,{children:"Filtros"})}),(0,b.jsxs)(i.CardContent,{className:"grid grid-cols-1 md:grid-cols-4 gap-3 md:items-end",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Estado"}),(0,b.jsxs)(k.Select,{value:u,onValueChange:a=>v(a),children:[(0,b.jsx)(k.SelectTrigger,{children:(0,b.jsx)(k.SelectValue,{placeholder:"Todos"})}),(0,b.jsxs)(k.SelectContent,{children:[(0,b.jsx)(k.SelectItem,{value:"all",children:"Todos"}),(0,b.jsx)(k.SelectItem,{value:"Confirmado",children:"Confirmado"}),(0,b.jsx)(k.SelectItem,{value:"Preparando",children:"Preparando"}),(0,b.jsx)(k.SelectItem,{value:"Enviado",children:"Enviado"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Desde"}),(0,b.jsx)(j.Input,{type:"date",value:w,onChange:a=>x(a.target.value)})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Hasta"}),(0,b.jsx)(j.Input,{type:"date",value:y,onChange:a=>z(a.target.value)})]}),(0,b.jsx)(h.Button,{onClick:()=>C({status:u,from:w,to:y}),disabled:r,children:"Aplicar"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,b.jsx)(i.Card,{className:"shadow-sm border-gray-200",children:(0,b.jsxs)(i.CardContent,{className:"p-5",children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total"}),(0,b.jsx)("p",{className:"text-2xl font-bold",children:D.count})]})}),(0,b.jsx)(i.Card,{className:"shadow-sm border-gray-200",children:(0,b.jsxs)(i.CardContent,{className:"p-5",children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total (S/)"}),(0,b.jsx)("p",{className:"text-2xl font-bold",children:(0,m.formatCurrency)(D.total)})]})}),(0,b.jsx)(i.Card,{className:"shadow-sm border-gray-200",children:(0,b.jsxs)(i.CardContent,{className:"p-5",children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Ticket promedio"}),(0,b.jsx)("p",{className:"text-2xl font-bold",children:(0,m.formatCurrency)(D.ticket)})]})}),(0,b.jsx)(i.Card,{className:"shadow-sm border-gray-200",children:(0,b.jsxs)(i.CardContent,{className:"p-5",children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Por estado"}),(0,b.jsxs)("p",{className:"text-sm font-semibold text-gray-900",children:["Confirmado: ",D.confirmado]}),(0,b.jsxs)("p",{className:"text-sm font-semibold text-gray-900",children:["Preparando: ",D.preparando]}),(0,b.jsxs)("p",{className:"text-sm font-semibold text-gray-900",children:["Enviado: ",D.enviado]})]})})]}),(0,b.jsx)("div",{className:"bg-white rounded-xl shadow-sm border overflow-hidden",children:(0,b.jsxs)(l.Table,{children:[(0,b.jsx)(l.TableHeader,{className:"bg-gray-50",children:(0,b.jsxs)(l.TableRow,{children:[(0,b.jsx)(l.TableHead,{children:"Pedido"}),(0,b.jsx)(l.TableHead,{children:"Fecha"}),(0,b.jsx)(l.TableHead,{children:"Estado"}),(0,b.jsx)(l.TableHead,{children:"Cliente"}),(0,b.jsx)(l.TableHead,{children:"Total"}),(0,b.jsx)(l.TableHead,{className:"text-right",children:"Detalle"})]})}),(0,b.jsx)(l.TableBody,{children:r?(0,b.jsx)(l.TableRow,{children:(0,b.jsx)(l.TableCell,{colSpan:6,className:"text-center py-10",children:"Cargando..."})}):0===A.length?(0,b.jsx)(l.TableRow,{children:(0,b.jsx)(l.TableCell,{colSpan:6,className:"text-center py-10",children:"No hay pedidos en proceso con estos filtros."})}):A.map(a=>(0,b.jsxs)(l.TableRow,{children:[(0,b.jsxs)(l.TableCell,{className:"font-medium",children:["#",String(a.id).padStart(6,"0")]}),(0,b.jsx)(l.TableCell,{className:"text-sm text-muted-foreground",children:new Date(a.created_at).toLocaleString()}),(0,b.jsx)(l.TableCell,{children:(0,b.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-bold bg-blue-100 text-blue-700",children:a.status})}),(0,b.jsx)(l.TableCell,{children:(0,b.jsxs)("div",{className:"text-sm",children:[(0,b.jsx)("p",{className:"font-medium",children:a.clientes?.nombre||"—"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:a.clientes?.telefono||""}),(0,b.jsxs)("p",{className:"text-muted-foreground",children:["DNI: ",a.clientes?.dni||"—"]})]})}),(0,b.jsx)(l.TableCell,{className:"font-semibold",children:(0,m.formatCurrency)(a.total)}),(0,b.jsx)(l.TableCell,{className:"text-right",children:(0,b.jsx)(d.default,{href:`/admin/pedidos/${a.id}`,className:"text-sm font-medium text-primary hover:underline",children:"Ver"})})]},a.id))})]})})]})}a.s(["default",()=>r])}];

//# sourceMappingURL=_e8ff26f6._.js.map