module.exports=[34157,a=>{"use strict";let b=(0,a.i(70106).default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);a.s(["default",()=>b])},26653,a=>{"use strict";var b=a.i(7291);async function c(){let{data:a,error:c}=await b.supabase.from("categorias").select("*").order("nombre",{ascending:!0});return c?(console.error("Error fetching categories:",c),[]):a||[]}async function d(a){let c=(a.q||"").trim(),d=a.min?Number(a.min):null,e=a.max?Number(a.max):null,f=b.supabase.from("productos").select("*",{count:"exact"});if("all"!==a.cat){let c=Number(a.cat);if(Number.isFinite(c)&&c>0)f=f.eq("categoria_id",c);else{let{data:c,error:d}=await b.supabase.from("categorias").select("id").eq("slug",a.cat).maybeSingle();!d&&c?.id&&(f=f.eq("categoria_id",c.id))}}c&&(f=f.ilike("nombre",`%${c}%`)),null!==d&&Number.isFinite(d)&&(f=f.gte("precio",d)),null!==e&&Number.isFinite(e)&&(f=f.lte("precio",e)),a.stock&&(f=f.gt("stock",0)),"price-asc"===a.sort&&(f=f.order("precio",{ascending:!0})),"price-desc"===a.sort&&(f=f.order("precio",{ascending:!1})),"name-asc"===a.sort&&(f=f.order("nombre",{ascending:!0})),"name-desc"===a.sort&&(f=f.order("nombre",{ascending:!1})),"newest"===a.sort&&(f=f.order("created_at",{ascending:!1}));let g=Math.max(0,(a.page-1)*a.pageSize),h=Math.max(g,g+a.pageSize-1);f=f.range(g,h);let{data:i,error:j,count:k}=await f;return j?(console.error("Error fetching products:",j),{productos:[],totalCount:0}):{productos:i||[],totalCount:Number(k||0)}}async function e(a){let[c,d,e]=await Promise.all([b.supabase.from("productos").select("*, categorias (id, nombre, slug)").eq("id",a).single(),b.supabase.from("producto_variantes").select("*").eq("producto_id",a).eq("activo",!0).order("id",{ascending:!0}),b.supabase.from("producto_especificaciones").select("*").eq("producto_id",a).order("orden",{ascending:!0}).order("id",{ascending:!0})]),{data:f,error:g}=c,h=Array.isArray(d.data)?d.data:[],i=Array.isArray(e.data)?e.data:[];return g&&console.error("Error fetching producto:",g),{producto:g?null:f||null,variantes:h,especificaciones:i}}async function f(a){try{let{data:c,error:d}=await b.supabase.rpc("get_top_products",{limit_count:8,exclude_id:a});if(!d&&Array.isArray(c))return c;let{data:e,error:f}=await b.supabase.from("productos").select("*").neq("id",a).gt("stock",0).order("created_at",{ascending:!1}).limit(8);if(!f&&Array.isArray(e))return e;return[]}catch(a){return[]}}a.s(["getProductDetail",()=>e,"getRecommendedProducts",()=>f,"listCategories",()=>c,"listProducts",()=>d])}];

//# sourceMappingURL=_4c9eda42._.js.map