{"version":3,"sources":["../../../../app/productos/%5Bid%5D/producto-detalle-client.tsx/__nextjs-internal-proxy.mjs","../../../../app/productos/%5Bid%5D/page.tsx"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/productos/[id]/producto-detalle-client.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/productos/[id]/producto-detalle-client.tsx\",\n    \"default\",\n);\n","import type { Metadata } from \"next\"\r\nimport ProductoDetalleClient from \"./producto-detalle-client\"\r\nimport { fetchProductForMeta } from \"@/features/products/services/products.server\"\r\n\r\nfunction parseProductId(raw: string) {\r\n    const direct = Number(raw)\r\n    if (Number.isFinite(direct) && direct > 0) return direct\r\n    const match = String(raw).match(/(\\d+)(?:\\D*)$/)\r\n    if (match && match[1]) return Number(match[1])\r\n    return 0\r\n}\r\n\r\nfunction buildDescription(p: any) {\r\n    const raw = String(p?.descripcion || \"\").trim()\r\n    const safe = raw.replace(/\\s+/g, \" \").slice(0, 160)\r\n    if (safe) return safe\r\n    return \"Compra online con entrega r√°pida y compra segura.\"\r\n}\r\n\r\nexport async function generateMetadata({\r\n    params,\r\n}: {\r\n    params: Promise<{ id: string }>\r\n}): Promise<Metadata> {\r\n    const resolvedParams = await params\r\n    const id = parseProductId(resolvedParams.id)\r\n    const baseUrl = process.env.NEXT_PUBLIC_SITE_URL || \"https://www.blama.shop\"\r\n\r\n    if (!id) {\r\n        return {\r\n            title: \"Producto\",\r\n            description: \"Detalle de producto\",\r\n            robots: { index: false }\r\n        }\r\n    }\r\n\r\n    const product = await fetchProductForMeta(id)\r\n    if (!product) {\r\n        return {\r\n            title: \"Producto\",\r\n            description: \"Detalle de producto\",\r\n            robots: { index: false }\r\n        }\r\n    }\r\n\r\n    const price = Number((product as any).precio) || 0\r\n    const formattedPrice = new Intl.NumberFormat('es-PE', { style: 'currency', currency: 'PEN' }).format(price)\r\n\r\n    const title = `${String((product as any).nombre || \"Producto\")} - ${formattedPrice}`\r\n    const descText = buildDescription(product)\r\n    const description = `Precio: ${formattedPrice}. ${descText}`\r\n\r\n    const imgs = Array.isArray((product as any).imagenes) ? ((product as any).imagenes as string[]).filter(Boolean) : []\r\n    const primaryImage = imgs[0] || String((product as any).imagen_url || \"\")\r\n    const url = `${baseUrl}/productos/${id}`\r\n\r\n    return {\r\n        title,\r\n        description,\r\n        alternates: {\r\n            canonical: url,\r\n        },\r\n        openGraph: {\r\n            title,\r\n            description,\r\n            url,\r\n            siteName: 'Blama.shop',\r\n            locale: 'es_PE',\r\n            type: 'website',\r\n            images: primaryImage ? [{ url: primaryImage, width: 800, height: 800, alt: title }] : [],\r\n        },\r\n        twitter: {\r\n            card: \"summary_large_image\",\r\n            title,\r\n            description,\r\n            images: primaryImage ? [primaryImage] : [],\r\n        },\r\n    }\r\n}\r\n\r\nexport default function ProductoDetallePage() {\r\n    return <ProductoDetalleClient />\r\n}\r\n"],"names":[],"mappings":"uZAEe,CAAA,EAAA,AADf,EAAA,CAAA,CAAA,OACe,uBAAA,AAAuB,EAClC,WAAa,MAAM,AAAI,MAAM,gTAAkT,EAC/U,+EACA,gEAHW,CAAA,EADf,AACe,EADf,CAAA,CAAA,OACe,uBAAA,AAAuB,EAClC,WAAa,MAAM,AAAI,MAAM,4RAA8R,EAC3T,2DACA,6GCJJ,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAiBO,eAAe,EAAiB,CACnC,QAAM,CAGT,EAEG,MAAM,EArBV,AAqBe,SArBN,AAAe,CAAW,EAC/B,IAAM,EAAS,OAAO,GACtB,GAAI,OAAO,QAAQ,CAAC,IAAW,EAAS,EAAG,OAAO,EAClD,IAAM,EAAQ,OAAO,GAAK,KAAK,CAAC,wBAChC,AAAI,GAAS,CAAK,CAAC,EAAE,CAAS,CAAP,MAAc,CAAK,CAAC,EAAE,EACtC,CACX,EAe8B,CADH,MAAM,CAAA,EACY,EAAE,EACrC,EAAU,QAAQ,GAAG,CAAC,oBAAoB,EAAI,yBAEpD,GAAI,CAAC,EACD,EADK,IACE,CACH,MAAO,WACP,YAAa,sBACb,OAAQ,CAAE,OAAO,CAAM,CAC3B,EAGJ,IAAM,EAAU,MAAM,CAAA,EAAA,EAAA,mBAAA,AAAmB,EAAC,GAC1C,GAAI,CAAC,EACD,MAAO,CADG,AAEN,MAAO,WACP,YAAa,sBACb,OAAQ,CAAE,OAAO,CAAM,CAC3B,EAGJ,IAAM,EAAQ,OAAQ,EAAgB,MAAM,GAAK,EAC3C,EAAiB,IAAI,KAAK,YAAY,CAAC,QAAS,CAAE,MAAO,WAAY,SAAU,KAAM,GAAG,MAAM,CAAC,GAE/F,EAAQ,CAAA,EAAG,OAAQ,EAAgB,MAAM,EAAI,YAAY,GAAG,EAAE,EAAA,CAAgB,CAC9E,EAlCN,CADM,EAAO,AADD,CAER,KAkCa,CAlCP,AAFS,AAoCe,GApCZ,IAEL,SAFoB,IAAI,IAAI,GAC5B,OAAO,CAAC,OAAQ,KAAK,KAAK,CAAC,EAAG,OAExC,oDAkCD,EAAc,CAAC,QAAQ,EAAE,EAAe,EAAE,EAAE,EAAA,CAAU,CAGtD,EAAe,CADR,MAAM,OAAO,CAAE,EAAgB,QAAQ,EAAM,EAAgB,QAAQ,CAAc,MAAM,CAAC,SAAW,EAAA,AAAE,CAC3F,CAAC,EAAE,EAAI,OAAQ,EAAgB,UAAU,EAAI,IAChE,EAAM,CAAA,EAAG,EAAQ,WAAW,EAAE,EAAA,CAAI,CAExC,MAAO,OACH,cACA,EACA,WAAY,CACR,UAAW,CACf,EACA,UAAW,OACP,cACA,MACA,EACA,SAAU,aACV,OAAQ,QACR,KAAM,UACN,OAAQ,EAAe,CAAC,CAAE,IAAK,EAAc,MAAO,IAAK,OAAQ,IAAK,IAAK,CAAM,EAAE,CAAG,EAAE,AAC5F,EACA,QAAS,CACL,KAAM,4BACN,cACA,EACA,OAAQ,EAAe,CAAC,EAAa,CAAG,EAAE,AAC9C,CACJ,CACJ,CAEe,SAAS,IACpB,MAAO,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAqB,CAAA,CAAA,EACjC","ignoreList":[0]}