module.exports=[3130,a=>{"use strict";var b=a.i(87924),c=a.i(97895);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card",className:(0,c.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...d})}function e({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-header",className:(0,c.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...d})}function f({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-title",className:(0,c.cn)("leading-none font-semibold",a),...d})}function g({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-content",className:(0,c.cn)("px-6",a),...d})}function h({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-footer",className:(0,c.cn)("flex items-center px-6 [.border-t]:pt-6",a),...d})}a.s(["Card",()=>d,"CardContent",()=>g,"CardFooter",()=>h,"CardHeader",()=>e,"CardTitle",()=>f])},46893,a=>{"use strict";var b=a.i(87924),c=a.i(97895);function d({className:a,...d}){return(0,b.jsx)("textarea",{"data-slot":"textarea",className:(0,c.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),...d})}a.s(["Textarea",()=>d])},34157,a=>{"use strict";let b=(0,a.i(70106).default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);a.s(["default",()=>b])},69520,a=>{"use strict";let b=(0,a.i(70106).default)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);a.s(["RefreshCw",()=>b],69520)},63519,a=>{"use strict";let b=(0,a.i(70106).default)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]);a.s(["Phone",()=>b],63519)},21374,a=>{"use strict";let b=(0,a.i(70106).default)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);a.s(["Star",()=>b],21374)},54161,a=>{"use strict";var b=a.i(87924),c=a.i(11011),d=a.i(187),e=a.i(97895);let f=(0,d.cva)("inline-flex items-center justify-center rounded-full border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function g({className:a,variant:d,asChild:g=!1,...h}){let i=g?c.Slot:"span";return(0,b.jsx)(i,{"data-slot":"badge",className:(0,e.cn)(f({variant:d}),a),...h})}a.s(["Badge",()=>g])},46842,a=>{"use strict";let b=(0,a.i(70106).default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);a.s(["User",()=>b],46842)},11156,a=>{"use strict";let b=(0,a.i(70106).default)("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);a.s(["CreditCard",()=>b],11156)},26653,a=>{"use strict";var b=a.i(7291);async function c(){let{data:a,error:c}=await b.supabase.from("categorias").select("*").order("nombre",{ascending:!0});return c?(console.error("Error fetching categories:",c),[]):a||[]}async function d(a){let c=(a.q||"").trim(),d=a.min?Number(a.min):null,e=a.max?Number(a.max):null,f=b.supabase.from("productos").select("*",{count:"exact"});if("all"!==a.cat){let c=Number(a.cat);if(Number.isFinite(c)&&c>0)f=f.eq("categoria_id",c);else{let{data:c,error:d}=await b.supabase.from("categorias").select("id").eq("slug",a.cat).maybeSingle();!d&&c?.id&&(f=f.eq("categoria_id",c.id))}}c&&(f=f.ilike("nombre",`%${c}%`)),null!==d&&Number.isFinite(d)&&(f=f.gte("precio",d)),null!==e&&Number.isFinite(e)&&(f=f.lte("precio",e)),a.stock&&(f=f.gt("stock",0)),"price-asc"===a.sort&&(f=f.order("precio",{ascending:!0})),"price-desc"===a.sort&&(f=f.order("precio",{ascending:!1})),"name-asc"===a.sort&&(f=f.order("nombre",{ascending:!0})),"name-desc"===a.sort&&(f=f.order("nombre",{ascending:!1})),"newest"===a.sort&&(f=f.order("created_at",{ascending:!1}));let g=Math.max(0,(a.page-1)*a.pageSize),h=Math.max(g,g+a.pageSize-1);f=f.range(g,h);let{data:i,error:j,count:k}=await f;return j?(console.error("Error fetching products:",j),{productos:[],totalCount:0}):{productos:i||[],totalCount:Number(k||0)}}async function e(a){let[c,d,e]=await Promise.all([b.supabase.from("productos").select("*, categorias (id, nombre, slug)").eq("id",a).single(),b.supabase.from("producto_variantes").select("*").eq("producto_id",a).eq("activo",!0).order("id",{ascending:!0}),b.supabase.from("producto_especificaciones").select("*").eq("producto_id",a).order("orden",{ascending:!0}).order("id",{ascending:!0})]),{data:f,error:g}=c,h=Array.isArray(d.data)?d.data:[],i=Array.isArray(e.data)?e.data:[];return g&&console.error("Error fetching producto:",g),{producto:g?null:f||null,variantes:h,especificaciones:i}}async function f(a){try{let{data:c,error:d}=await b.supabase.rpc("get_top_products",{limit_count:8,exclude_id:a});if(!d&&Array.isArray(c))return c;let{data:e,error:f}=await b.supabase.from("productos").select("*").neq("id",a).gt("stock",0).order("created_at",{ascending:!1}).limit(8);if(!f&&Array.isArray(e))return e;return[]}catch(a){return[]}}a.s(["getProductDetail",()=>e,"getRecommendedProducts",()=>f,"listCategories",()=>c,"listProducts",()=>d])},50725,a=>{"use strict";var b=a.i(87924),c=a.i(38246),d=a.i(40695),e=a.i(3130),f=a.i(15618),g=a.i(38632),h=a.i(97895);a.i(28517);var i=a.i(14119),j=a.i(72131),k=a.i(88652),l=a.i(23833);function m({product:a,imagePriority:m=!1}){let n=(0,i.useCartStore)(a=>a.addItem),o=(0,l.useCartAnimationStore)(a=>a.startAnimation),p=(0,j.useRef)(null),[q,r]=(0,j.useState)(!1),s=Number(a?.precio??0),t=Number(a?.precio_antes??0),u=Number.isFinite(t)&&t>0&&Number.isFinite(s)&&s>0&&t>s,v=u?Math.round((1-s/t)*100):0,w=(Array.isArray(a.imagenes)?a.imagenes:[]).filter(Boolean).filter(a=>{let b=String(a||"").toLowerCase();return!(b.endsWith(".mp4")||b.endsWith(".webm")||b.endsWith(".mov")||b.endsWith(".m4v"))}).slice(0,10),x=w.length>0?w:a.imagen_url?[a.imagen_url]:[],y=(0,l.useCartAnimationStore)(a=>a.setCartOpen),z=`/productos/${(0,h.slugify)(a.nombre)}-${a.id}`;return(0,b.jsxs)(e.Card,{className:"group overflow-hidden border-none shadow-sm hover:shadow-md transition-all duration-300 bg-card flex flex-col rounded-xl",children:[(0,b.jsx)(c.default,{href:z,className:"block",children:(0,b.jsxs)("div",{className:"aspect-square bg-popover relative overflow-hidden",ref:p,children:[x.length>0?(0,b.jsx)(k.ProductImageCarousel,{images:x,alt:a.nombre,className:"group-hover:scale-105 transition-transform duration-300",autoPlay:!0,intervalMs:2500,priority:m,sizes:"(max-width: 640px) 50vw, (max-width: 1024px) 33vw, 20vw",quality:70}):(0,b.jsx)("div",{className:"absolute inset-0 flex items-center justify-center text-muted-foreground group-hover:scale-110 transition-transform duration-300",children:(0,b.jsx)(g.Image,{className:"h-10 w-10 opacity-50"})}),(0,b.jsx)("div",{className:"absolute inset-0 bg-foreground/5 opacity-0 group-hover:opacity-100 transition-opacity"}),u&&(0,b.jsx)("div",{className:"absolute left-2 top-2 flex items-center gap-2",children:(0,b.jsxs)("span",{className:"inline-flex items-center rounded-full bg-gradient-to-r from-rose-600 to-orange-500 px-2.5 py-1 text-xs font-extrabold text-white shadow-md ring-1 ring-white/30 backdrop-blur",children:["-",v,"%"]})})]})}),(0,b.jsxs)(e.CardContent,{className:"p-3 flex-1 flex flex-col justify-between",children:[(0,b.jsx)("div",{children:(0,b.jsx)(c.default,{href:z,className:"hover:underline",children:(0,b.jsx)("h4",{className:"font-medium text-sm line-clamp-2 leading-tight mb-1 text-foreground",children:a.nombre})})}),(0,b.jsx)("div",{className:"mt-1","data-nosnippet":!0,children:(0,b.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,b.jsx)("p",{className:"text-lg font-extrabold text-primary tracking-tight",children:(0,h.formatCurrency)(s)}),u&&(0,b.jsx)("div",{className:"flex items-baseline gap-2",children:(0,b.jsx)("p",{className:"text-sm text-muted-foreground line-through",children:(0,h.formatCurrency)(t)})})]})})]}),(0,b.jsx)(e.CardFooter,{className:"p-3 pt-0",children:(0,b.jsx)(d.Button,{onClick:b=>{if(b.preventDefault(),n(a),y(!0),p.current&&x.length>0){let a=p.current.getBoundingClientRect();o(x[0],a)}r(!0),setTimeout(()=>r(!1),1e3)},className:`w-full h-9 font-semibold rounded-lg transition-all shadow-sm flex items-center justify-center gap-2 ${q?"bg-green-600 hover:bg-green-700":"bg-primary text-primary-foreground hover:bg-primary/90"}`,children:q?(0,b.jsx)("span",{children:"Â¡Agregado!"}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(f.Plus,{className:"h-4 w-4"}),(0,b.jsx)("span",{children:"Agregar"})]})})})]})}a.s(["ProductCard",()=>m])},4416,10227,a=>{"use strict";var b=a.i(70106);let c=(0,b.default)("shield-check",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);a.s(["ShieldCheck",()=>c],4416);let d=(0,b.default)("truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);a.s(["Truck",()=>d],10227)}];

//# sourceMappingURL=_595a07ad._.js.map