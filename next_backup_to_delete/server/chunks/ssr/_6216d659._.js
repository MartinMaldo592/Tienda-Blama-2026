module.exports=[3130,a=>{"use strict";var b=a.i(87924),c=a.i(97895);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card",className:(0,c.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...d})}function e({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-header",className:(0,c.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...d})}function f({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-title",className:(0,c.cn)("leading-none font-semibold",a),...d})}function g({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-content",className:(0,c.cn)("px-6",a),...d})}function h({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-footer",className:(0,c.cn)("flex items-center px-6 [.border-t]:pt-6",a),...d})}a.s(["Card",()=>d,"CardContent",()=>g,"CardFooter",()=>h,"CardHeader",()=>e,"CardTitle",()=>f])},26086,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(7291),e=a.i(8999),f=a.i(46639),g=a.i(3130),h=a.i(70106);let i=(0,h.default)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);var j=a.i(40784),k=a.i(60246),l=a.i(83497);let m=(0,h.default)("clipboard-list",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);var n=a.i(97895),o=a.i(38246);a.i(17209);var p=a.i(44538);function q(){let[a,h]=(0,c.useState)({totalVentasReales:0,ventasHoy:0,pedidosPendientes:0,pedidosEnProceso:0,pedidosEntregados:0,pedidosAsignados:0,totalClientes:0,productosLowStock:0}),[q,s]=(0,c.useState)(!0),t=(0,e.useRoleGuard)({allowedRoles:["admin","worker"]}),[u,v]=(0,c.useState)("worker"),w=(0,c.useCallback)(async(a,b)=>{s(!0),h(await (0,p.fetchAdminDashboardStats)({role:a,currentUserId:b})),s(!1)},[]);return((0,c.useEffect)(()=>{if(t.loading||t.accessDenied)return;let a=t.role||"worker";v(a),(async()=>{let{data:{session:b}}=await d.supabase.auth.getSession(),c=b?.user?.id||"";await w(a,c)})()},[t.loading,t.accessDenied,t.role,w]),t.loading)?(0,b.jsx)("div",{className:"p-10",children:"Cargando..."}):t.accessDenied?(0,b.jsx)(f.AccessDenied,{}):(0,b.jsxs)("div",{className:"space-y-8",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"admin"===u?"Dashboard General":"Mi Panel"}),(0,b.jsx)("p",{className:"text-gray-500 mt-1",children:"admin"===u?"Resumen general de tu tienda":"Resumen de tus pedidos asignados"})]}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:"admin"===u?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(r,{title:"Ventas (Entregado)",value:(0,n.formatCurrency)(a.totalVentasReales),change:`Hoy: ${(0,n.formatCurrency)(a.ventasHoy)}`,icon:(0,b.jsx)(i,{className:"h-6 w-6 text-green-600"}),wrapperClass:"bg-green-50 border-green-100",loading:q,href:"/admin/dashboard/ventas"}),(0,b.jsx)(r,{title:"Pedidos Pendientes",value:a.pedidosPendientes.toString(),change:"Por atender",icon:(0,b.jsx)(j.ShoppingBag,{className:"h-6 w-6 text-orange-600"}),wrapperClass:"bg-orange-50 border-orange-100",loading:q,href:"/admin/dashboard/pedidos-pendientes"}),(0,b.jsx)(r,{title:"En Proceso",value:a.pedidosEnProceso.toString(),change:"Confirmado / Preparando / Enviado",icon:(0,b.jsx)(m,{className:"h-6 w-6 text-blue-600"}),wrapperClass:"bg-blue-50 border-blue-100",loading:q,href:"/admin/dashboard/pedidos-en-proceso"}),(0,b.jsx)(r,{title:"Stock Bajo",value:a.productosLowStock.toString(),change:"Productos < 5 un.",icon:(0,b.jsx)(l.Package,{className:"h-6 w-6 text-red-600"}),wrapperClass:"bg-red-50 border-red-100",loading:q,href:"/admin/dashboard/stock-bajo"})]}):(0,b.jsx)(b.Fragment,{children:(0,b.jsx)(r,{title:"Pedidos Asignados",value:a.pedidosAsignados.toString(),change:"Pendientes de gestionar",icon:(0,b.jsx)(m,{className:"h-6 w-6 text-blue-600"}),wrapperClass:"bg-blue-50 border-blue-100",loading:q,href:"/admin/pedidos"})})}),"admin"===u&&(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsx)(r,{title:"Clientes Totales",value:a.totalClientes.toString(),change:"Base de datos",icon:(0,b.jsx)(k.Users,{className:"h-6 w-6 text-blue-600"}),wrapperClass:"bg-blue-50 border-blue-100",loading:q,href:"/admin/clientes"}),(0,b.jsx)(r,{title:"Pedidos Entregados",value:a.pedidosEntregados.toString(),change:"Ventas completadas",icon:(0,b.jsx)(j.ShoppingBag,{className:"h-6 w-6 text-green-600"}),wrapperClass:"bg-green-50 border-green-100",loading:q,href:"/admin/dashboard/ventas"})]}),(0,b.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:(0,b.jsxs)(g.Card,{className:"shadow-sm border-gray-200",children:[(0,b.jsx)(g.CardHeader,{children:(0,b.jsx)(g.CardTitle,{children:"Accesos RÃ¡pidos"})}),(0,b.jsxs)(g.CardContent,{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)(o.default,{href:"/admin/pedidos",className:"p-4 bg-gray-50 rounded-xl hover:bg-gray-100 transition-colors border flex flex-col items-center justify-center text-center gap-2",children:[(0,b.jsx)(j.ShoppingBag,{className:"h-8 w-8 text-gray-600"}),(0,b.jsx)("span",{className:"font-medium",children:"admin"===u?"Gestionar Pedidos":"Mis Pedidos"})]}),"admin"===u&&(0,b.jsxs)(o.default,{href:"/admin/productos",className:"p-4 bg-gray-50 rounded-xl hover:bg-gray-100 transition-colors border flex flex-col items-center justify-center text-center gap-2",children:[(0,b.jsx)(l.Package,{className:"h-8 w-8 text-gray-600"}),(0,b.jsx)("span",{className:"font-medium",children:"Inventario"})]})]})]})})]})}function r({title:a,value:c,change:d,icon:e,wrapperClass:f,loading:h,href:i}){let j=(0,b.jsx)(g.Card,{className:`border shadow-sm transition-all hover:shadow-md ${f}`,children:(0,b.jsxs)(g.CardContent,{className:"p-6",children:[(0,b.jsx)("div",{className:"flex justify-between items-start mb-4",children:(0,b.jsx)("div",{className:"p-2 bg-white rounded-lg shadow-sm border",children:e})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-500 mb-1",children:a}),h?(0,b.jsx)("div",{className:"h-8 w-24 bg-gray-200 animate-pulse rounded"}):(0,b.jsx)("h3",{className:"text-2xl font-bold text-gray-900",children:c}),(0,b.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:d})]})]})});return"string"==typeof i?(0,b.jsx)(o.default,{href:i,className:"block",children:j}):j}a.s(["default",()=>q],26086)}];

//# sourceMappingURL=_6216d659._.js.map