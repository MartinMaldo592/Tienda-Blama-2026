module.exports=[3130,a=>{"use strict";var b=a.i(87924),c=a.i(97895);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card",className:(0,c.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...d})}function e({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-header",className:(0,c.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...d})}function f({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-title",className:(0,c.cn)("leading-none font-semibold",a),...d})}function g({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-content",className:(0,c.cn)("px-6",a),...d})}function h({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-footer",className:(0,c.cn)("flex items-center px-6 [.border-t]:pt-6",a),...d})}a.s(["Card",()=>d,"CardContent",()=>g,"CardFooter",()=>h,"CardHeader",()=>e,"CardTitle",()=>f])},88237,a=>{"use strict";var b=a.i(87924),c=a.i(97895);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,b.jsx)("table",{"data-slot":"table",className:(0,c.cn)("w-full caption-bottom text-sm",a),...d})})}function e({className:a,...d}){return(0,b.jsx)("thead",{"data-slot":"table-header",className:(0,c.cn)("[&_tr]:border-b",a),...d})}function f({className:a,...d}){return(0,b.jsx)("tbody",{"data-slot":"table-body",className:(0,c.cn)("[&_tr:last-child]:border-0",a),...d})}function g({className:a,...d}){return(0,b.jsx)("tr",{"data-slot":"table-row",className:(0,c.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",a),...d})}function h({className:a,...d}){return(0,b.jsx)("th",{"data-slot":"table-head",className:(0,c.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...d})}function i({className:a,...d}){return(0,b.jsx)("td",{"data-slot":"table-cell",className:(0,c.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...d})}a.s(["Table",()=>d,"TableBody",()=>f,"TableCell",()=>i,"TableHead",()=>h,"TableHeader",()=>e,"TableRow",()=>g])},69520,a=>{"use strict";let b=(0,a.i(70106).default)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);a.s(["RefreshCw",()=>b],69520)},16934,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(38246),e=a.i(50944),f=a.i(8999),g=a.i(46639),h=a.i(40695),i=a.i(3130),j=a.i(88237),k=a.i(210),l=a.i(69520),m=a.i(97895);a.i(17209);var n=a.i(44538);function o(){let a=(0,e.useRouter)(),[o,p]=(0,c.useState)(!0),[q,r]=(0,c.useState)(5),[s,t]=(0,c.useState)([]),u=(0,f.useRoleGuard)({allowedRoles:["admin"]}),v=(0,c.useCallback)(async a=>{p(!0),r(a);try{let b=await (0,n.fetchAdminStockBajo)({threshold:a});t(b)}catch(a){console.error("Error fetching stock bajo:",a),t([])}p(!1)},[]);(0,c.useEffect)(()=>{u.loading||u.accessDenied||v(5)},[u.loading,u.accessDenied,v]);let w=(0,c.useMemo)(()=>{let a=s.length;return{count:a,sinStock:s.filter(a=>0>=(Number(a.stock)||0)).length,valor:s.reduce((a,b)=>a+(Number(b.precio)||0)*(Number(b.stock)||0),0)}},[s]);return u.loading?(0,b.jsx)("div",{className:"p-10",children:"Cargando..."}):u.accessDenied?(0,b.jsx)(g.AccessDenied,{message:"Solo administradores pueden ver esta secciÃ³n."}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(h.Button,{variant:"ghost",size:"icon",onClick:()=>a.push("/admin/dashboard"),children:(0,b.jsx)(k.ArrowLeft,{className:"h-5 w-5"})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Stock Bajo"}),(0,b.jsxs)("p",{className:"text-gray-500",children:["Productos con stock menor a ",q,"."]})]}),(0,b.jsxs)(h.Button,{variant:"outline",className:"gap-2",onClick:()=>v(q),disabled:o,children:[(0,b.jsx)(l.RefreshCw,{className:"h-4 w-4"})," Actualizar"]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,b.jsx)(i.Card,{className:"shadow-sm border-gray-200",children:(0,b.jsxs)(i.CardContent,{className:"p-5",children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Productos en riesgo"}),(0,b.jsx)("p",{className:"text-2xl font-bold",children:w.count})]})}),(0,b.jsx)(i.Card,{className:"shadow-sm border-gray-200",children:(0,b.jsxs)(i.CardContent,{className:"p-5",children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Sin stock"}),(0,b.jsx)("p",{className:"text-2xl font-bold",children:w.sinStock})]})}),(0,b.jsx)(i.Card,{className:"shadow-sm border-gray-200",children:(0,b.jsxs)(i.CardContent,{className:"p-5",children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Valor aprox. del stock en riesgo"}),(0,b.jsx)("p",{className:"text-2xl font-bold",children:(0,m.formatCurrency)(w.valor)})]})})]}),(0,b.jsx)("div",{className:"bg-white rounded-xl shadow-sm border overflow-hidden",children:(0,b.jsxs)(j.Table,{children:[(0,b.jsx)(j.TableHeader,{className:"bg-gray-50",children:(0,b.jsxs)(j.TableRow,{children:[(0,b.jsx)(j.TableHead,{children:"Producto"}),(0,b.jsx)(j.TableHead,{children:"Precio"}),(0,b.jsx)(j.TableHead,{children:"Stock"}),(0,b.jsx)(j.TableHead,{className:"text-right",children:"Ir a Inventario"})]})}),(0,b.jsx)(j.TableBody,{children:o?(0,b.jsx)(j.TableRow,{children:(0,b.jsx)(j.TableCell,{colSpan:4,className:"text-center py-10",children:"Cargando..."})}):0===s.length?(0,b.jsx)(j.TableRow,{children:(0,b.jsx)(j.TableCell,{colSpan:4,className:"text-center py-10",children:"No hay productos con stock bajo."})}):s.map(a=>(0,b.jsxs)(j.TableRow,{children:[(0,b.jsx)(j.TableCell,{children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"h-10 w-10 bg-gray-100 rounded-md overflow-hidden flex items-center justify-center",children:a.imagen_url?(0,b.jsx)("img",{src:a.imagen_url,alt:a.nombre,className:"h-full w-full object-cover"}):(0,b.jsx)("div",{className:"h-full w-full"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:a.nombre}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:["#",a.id]})]})]})}),(0,b.jsx)(j.TableCell,{className:"font-semibold",children:(0,m.formatCurrency)(a.precio)}),(0,b.jsx)(j.TableCell,{children:(0,b.jsxs)("span",{className:`px-2 py-1 rounded-full text-xs font-bold ${a.stock>0?"bg-orange-100 text-orange-700":"bg-red-100 text-red-700"}`,children:[a.stock," un."]})}),(0,b.jsx)(j.TableCell,{className:"text-right",children:(0,b.jsx)(d.default,{href:"/admin/productos",className:"text-sm font-medium text-primary hover:underline",children:"Ver inventario"})})]},a.id))})]})})]})}a.s(["default",()=>o])}];

//# sourceMappingURL=_2eb8b3da._.js.map