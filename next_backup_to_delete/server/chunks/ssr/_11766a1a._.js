module.exports=[3130,a=>{"use strict";var b=a.i(87924),c=a.i(97895);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card",className:(0,c.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...d})}function e({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-header",className:(0,c.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...d})}function f({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-title",className:(0,c.cn)("leading-none font-semibold",a),...d})}function g({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-content",className:(0,c.cn)("px-6",a),...d})}function h({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-footer",className:(0,c.cn)("flex items-center px-6 [.border-t]:pt-6",a),...d})}a.s(["Card",()=>d,"CardContent",()=>g,"CardFooter",()=>h,"CardHeader",()=>e,"CardTitle",()=>f])},34157,a=>{"use strict";let b=(0,a.i(70106).default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);a.s(["default",()=>b])},46893,a=>{"use strict";var b=a.i(87924),c=a.i(97895);function d({className:a,...d}){return(0,b.jsx)("textarea",{"data-slot":"textarea",className:(0,c.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),...d})}a.s(["Textarea",()=>d])},67414,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(8999),e=a.i(46639),f=a.i(40695),g=a.i(3130),h=a.i(5522),i=a.i(17171),j=a.i(46893),k=a.i(87682),l=a.i(6491);a.i(17209);var m=a.i(13001);function n(a){return a.split("\n").map(a=>a.trim()).filter(Boolean).slice(0,10)}function o(){let a=(0,d.useRoleGuard)({allowedRoles:["admin"]}),[o,p]=(0,c.useState)(!0),[q,r]=(0,c.useState)(!1),[s,t]=(0,c.useState)(!0),[u,v]=(0,c.useState)("3500"),[w,x]=(0,c.useState)(""),y=(0,c.useMemo)(()=>n(w),[w]),z=(0,c.useCallback)(async()=>{let a=await (0,m.fetchAnnouncementBarConfigViaApi)();t(!!a.enabled),v(String(a.interval_ms||3500)),x((Array.isArray(a.messages)?a.messages:[]).join("\n"))},[]);(0,c.useEffect)(()=>{a.loading||a.accessDenied||(async()=>{try{p(!0),await z()}catch(a){alert(a?.message||"Error")}finally{p(!1)}})()},[a.loading,a.accessDenied,z]);let A=(0,c.useMemo)(()=>{let a=Number(u);return!!Number.isFinite(a)&&!(a<500)&&!(a>3e4)},[u]),B=async()=>{try{r(!0);let a={enabled:s,interval_ms:Number(u),messages:n(w)};await (0,m.saveAnnouncementBarConfigViaApi)(a),alert("Guardado")}catch(a){alert(a?.message||"Error")}finally{r(!1)}};return a.loading?(0,b.jsx)("div",{className:"p-6 text-muted-foreground",children:"Cargando..."}):a.accessDenied?(0,b.jsx)(e.AccessDenied,{}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Announcement Bar"}),(0,b.jsx)("p",{className:"text-muted-foreground mt-2",children:"Configura los mensajes que aparecen arriba de la tienda."})]}),(0,b.jsxs)(g.Card,{children:[(0,b.jsx)(g.CardHeader,{children:(0,b.jsx)(g.CardTitle,{children:"Configuración"})}),(0,b.jsxs)(g.CardContent,{className:"space-y-5",children:[(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{children:"Estado"}),(0,b.jsxs)(k.Select,{value:s?"true":"false",onValueChange:a=>t("true"===a),children:[(0,b.jsx)(k.SelectTrigger,{children:(0,b.jsx)(k.SelectValue,{placeholder:"Selecciona"})}),(0,b.jsxs)(k.SelectContent,{children:[(0,b.jsx)(k.SelectItem,{value:"true",children:"Activado"}),(0,b.jsx)(k.SelectItem,{value:"false",children:"Desactivado"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{children:"Intervalo (ms)"}),(0,b.jsx)(h.Input,{value:u,onChange:a=>v(a.target.value),placeholder:"3500"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Mín 500ms, máx 30000ms."})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{children:"Mensajes (1 por línea)"}),(0,b.jsx)(j.Textarea,{value:w,onChange:a=>x(a.target.value),placeholder:"Escribe un mensaje por línea",className:"min-h-[160px]"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Máximo 10 mensajes. Si dejas vacío, se usarán los mensajes por defecto."})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(f.Button,{onClick:B,disabled:!A||q||o,children:q?"Guardando...":"Guardar"}),(0,b.jsx)(f.Button,{variant:"outline",onClick:()=>{x("")},disabled:q,children:"Usar mensajes por defecto"})]})]})]}),(0,b.jsxs)(g.Card,{children:[(0,b.jsx)(g.CardHeader,{children:(0,b.jsx)(g.CardTitle,{children:"Vista previa"})}),(0,b.jsx)(g.CardContent,{className:"space-y-3",children:(0,b.jsx)("div",{className:"rounded-lg overflow-hidden border",children:s?(0,b.jsx)(l.AnnouncementBar,{messages:y,intervalMs:Number(u)||3500}):(0,b.jsx)("div",{className:"p-4 text-sm text-muted-foreground",children:"Desactivado"})})})]}),o&&(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"Cargando configuración..."})]})}a.s(["default",()=>o])}];

//# sourceMappingURL=_11766a1a._.js.map