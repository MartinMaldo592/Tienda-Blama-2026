{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Martin/Desktop/PROYECTOS/Tienda-Blama-2026/components/ui/select.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\r\nimport { CheckIcon, ChevronDownIcon, ChevronUpIcon } from \"lucide-react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nfunction Select({\r\n  ...props\r\n}: React.ComponentProps<typeof SelectPrimitive.Root>) {\r\n  return <SelectPrimitive.Root data-slot=\"select\" {...props} />\r\n}\r\n\r\nfunction SelectGroup({\r\n  ...props\r\n}: React.ComponentProps<typeof SelectPrimitive.Group>) {\r\n  return <SelectPrimitive.Group data-slot=\"select-group\" {...props} />\r\n}\r\n\r\nfunction SelectValue({\r\n  ...props\r\n}: React.ComponentProps<typeof SelectPrimitive.Value>) {\r\n  return <SelectPrimitive.Value data-slot=\"select-value\" {...props} />\r\n}\r\n\r\nfunction SelectTrigger({\r\n  className,\r\n  size = \"default\",\r\n  children,\r\n  ...props\r\n}: React.ComponentProps<typeof SelectPrimitive.Trigger> & {\r\n  size?: \"sm\" | \"default\"\r\n}) {\r\n  return (\r\n    <SelectPrimitive.Trigger\r\n      data-slot=\"select-trigger\"\r\n      data-size={size}\r\n      className={cn(\r\n        \"border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\r\n        className\r\n      )}\r\n      {...props}\r\n    >\r\n      {children}\r\n      <SelectPrimitive.Icon asChild>\r\n        <ChevronDownIcon className=\"size-4 opacity-50\" />\r\n      </SelectPrimitive.Icon>\r\n    </SelectPrimitive.Trigger>\r\n  )\r\n}\r\n\r\nfunction SelectContent({\r\n  className,\r\n  children,\r\n  position = \"item-aligned\",\r\n  align = \"center\",\r\n  ...props\r\n}: React.ComponentProps<typeof SelectPrimitive.Content>) {\r\n  return (\r\n    <SelectPrimitive.Portal>\r\n      <SelectPrimitive.Content\r\n        data-slot=\"select-content\"\r\n        className={cn(\r\n          \"bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md\",\r\n          position === \"popper\" &&\r\n            \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\r\n          className\r\n        )}\r\n        position={position}\r\n        align={align}\r\n        {...props}\r\n      >\r\n        <SelectScrollUpButton />\r\n        <SelectPrimitive.Viewport\r\n          className={cn(\r\n            \"p-1\",\r\n            position === \"popper\" &&\r\n              \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1\"\r\n          )}\r\n        >\r\n          {children}\r\n        </SelectPrimitive.Viewport>\r\n        <SelectScrollDownButton />\r\n      </SelectPrimitive.Content>\r\n    </SelectPrimitive.Portal>\r\n  )\r\n}\r\n\r\nfunction SelectLabel({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof SelectPrimitive.Label>) {\r\n  return (\r\n    <SelectPrimitive.Label\r\n      data-slot=\"select-label\"\r\n      className={cn(\"text-muted-foreground px-2 py-1.5 text-xs\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction SelectItem({\r\n  className,\r\n  children,\r\n  ...props\r\n}: React.ComponentProps<typeof SelectPrimitive.Item>) {\r\n  return (\r\n    <SelectPrimitive.Item\r\n      data-slot=\"select-item\"\r\n      className={cn(\r\n        \"focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2\",\r\n        className\r\n      )}\r\n      {...props}\r\n    >\r\n      <span\r\n        data-slot=\"select-item-indicator\"\r\n        className=\"absolute right-2 flex size-3.5 items-center justify-center\"\r\n      >\r\n        <SelectPrimitive.ItemIndicator>\r\n          <CheckIcon className=\"size-4\" />\r\n        </SelectPrimitive.ItemIndicator>\r\n      </span>\r\n      <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\r\n    </SelectPrimitive.Item>\r\n  )\r\n}\r\n\r\nfunction SelectSeparator({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof SelectPrimitive.Separator>) {\r\n  return (\r\n    <SelectPrimitive.Separator\r\n      data-slot=\"select-separator\"\r\n      className={cn(\"bg-border pointer-events-none -mx-1 my-1 h-px\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction SelectScrollUpButton({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof SelectPrimitive.ScrollUpButton>) {\r\n  return (\r\n    <SelectPrimitive.ScrollUpButton\r\n      data-slot=\"select-scroll-up-button\"\r\n      className={cn(\r\n        \"flex cursor-default items-center justify-center py-1\",\r\n        className\r\n      )}\r\n      {...props}\r\n    >\r\n      <ChevronUpIcon className=\"size-4\" />\r\n    </SelectPrimitive.ScrollUpButton>\r\n  )\r\n}\r\n\r\nfunction SelectScrollDownButton({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof SelectPrimitive.ScrollDownButton>) {\r\n  return (\r\n    <SelectPrimitive.ScrollDownButton\r\n      data-slot=\"select-scroll-down-button\"\r\n      className={cn(\r\n        \"flex cursor-default items-center justify-center py-1\",\r\n        className\r\n      )}\r\n      {...props}\r\n    >\r\n      <ChevronDownIcon className=\"size-4\" />\r\n    </SelectPrimitive.ScrollDownButton>\r\n  )\r\n}\r\n\r\nexport {\r\n  Select,\r\n  SelectContent,\r\n  SelectGroup,\r\n  SelectItem,\r\n  SelectLabel,\r\n  SelectScrollDownButton,\r\n  SelectScrollUpButton,\r\n  SelectSeparator,\r\n  SelectTrigger,\r\n  SelectValue,\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAGA;AACA;AAAA;AAAA;AAEA;AANA;;;;;AAQA,SAAS,OAAO,EACd,GAAG,OAC+C;IAClD,qBAAO,6LAAC,6KAAoB;QAAC,aAAU;QAAU,GAAG,KAAK;;;;;;AAC3D;KAJS;AAMT,SAAS,YAAY,EACnB,GAAG,OACgD;IACnD,qBAAO,6LAAC,8KAAqB;QAAC,aAAU;QAAgB,GAAG,KAAK;;;;;;AAClE;MAJS;AAMT,SAAS,YAAY,EACnB,GAAG,OACgD;IACnD,qBAAO,6LAAC,8KAAqB;QAAC,aAAU;QAAgB,GAAG,KAAK;;;;;;AAClE;MAJS;AAMT,SAAS,cAAc,EACrB,SAAS,EACT,OAAO,SAAS,EAChB,QAAQ,EACR,GAAG,OAGJ;IACC,qBACE,6LAAC,gLAAuB;QACtB,aAAU;QACV,aAAW;QACX,WAAW,IAAA,qHAAE,EACX,gzBACA;QAED,GAAG,KAAK;;YAER;0BACD,6LAAC,6KAAoB;gBAAC,OAAO;0BAC3B,cAAA,6LAAC,8OAAe;oBAAC,WAAU;;;;;;;;;;;;;;;;;AAInC;MAxBS;AA0BT,SAAS,cAAc,EACrB,SAAS,EACT,QAAQ,EACR,WAAW,cAAc,EACzB,QAAQ,QAAQ,EAChB,GAAG,OACkD;IACrD,qBACE,6LAAC,+KAAsB;kBACrB,cAAA,6LAAC,gLAAuB;YACtB,aAAU;YACV,WAAW,IAAA,qHAAE,EACX,ijBACA,aAAa,YACX,mIACF;YAEF,UAAU;YACV,OAAO;YACN,GAAG,KAAK;;8BAET,6LAAC;;;;;8BACD,6LAAC,iLAAwB;oBACvB,WAAW,IAAA,qHAAE,EACX,OACA,aAAa,YACX;8BAGH;;;;;;8BAEH,6LAAC;;;;;;;;;;;;;;;;AAIT;MAnCS;AAqCT,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,6LAAC,8KAAqB;QACpB,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,6CAA6C;QAC1D,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,WAAW,EAClB,SAAS,EACT,QAAQ,EACR,GAAG,OAC+C;IAClD,qBACE,6LAAC,6KAAoB;QACnB,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,6aACA;QAED,GAAG,KAAK;;0BAET,6LAAC;gBACC,aAAU;gBACV,WAAU;0BAEV,cAAA,6LAAC,sLAA6B;8BAC5B,cAAA,6LAAC,wNAAS;wBAAC,WAAU;;;;;;;;;;;;;;;;0BAGzB,6LAAC,iLAAwB;0BAAE;;;;;;;;;;;;AAGjC;MAzBS;AA2BT,SAAS,gBAAgB,EACvB,SAAS,EACT,GAAG,OACoD;IACvD,qBACE,6LAAC,kLAAyB;QACxB,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,iDAAiD;QAC9D,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,qBAAqB,EAC5B,SAAS,EACT,GAAG,OACyD;IAC5D,qBACE,6LAAC,uLAA8B;QAC7B,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,wDACA;QAED,GAAG,KAAK;kBAET,cAAA,6LAAC,wOAAa;YAAC,WAAU;;;;;;;;;;;AAG/B;MAhBS;AAkBT,SAAS,uBAAuB,EAC9B,SAAS,EACT,GAAG,OAC2D;IAC9D,qBACE,6LAAC,yLAAgC;QAC/B,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,wDACA;QAED,GAAG,KAAK;kBAET,cAAA,6LAAC,8OAAe;YAAC,WAAU;;;;;;;;;;;AAGjC;MAhBS"}},
    {"offset": {"line": 263, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Martin/Desktop/PROYECTOS/Tienda-Blama-2026/components/product-image-carousel.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useEffect, useMemo, useRef, useState } from \"react\"\r\nimport type { PointerEvent as ReactPointerEvent } from \"react\"\r\nimport Image from \"next/image\"\r\nimport { cn } from \"@/lib/utils\"\r\nimport { ChevronLeft, ChevronRight } from \"lucide-react\"\r\n\r\ninterface ProductImageCarouselProps {\r\n  images: string[]\r\n  alt: string\r\n  className?: string\r\n  autoPlay?: boolean\r\n  intervalMs?: number\r\n  showControls?: boolean\r\n  priority?: boolean\r\n  sizes?: string\r\n  quality?: number\r\n}\r\n\r\nexport function ProductImageCarousel({\r\n  images,\r\n  alt,\r\n  className,\r\n  autoPlay = false,\r\n  intervalMs = 2500,\r\n  showControls = true,\r\n  priority = false,\r\n  sizes,\r\n  quality,\r\n}: ProductImageCarouselProps) {\r\n  const isLikelyImageUrl = (url: string) => {\r\n    const u = String(url || \"\").trim().toLowerCase()\r\n    if (!u) return false\r\n    if (u.startsWith(\"data:\")) return u.startsWith(\"data:image/\")\r\n    return !(\r\n      u.endsWith(\".mp4\") ||\r\n      u.endsWith(\".webm\") ||\r\n      u.endsWith(\".mov\") ||\r\n      u.endsWith(\".m4v\") ||\r\n      u.endsWith(\".avi\") ||\r\n      u.endsWith(\".mkv\")\r\n    )\r\n  }\r\n\r\n  const cleanImages = useMemo(() => {\r\n    const unique: string[] = []\r\n    for (const img of images || []) {\r\n      const v = String(img || \"\").trim()\r\n      if (!v) continue\r\n      if (!isLikelyImageUrl(v)) continue\r\n      if (!unique.includes(v)) unique.push(v)\r\n      if (unique.length >= 10) break\r\n    }\r\n    return unique\r\n  }, [images])\r\n\r\n  const [index, setIndex] = useState(0)\r\n\r\n  const containerRef = useRef<HTMLDivElement | null>(null)\r\n  const [isDragging, setIsDragging] = useState(false)\r\n  const [dragX, setDragX] = useState(0)\r\n\r\n  const pointerIdRef = useRef<number | null>(null)\r\n  const pointerStartXRef = useRef<number | null>(null)\r\n  const pointerStartYRef = useRef<number | null>(null)\r\n  const pointerMovedRef = useRef(false)\r\n  const pointerLastXRef = useRef<number | null>(null)\r\n  const pointerLastTRef = useRef<number | null>(null)\r\n  const pointerVxRef = useRef(0)\r\n\r\n  useEffect(() => {\r\n    setIndex(0)\r\n    setDragX(0)\r\n    setIsDragging(false)\r\n  }, [cleanImages.join(\"|\")])\r\n\r\n  useEffect(() => {\r\n    if (!autoPlay) return\r\n    if (cleanImages.length <= 1) return\r\n    if (isDragging) return\r\n\r\n    const id = window.setInterval(() => {\r\n      setIndex((prev) => {\r\n        if (prev >= cleanImages.length - 1) return 0\r\n        return prev + 1\r\n      })\r\n    }, intervalMs)\r\n\r\n    return () => window.clearInterval(id)\r\n  }, [autoPlay, cleanImages.length, intervalMs, isDragging])\r\n\r\n  if (cleanImages.length === 0) return null\r\n\r\n  const lastIndex = Math.max(0, cleanImages.length - 1)\r\n\r\n  const rubberBand = (dx: number, width: number) => {\r\n    if (!width) return dx * 0.35\r\n    const constant = 0.55\r\n    const abs = Math.abs(dx)\r\n    const sign = dx < 0 ? -1 : 1\r\n    return sign * (width * constant * abs) / (width + constant * abs)\r\n  }\r\n\r\n  const prev = () => {\r\n    setDragX(0)\r\n    setIndex((i) => Math.max(0, i - 1))\r\n  }\r\n\r\n  const next = () => {\r\n    setDragX(0)\r\n    setIndex((i) => Math.min(lastIndex, i + 1))\r\n  }\r\n\r\n  const onPointerDown = (e: ReactPointerEvent<HTMLDivElement>) => {\r\n    if (cleanImages.length <= 1) return\r\n    pointerIdRef.current = e.pointerId\r\n    pointerStartXRef.current = e.clientX\r\n    pointerStartYRef.current = e.clientY\r\n    pointerLastXRef.current = e.clientX\r\n    pointerLastTRef.current = Date.now()\r\n    pointerVxRef.current = 0\r\n    pointerMovedRef.current = false\r\n    setIsDragging(true)\r\n    setDragX(0)\r\n    try {\r\n      e.currentTarget.setPointerCapture(e.pointerId)\r\n    } catch (err) {\r\n    }\r\n  }\r\n\r\n  const onPointerMove = (e: ReactPointerEvent<HTMLDivElement>) => {\r\n    const sx = pointerStartXRef.current\r\n    const sy = pointerStartYRef.current\r\n    if (sx == null || sy == null) return\r\n\r\n    const dx = e.clientX - sx\r\n    const dy = e.clientY - sy\r\n\r\n    // Solo consideramos swipe si el movimiento es mayormente horizontal.\r\n    if (Math.abs(dx) > 8 && Math.abs(dx) > Math.abs(dy)) {\r\n      pointerMovedRef.current = true\r\n      // Evita selección/drag de la imagen cuando se intenta deslizar.\r\n      if ((e as any).cancelable) e.preventDefault()\r\n\r\n      const now = Date.now()\r\n      const lx = pointerLastXRef.current\r\n      const lt = pointerLastTRef.current\r\n      if (lx != null && lt != null) {\r\n        const dt = Math.max(1, now - lt)\r\n        pointerVxRef.current = (e.clientX - lx) / dt\r\n      }\r\n      pointerLastXRef.current = e.clientX\r\n      pointerLastTRef.current = now\r\n\r\n      const width = containerRef.current?.getBoundingClientRect().width || 0\r\n      if (index === 0 && dx > 0) setDragX(rubberBand(dx, width))\r\n      else if (index === lastIndex && dx < 0) setDragX(rubberBand(dx, width))\r\n      else setDragX(dx)\r\n    }\r\n  }\r\n\r\n  const onPointerUp = (e: ReactPointerEvent<HTMLDivElement>) => {\r\n    const sx = pointerStartXRef.current\r\n    const sy = pointerStartYRef.current\r\n    const pid = pointerIdRef.current\r\n    pointerStartXRef.current = null\r\n    pointerStartYRef.current = null\r\n    pointerIdRef.current = null\r\n    setIsDragging(false)\r\n\r\n    if (sx == null || sy == null) return\r\n    if (!pointerMovedRef.current) {\r\n      setDragX(0)\r\n      if (pid != null) {\r\n        try {\r\n          e.currentTarget.releasePointerCapture(pid)\r\n        } catch (err) {\r\n        }\r\n      }\r\n      return\r\n    }\r\n\r\n    const dx = e.clientX - sx\r\n    const dy = e.clientY - sy\r\n\r\n    const width = containerRef.current?.getBoundingClientRect().width || 0\r\n    const distanceThreshold = Math.max(60, width * 0.18)\r\n    const velocity = pointerVxRef.current\r\n    const velocityThreshold = 0.7\r\n\r\n    const shouldSnapByVelocity = Math.abs(velocity) >= velocityThreshold && Math.abs(dx) >= 10\r\n    const shouldSnapByDistance = Math.abs(dx) >= distanceThreshold\r\n\r\n    if ((!shouldSnapByVelocity && !shouldSnapByDistance) || Math.abs(dx) < Math.abs(dy)) {\r\n      setDragX(0)\r\n      if (pid != null) {\r\n        try {\r\n          e.currentTarget.releasePointerCapture(pid)\r\n        } catch (err) {\r\n        }\r\n      }\r\n      return\r\n    }\r\n    const dir = shouldSnapByVelocity ? (velocity > 0 ? 1 : -1) : (dx > 0 ? 1 : -1)\r\n    if (dir > 0) prev()\r\n    else next()\r\n\r\n    setDragX(0)\r\n    if (pid != null) {\r\n      try {\r\n        e.currentTarget.releasePointerCapture(pid)\r\n      } catch (err) {\r\n      }\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div\r\n      ref={containerRef}\r\n      className={cn(\"group relative h-full w-full overflow-hidden select-none touch-pan-y\", className)}\r\n      onPointerDown={onPointerDown}\r\n      onPointerMove={onPointerMove}\r\n      onPointerUp={onPointerUp}\r\n      onPointerCancel={onPointerUp}\r\n    >\r\n      <div\r\n        className={cn(\r\n          \"flex h-full w-full\",\r\n          isDragging ? \"\" : \"transition-transform duration-300 ease-out\"\r\n        )}\r\n        style={{\r\n          transform: `translate3d(calc(${-index * 100}% + ${dragX}px), 0, 0)`,\r\n        }}\r\n      >\r\n        {cleanImages.map((src, i) => (\r\n          <div key={src} className=\"relative h-full w-full flex-none\">\r\n            <Image\r\n              src={src}\r\n              alt={alt}\r\n              fill\r\n              className=\"absolute inset-0 object-cover\"\r\n              priority={priority && i === 0}\r\n              sizes={sizes || \"(max-width: 640px) 50vw, (max-width: 1024px) 33vw, 20vw\"}\r\n              quality={quality}\r\n              draggable={false}\r\n              unoptimized={true}\r\n            />\r\n\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {showControls && cleanImages.length > 1 && (\r\n        <>\r\n          <button\r\n            type=\"button\"\r\n            aria-label=\"Imagen anterior\"\r\n            onClick={(e) => {\r\n              e.preventDefault()\r\n              e.stopPropagation()\r\n              prev()\r\n            }}\r\n            className=\"absolute left-2 top-1/2 -translate-y-1/2 h-10 w-10 rounded-full bg-background/85 backdrop-blur border border-border shadow-md flex items-center justify-center opacity-100 md:opacity-0 md:group-hover:opacity-100 focus-visible:opacity-100 transition-opacity\"\r\n          >\r\n            <ChevronLeft className=\"h-5 w-5\" />\r\n          </button>\r\n\r\n          <button\r\n            type=\"button\"\r\n            aria-label=\"Imagen siguiente\"\r\n            onClick={(e) => {\r\n              e.preventDefault()\r\n              e.stopPropagation()\r\n              next()\r\n            }}\r\n            className=\"absolute right-2 top-1/2 -translate-y-1/2 h-10 w-10 rounded-full bg-background/85 backdrop-blur border border-border shadow-md flex items-center justify-center opacity-100 md:opacity-0 md:group-hover:opacity-100 focus-visible:opacity-100 transition-opacity\"\r\n          >\r\n            <ChevronRight className=\"h-5 w-5\" />\r\n          </button>\r\n\r\n          <div className=\"absolute bottom-2 left-1/2 -translate-x-1/2 flex items-center gap-1.5 opacity-100 md:opacity-0 md:group-hover:opacity-100 transition-opacity\">\r\n            {cleanImages.map((_, dotIndex) => (\r\n              <button\r\n                key={dotIndex}\r\n                type=\"button\"\r\n                aria-label={`Ir a imagen ${dotIndex + 1}`}\r\n                onClick={(e) => {\r\n                  e.preventDefault()\r\n                  e.stopPropagation()\r\n                  setIndex(dotIndex)\r\n                  setDragX(0)\r\n                }}\r\n                className={cn(\r\n                  \"h-1.5 w-1.5 rounded-full\",\r\n                  dotIndex === index ? \"bg-primary\" : \"bg-foreground/30\"\r\n                )}\r\n              />\r\n            ))}\r\n          </div>\r\n        </>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 577, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Martin/Desktop/PROYECTOS/Tienda-Blama-2026/features/products/services/products.client.ts"],"sourcesContent":["import { supabase } from \"@/lib/supabaseClient\"\r\nimport type {\r\n    Category,\r\n    Product,\r\n    ProductSpecification,\r\n    ProductVariant,\r\n    ProductWithCategory,\r\n    SortValue,\r\n} from \"@/features/products/types\"\r\n\r\nexport async function listCategories(): Promise<Category[]> {\r\n    const { data, error } = await supabase.from(\"categorias\").select(\"*\").order(\"nombre\", { ascending: true })\r\n    if (error) {\r\n        console.error(\"Error fetching categories:\", error)\r\n        return []\r\n    }\r\n    return (data as Category[]) || []\r\n}\r\n\r\nexport type ListProductsParams = {\r\n    cat: string\r\n    q: string\r\n    sort: SortValue\r\n    min: string\r\n    max: string\r\n    stock: boolean\r\n    page: number\r\n    pageSize: number\r\n}\r\n\r\nexport type ListProductsResult = {\r\n    productos: Product[]\r\n    totalCount: number\r\n}\r\n\r\nexport async function listProducts(params: ListProductsParams): Promise<ListProductsResult> {\r\n    const q = (params.q || \"\").trim()\r\n    const min = params.min ? Number(params.min) : null\r\n    const max = params.max ? Number(params.max) : null\r\n\r\n    let productsQuery = supabase.from(\"productos\").select(\"*\", { count: \"exact\" })\r\n\r\n    if (params.cat !== \"all\") {\r\n        const categoryId = Number(params.cat)\r\n        if (Number.isFinite(categoryId) && categoryId > 0) {\r\n            productsQuery = productsQuery.eq(\"categoria_id\", categoryId)\r\n        } else {\r\n            const { data: catRow, error: catError } = await supabase\r\n                .from(\"categorias\")\r\n                .select(\"id\")\r\n                .eq(\"slug\", params.cat)\r\n                .maybeSingle()\r\n\r\n            if (!catError && catRow?.id) {\r\n                productsQuery = productsQuery.eq(\"categoria_id\", catRow.id)\r\n            }\r\n        }\r\n    }\r\n\r\n    if (q) {\r\n        productsQuery = productsQuery.ilike(\"nombre\", `%${q}%`)\r\n    }\r\n\r\n    if (min !== null && Number.isFinite(min)) {\r\n        productsQuery = productsQuery.gte(\"precio\", min)\r\n    }\r\n\r\n    if (max !== null && Number.isFinite(max)) {\r\n        productsQuery = productsQuery.lte(\"precio\", max)\r\n    }\r\n\r\n    if (params.stock) {\r\n        productsQuery = productsQuery.gt(\"stock\", 0)\r\n    }\r\n\r\n    if (params.sort === \"price-asc\") productsQuery = productsQuery.order(\"precio\", { ascending: true })\r\n    if (params.sort === \"price-desc\") productsQuery = productsQuery.order(\"precio\", { ascending: false })\r\n    if (params.sort === \"name-asc\") productsQuery = productsQuery.order(\"nombre\", { ascending: true })\r\n    if (params.sort === \"name-desc\") productsQuery = productsQuery.order(\"nombre\", { ascending: false })\r\n    if (params.sort === \"newest\") productsQuery = productsQuery.order(\"created_at\", { ascending: false })\r\n\r\n    const from = Math.max(0, (params.page - 1) * params.pageSize)\r\n    const to = Math.max(from, from + params.pageSize - 1)\r\n    productsQuery = productsQuery.range(from, to)\r\n\r\n    const { data, error, count } = await productsQuery\r\n\r\n    if (error) {\r\n        console.error(\"Error fetching products:\", error)\r\n        return { productos: [], totalCount: 0 }\r\n    }\r\n\r\n    return {\r\n        productos: (data as Product[]) || [],\r\n        totalCount: Number(count || 0),\r\n    }\r\n}\r\n\r\nexport type CountProductsParams = {\r\n    cat: string\r\n    q: string\r\n    min: string\r\n    max: string\r\n    stock: boolean\r\n}\r\n\r\nexport async function countProducts(params: CountProductsParams): Promise<number | null> {\r\n    const q = (params.q || \"\").trim()\r\n    const min = params.min ? Number(params.min) : null\r\n    const max = params.max ? Number(params.max) : null\r\n\r\n    let countQuery = supabase.from(\"productos\").select(\"id\", { count: \"exact\", head: true })\r\n\r\n    if (params.cat !== \"all\") {\r\n        const categoryId = Number(params.cat)\r\n        if (Number.isFinite(categoryId) && categoryId > 0) {\r\n            countQuery = countQuery.eq(\"categoria_id\", categoryId)\r\n        } else {\r\n            const { data: catRow, error: catError } = await supabase\r\n                .from(\"categorias\")\r\n                .select(\"id\")\r\n                .eq(\"slug\", params.cat)\r\n                .maybeSingle()\r\n\r\n            if (!catError && catRow?.id) {\r\n                countQuery = countQuery.eq(\"categoria_id\", catRow.id)\r\n            }\r\n        }\r\n    }\r\n\r\n    if (q) {\r\n        countQuery = countQuery.ilike(\"nombre\", `%${q}%`)\r\n    }\r\n\r\n    if (min !== null && Number.isFinite(min)) {\r\n        countQuery = countQuery.gte(\"precio\", min)\r\n    }\r\n\r\n    if (max !== null && Number.isFinite(max)) {\r\n        countQuery = countQuery.lte(\"precio\", max)\r\n    }\r\n\r\n    if (params.stock) {\r\n        countQuery = countQuery.gt(\"stock\", 0)\r\n    }\r\n\r\n    const { count, error } = await countQuery\r\n    if (error) {\r\n        console.error(\"Error fetching draft count:\", error)\r\n        return null\r\n    }\r\n\r\n    return Number(count || 0)\r\n}\r\n\r\nexport type ProductDetailResult = {\r\n    producto: ProductWithCategory | null\r\n    variantes: ProductVariant[]\r\n    especificaciones: ProductSpecification[]\r\n}\r\n\r\nexport async function getProductDetail(productId: number): Promise<ProductDetailResult> {\r\n    const [prodRes, variantsRes, specsRes] = await Promise.all([\r\n        supabase.from(\"productos\").select(`*, categorias (id, nombre, slug)`).eq(\"id\", productId).single(),\r\n        supabase\r\n            .from(\"producto_variantes\")\r\n            .select(\"*\")\r\n            .eq(\"producto_id\", productId)\r\n            .eq(\"activo\", true)\r\n            .order(\"id\", { ascending: true }),\r\n        supabase\r\n            .from(\"producto_especificaciones\")\r\n            .select(\"*\")\r\n            .eq(\"producto_id\", productId)\r\n            .order(\"orden\", { ascending: true })\r\n            .order(\"id\", { ascending: true }),\r\n    ])\r\n\r\n    const { data, error } = prodRes\r\n\r\n    const producto = error ? null : ((data as ProductWithCategory) || null)\r\n\r\n    const variantes = Array.isArray(variantsRes.data) ? (variantsRes.data as ProductVariant[]) : []\r\n    const especificaciones = Array.isArray(specsRes.data)\r\n        ? (specsRes.data as ProductSpecification[])\r\n        : []\r\n\r\n    if (error) {\r\n        console.error(\"Error fetching producto:\", error)\r\n    }\r\n\r\n    return {\r\n        producto,\r\n        variantes,\r\n        especificaciones,\r\n    }\r\n}\r\n\r\nexport async function getRecommendedProducts(excludeId: number): Promise<any[]> {\r\n    try {\r\n        const { data: topData, error: topError } = await supabase.rpc(\"get_top_products\", {\r\n            limit_count: 8,\r\n            exclude_id: excludeId,\r\n        })\r\n\r\n        if (!topError && Array.isArray(topData)) {\r\n            return topData\r\n        }\r\n\r\n        const { data: recentData, error: recentError } = await supabase\r\n            .from(\"productos\")\r\n            .select(\"*\")\r\n            .neq(\"id\", excludeId)\r\n            .gt(\"stock\", 0)\r\n            .order(\"created_at\", { ascending: false })\r\n            .limit(8)\r\n\r\n        if (!recentError && Array.isArray(recentData)) {\r\n            return recentData\r\n        }\r\n\r\n        return []\r\n    } catch (err) {\r\n        return []\r\n    }\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 752, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Martin/Desktop/PROYECTOS/Tienda-Blama-2026/app/productos/page.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { Suspense, useEffect, useMemo, useState } from \"react\"\r\nimport { useCartStore } from \"@/features/cart\"\r\nimport { Button } from \"@/components/ui/button\"\r\n\r\nimport Link from \"next/link\"\r\n\r\nimport {\r\n    Select,\r\n    SelectContent,\r\n    SelectItem,\r\n    SelectTrigger,\r\n    SelectValue,\r\n} from \"@/components/ui/select\"\r\nimport { Input } from \"@/components/ui/input\"\r\nimport { formatCurrency, slugify } from \"@/lib/utils\"\r\nimport { Filter, Minus, Plus, Search, ShoppingCart, X } from \"lucide-react\"\r\nimport { useRouter, useSearchParams } from \"next/navigation\"\r\nimport { ProductImageCarousel } from \"@/components/product-image-carousel\"\r\nimport { listCategories, listProducts } from \"@/features/products/services/products.client\"\r\nimport type { Category, Product, SortValue } from \"@/features/products/types\"\r\n\r\nexport default function ProductosPage() {\r\n    return (\r\n        <Suspense fallback={<div className=\"p-6 text-muted-foreground\">Cargando...</div>}>\r\n            <ProductosPageContent />\r\n        </Suspense>\r\n    )\r\n}\r\n\r\nfunction ProductosPageContent() {\r\n    const router = useRouter()\r\n    const searchParams = useSearchParams()\r\n    const searchParamsString = searchParams?.toString() ?? ''\r\n\r\n    const [productos, setProductos] = useState<Product[]>([])\r\n    const [totalCount, setTotalCount] = useState<number>(0)\r\n\r\n    const [categorias, setCategorias] = useState<Category[]>([])\r\n    const [loading, setLoading] = useState(true)\r\n    const [selectedCategory, setSelectedCategory] = useState<string>(\"all\")\r\n    const [searchQuery, setSearchQuery] = useState(\"\")\r\n    const [sort, setSort] = useState<SortValue>('name-asc')\r\n    const [minPrice, setMinPrice] = useState<string>('')\r\n    const [maxPrice, setMaxPrice] = useState<string>('')\r\n    const [onlyInStock, setOnlyInStock] = useState<boolean>(false)\r\n\r\n\r\n    const [isMobile, setIsMobile] = useState<boolean>(() => {\r\n        if (typeof window === 'undefined') return false\r\n        return window.matchMedia('(max-width: 767px)').matches\r\n    })\r\n    const [activeFilter, setActiveFilter] = useState<string | null>(null)\r\n\r\n\r\n    const [pageSize, setPageSize] = useState<number>(() => {\r\n        if (typeof window === 'undefined') return 20\r\n        return window.matchMedia('(max-width: 767px)').matches ? 12 : 20\r\n    })\r\n\r\n    const { addItem, items, updateQuantity } = useCartStore()\r\n\r\n    useEffect(() => {\r\n        let active = true\r\n            ; (async () => {\r\n                const categoriasData = await listCategories()\r\n                if (active) setCategorias((categoriasData as Category[]) || [])\r\n            })()\r\n        return () => {\r\n            active = false\r\n        }\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        function updatePageSize() {\r\n            if (typeof window === 'undefined') return\r\n            const isMobile = window.matchMedia('(max-width: 767px)').matches\r\n            const next = isMobile ? 12 : 20\r\n            setPageSize((prev) => (prev === next ? prev : next))\r\n            setIsMobile(isMobile)\r\n        }\r\n\r\n        updatePageSize()\r\n        if (typeof window === 'undefined') return\r\n\r\n        window.addEventListener('resize', updatePageSize)\r\n        return () => window.removeEventListener('resize', updatePageSize)\r\n    }, [])\r\n\r\n\r\n\r\n    async function fetchData(opts: {\r\n        cat: string\r\n        q: string\r\n        sort: SortValue\r\n        min: string\r\n        max: string\r\n        stock: boolean\r\n        page: number\r\n    }) {\r\n        setLoading(true)\r\n\r\n        const { productos, totalCount } = await listProducts({\r\n            cat: opts.cat,\r\n            q: opts.q,\r\n            sort: opts.sort,\r\n            min: opts.min,\r\n            max: opts.max,\r\n            stock: opts.stock,\r\n            page: opts.page,\r\n            pageSize,\r\n        })\r\n\r\n        setProductos(productos)\r\n        setTotalCount(totalCount)\r\n\r\n        setLoading(false)\r\n    }\r\n\r\n    function updateUrl(next: Record<string, string | undefined>, mode: 'push' | 'replace' = 'replace') {\r\n        const params = new URLSearchParams(searchParams?.toString())\r\n        for (const [key, value] of Object.entries(next)) {\r\n            if (!value) {\r\n                params.delete(key)\r\n            } else {\r\n                params.set(key, value)\r\n            }\r\n        }\r\n        const qs = params.toString()\r\n        const href = qs ? `/productos?${qs}` : '/productos'\r\n        if (mode === 'push') {\r\n            router.push(href)\r\n        } else {\r\n            router.replace(href)\r\n        }\r\n    }\r\n\r\n    const appliedFromUrl = useMemo(() => {\r\n        const sp = new URLSearchParams(searchParamsString)\r\n        const cat = sp.get('cat') ?? 'all'\r\n        const q = sp.get('q') ?? ''\r\n        const s = (sp.get('sort') ?? 'name-asc') as SortValue\r\n        const min = sp.get('min') ?? ''\r\n        const max = sp.get('max') ?? ''\r\n        const stock = sp.get('stock') === '1'\r\n        const pageRaw = sp.get('page') ?? '1'\r\n        const page = Math.max(1, Number.parseInt(pageRaw, 10) || 1)\r\n        return {\r\n            cat,\r\n            q,\r\n            sort: (['name-asc', 'name-desc', 'price-asc', 'price-desc', 'newest'] as const).includes(s) ? s : 'name-asc',\r\n            min,\r\n            max,\r\n            stock,\r\n            page,\r\n        }\r\n    }, [searchParamsString])\r\n\r\n    useEffect(() => {\r\n        fetchData(appliedFromUrl)\r\n    }, [appliedFromUrl, pageSize])\r\n\r\n    useEffect(() => {\r\n        setSelectedCategory(appliedFromUrl.cat || 'all')\r\n        setSearchQuery(appliedFromUrl.q || '')\r\n        setSort(appliedFromUrl.sort)\r\n        setMinPrice(appliedFromUrl.min || '')\r\n        setMaxPrice(appliedFromUrl.max || '')\r\n        setOnlyInStock(Boolean(appliedFromUrl.stock))\r\n    }, [appliedFromUrl])\r\n\r\n    useEffect(() => {\r\n        const handle = setTimeout(() => {\r\n            updateUrl({ q: searchQuery || undefined, page: undefined }, 'replace')\r\n        }, 250)\r\n        return () => clearTimeout(handle)\r\n    }, [searchQuery])\r\n\r\n\r\n\r\n    const currentPage = appliedFromUrl.page\r\n    const totalPages = Math.max(1, Math.ceil(totalCount / pageSize))\r\n\r\n    useEffect(() => {\r\n        if (currentPage > totalPages) {\r\n            updateUrl({ page: undefined }, 'replace')\r\n        }\r\n    }, [currentPage, totalPages])\r\n\r\n\r\n\r\n\r\n\r\n    const getItemQuantity = (productId: number) => {\r\n        const qty = items\r\n            .filter((i: any) => i.id === productId)\r\n            .reduce((sum: number, it: any) => sum + Number(it.quantity || 0), 0)\r\n        return qty\r\n    }\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-background\">\r\n            {/* Simple Header */}\r\n            <div className=\"container mx-auto px-4 pt-10 pb-6 text-center\">\r\n                <h1 className=\"text-3xl font-bold\">Productos</h1>\r\n            </div>\r\n\r\n            <div className=\"container mx-auto px-4 pb-8\">\r\n                {/* Search Bar (Full Width) */}\r\n                <div className=\"mb-6 max-w-xl mx-auto\">\r\n                    <div className=\"relative\">\r\n                        <Search className=\"absolute left-3 top-3 h-4 w-4 text-muted-foreground\" />\r\n                        <Input\r\n                            placeholder=\"Buscar productos...\"\r\n                            className=\"pl-9\"\r\n                            value={searchQuery}\r\n                            onChange={(e) => setSearchQuery(e.target.value)}\r\n                        />\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Filter Bar */}\r\n                <div className=\"flex flex-col lg:flex-row gap-4 justify-between items-start lg:items-center border-b border-border pb-4 mb-6\">\r\n                    {/* Left: Filters */}\r\n                    <div className=\"flex flex-wrap items-center gap-4\">\r\n                        <span className=\"text-sm font-medium\">Filtrar:</span>\r\n\r\n                        {/* Category Filter Dropdown */}\r\n                        <div className=\"relative\">\r\n                            <Button\r\n                                variant={activeFilter === 'cat' || selectedCategory !== 'all' ? \"default\" : \"outline\"}\r\n                                size=\"sm\"\r\n                                className=\"gap-2 h-9\"\r\n                                onClick={() => setActiveFilter(activeFilter === 'cat' ? null : 'cat')}\r\n                            >\r\n                                Categoría <Filter className=\"h-3 w-3\" />\r\n                            </Button>\r\n                            {/* Dropdown Container */}\r\n                            {activeFilter === 'cat' && (\r\n                                <div className=\"absolute top-full left-0 pt-2 w-56 z-20\">\r\n                                    <div className=\"bg-white border border-border shadow-lg rounded-md p-2\">\r\n                                        <div className=\"space-y-1 max-h-60 overflow-y-auto\">\r\n                                            <button\r\n                                                onClick={() => {\r\n                                                    setSelectedCategory(\"all\");\r\n                                                    updateUrl({ cat: undefined, page: undefined }, 'replace');\r\n                                                    setActiveFilter(null);\r\n                                                }}\r\n                                                className={`w-full text-left text-sm px-2 py-1.5 rounded-sm hover:bg-accent ${selectedCategory === \"all\" ? \"bg-accent/50 font-medium\" : \"\"}`}\r\n                                            >\r\n                                                Todas\r\n                                            </button>\r\n                                            {categorias.map(cat => (\r\n                                                <button\r\n                                                    key={cat.id}\r\n                                                    onClick={() => {\r\n                                                        setSelectedCategory(cat.id.toString());\r\n                                                        updateUrl({ cat: cat.id.toString(), page: undefined }, 'replace');\r\n                                                        setActiveFilter(null);\r\n                                                    }}\r\n                                                    className={`w-full text-left text-sm px-2 py-1.5 rounded-sm hover:bg-accent ${selectedCategory === cat.id.toString() ? \"bg-accent/50 font-medium\" : \"\"}`}\r\n                                                >\r\n                                                    {cat.nombre}\r\n                                                </button>\r\n                                            ))}\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n\r\n                        {/* Availability Filter Dropdown */}\r\n                        <div className=\"relative\">\r\n                            <Button\r\n                                variant={activeFilter === 'stock' || onlyInStock ? \"default\" : \"outline\"}\r\n                                size=\"sm\"\r\n                                className=\"gap-2 h-9\"\r\n                                onClick={() => setActiveFilter(activeFilter === 'stock' ? null : 'stock')}\r\n                            >\r\n                                Disponibilidad <Filter className=\"h-3 w-3\" />\r\n                            </Button>\r\n                            {activeFilter === 'stock' && (\r\n                                <div className=\"absolute top-full left-0 pt-2 w-48 z-20\">\r\n                                    <div className=\"bg-white border border-border shadow-lg rounded-md p-3\">\r\n                                        <div className=\"flex items-center space-x-2\">\r\n                                            <input\r\n                                                type=\"checkbox\"\r\n                                                id=\"stock-filter\"\r\n                                                className=\"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary\"\r\n                                                checked={onlyInStock}\r\n                                                onChange={(e) => {\r\n                                                    const val = e.target.checked\r\n                                                    setOnlyInStock(val)\r\n                                                    updateUrl({ stock: val ? '1' : undefined, page: undefined }, 'push')\r\n                                                }}\r\n                                            />\r\n                                            <label htmlFor=\"stock-filter\" className=\"text-sm cursor-pointer select-none\">\r\n                                                Solo en stock\r\n                                            </label>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n\r\n                        {/* Price Filter Dropdown */}\r\n                        <div className=\"relative\">\r\n                            <Button\r\n                                variant={activeFilter === 'price' || minPrice || maxPrice ? \"default\" : \"outline\"}\r\n                                size=\"sm\"\r\n                                className=\"gap-2 h-9\"\r\n                                onClick={() => setActiveFilter(activeFilter === 'price' ? null : 'price')}\r\n                            >\r\n                                Precio <Filter className=\"h-3 w-3\" />\r\n                            </Button>\r\n                            {activeFilter === 'price' && (\r\n                                <div className=\"absolute top-full left-0 pt-2 w-64 z-20\">\r\n                                    <div className=\"bg-white border border-border shadow-lg rounded-md p-3\">\r\n                                        <div className=\"flex items-center gap-2\">\r\n                                            <div className=\"space-y-1 flex-1\">\r\n                                                <label className=\"text-xs text-muted-foreground\">Mín</label>\r\n                                                <Input\r\n                                                    className=\"h-8 text-xs\"\r\n                                                    placeholder=\"0\"\r\n                                                    value={minPrice}\r\n                                                    onChange={(e) => setMinPrice(e.target.value)}\r\n                                                    onBlur={() => updateUrl({ min: minPrice || undefined, page: undefined }, 'push')}\r\n                                                />\r\n                                            </div>\r\n                                            <div className=\"space-y-1 flex-1\">\r\n                                                <label className=\"text-xs text-muted-foreground\">Máx</label>\r\n                                                <Input\r\n                                                    className=\"h-8 text-xs\"\r\n                                                    placeholder=\"9999\"\r\n                                                    value={maxPrice}\r\n                                                    onChange={(e) => setMaxPrice(e.target.value)}\r\n                                                    onBlur={() => updateUrl({ max: maxPrice || undefined, page: undefined }, 'push')}\r\n                                                />\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n\r\n                        {/* Backdrop for closing filters */}\r\n                        {activeFilter && (\r\n                            <div\r\n                                className=\"fixed inset-0 z-10 bg-transparent\"\r\n                                onClick={() => setActiveFilter(null)}\r\n                            />\r\n                        )}\r\n                    </div>\r\n\r\n                    {/* Right: Sort & Count */}\r\n                    <div className=\"flex flex-wrap items-center gap-4 w-full lg:w-auto justify-between lg:justify-end\">\r\n                        <div className=\"flex items-center gap-2\">\r\n                            <span className=\"text-sm font-medium whitespace-nowrap\">Ordenar por:</span>\r\n                            <Select\r\n                                value={sort}\r\n                                onValueChange={(v) => {\r\n                                    setSort(v as SortValue)\r\n                                    updateUrl({ sort: v as SortValue }, 'replace')\r\n                                }}\r\n                            >\r\n                                <SelectTrigger className=\"w-[180px] h-9 text-sm\">\r\n                                    <SelectValue placeholder=\"Seleccionar\" />\r\n                                </SelectTrigger>\r\n                                <SelectContent>\r\n                                    <SelectItem value=\"name-asc\">Alfabéticamente, A-Z</SelectItem>\r\n                                    <SelectItem value=\"name-desc\">Alfabéticamente, Z-A</SelectItem>\r\n                                    <SelectItem value=\"price-asc\">Precio, menor a mayor</SelectItem>\r\n                                    <SelectItem value=\"price-desc\">Precio, mayor a menor</SelectItem>\r\n                                    <SelectItem value=\"newest\">Más nuevos</SelectItem>\r\n                                </SelectContent>\r\n                            </Select>\r\n                        </div>\r\n                        <span className=\"text-sm text-muted-foreground whitespace-nowrap\">\r\n                            {totalCount} productos\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Active Filters Badges */}\r\n                {(selectedCategory !== \"all\" || onlyInStock || minPrice || maxPrice || searchQuery) && (\r\n                    <div className=\"flex flex-wrap items-center gap-2 mb-6\">\r\n                        {searchQuery && (\r\n                            <Button\r\n                                variant=\"secondary\"\r\n                                size=\"sm\"\r\n                                className=\"h-7 text-xs rounded-full gap-1\"\r\n                                onClick={() => setSearchQuery(\"\")}\r\n                            >\r\n                                Búsqueda: {searchQuery}\r\n                                <X className=\"h-3 w-3\" />\r\n                            </Button>\r\n                        )}\r\n                        {selectedCategory !== \"all\" && (\r\n                            <Button\r\n                                variant=\"secondary\"\r\n                                size=\"sm\"\r\n                                className=\"h-7 text-xs rounded-full gap-1\"\r\n                                onClick={() => {\r\n                                    setSelectedCategory(\"all\")\r\n                                    updateUrl({ cat: undefined, page: undefined }, 'replace')\r\n                                }}\r\n                            >\r\n                                Categoría: {categorias.find(c => c.id.toString() === selectedCategory)?.nombre || selectedCategory}\r\n                                <X className=\"h-3 w-3\" />\r\n                            </Button>\r\n                        )}\r\n                        {onlyInStock && (\r\n                            <Button\r\n                                variant=\"secondary\"\r\n                                size=\"sm\"\r\n                                className=\"h-7 text-xs rounded-full gap-1\"\r\n                                onClick={() => {\r\n                                    setOnlyInStock(false)\r\n                                    updateUrl({ stock: undefined, page: undefined }, 'push')\r\n                                }}\r\n                            >\r\n                                Solo Stock\r\n                                <X className=\"h-3 w-3\" />\r\n                            </Button>\r\n                        )}\r\n                        {(minPrice || maxPrice) && (\r\n                            <Button\r\n                                variant=\"secondary\"\r\n                                size=\"sm\"\r\n                                className=\"h-7 text-xs rounded-full gap-1\"\r\n                                onClick={() => {\r\n                                    setMinPrice(\"\")\r\n                                    setMaxPrice(\"\")\r\n                                    updateUrl({ min: undefined, max: undefined, page: undefined }, 'push')\r\n                                }}\r\n                            >\r\n                                Precio: {minPrice || '0'} - {maxPrice || '∞'}\r\n                                <X className=\"h-3 w-3\" />\r\n                            </Button>\r\n                        )}\r\n                        <Button\r\n                            variant=\"ghost\"\r\n                            size=\"sm\"\r\n                            className=\"h-7 text-xs text-muted-foreground hover:text-foreground\"\r\n                            onClick={() => {\r\n                                setSearchQuery(\"\")\r\n                                setSelectedCategory(\"all\")\r\n                                setOnlyInStock(false)\r\n                                setMinPrice(\"\")\r\n                                setMaxPrice(\"\")\r\n                                updateUrl({ cat: undefined, q: undefined, stock: undefined, min: undefined, max: undefined, page: undefined }, 'replace')\r\n                            }}\r\n                        >\r\n                            Limpiar todo\r\n                        </Button>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Products Grid */}\r\n                {loading ? (\r\n                    <div className=\"text-center py-20\">\r\n                        <div className=\"animate-spin h-8 w-8 border-4 border-primary border-t-transparent rounded-full mx-auto mb-4\"></div>\r\n                        <p className=\"text-muted-foreground\">Cargando productos...</p>\r\n                    </div>\r\n                ) : totalCount === 0 ? (\r\n                    <div className=\"text-center py-20\">\r\n                        <p className=\"text-muted-foreground text-lg\">No se encontraron productos.</p>\r\n                        {searchQuery && (\r\n                            <Button variant=\"link\" onClick={() => setSearchQuery(\"\")}>\r\n                                Limpiar búsqueda\r\n                            </Button>\r\n                        )}\r\n                    </div>\r\n                ) : (\r\n                    <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 md:gap-6\">\r\n                        {productos.map((producto) => {\r\n                            const quantity = getItemQuantity(producto.id)\r\n                            const hasVideo = Array.isArray((producto as any).videos) && ((producto as any).videos as any[]).filter(Boolean).length > 0\r\n\r\n                            return (\r\n                                <div key={producto.id} className=\"bg-card rounded-xl shadow-sm border border-border overflow-hidden group hover:shadow-lg transition-all\">\r\n                                    {/* Image */}\r\n                                    <div className=\"aspect-square bg-popover relative overflow-hidden\">\r\n                                        <Link href={`/productos/${slugify(producto.nombre)}-${producto.id}`} className=\"absolute inset-0\">\r\n                                            {((Array.isArray((producto as any).imagenes) && ((producto as any).imagenes as string[]).filter(Boolean).length > 0) || producto.imagen_url) ? (\r\n                                                <ProductImageCarousel\r\n                                                    images={\r\n                                                        (Array.isArray((producto as any).imagenes)\r\n                                                            ? (((producto as any).imagenes as string[]) || []).filter(Boolean).slice(0, 10)\r\n                                                            : producto.imagen_url\r\n                                                                ? [producto.imagen_url]\r\n                                                                : [])\r\n                                                    }\r\n                                                    alt={producto.nombre}\r\n                                                    className=\"group-hover:scale-105 transition-transform duration-300\"\r\n                                                    autoPlay\r\n                                                    intervalMs={2500}\r\n                                                />\r\n                                            ) : (\r\n                                                <div className=\"w-full h-full flex items-center justify-center text-muted-foreground\">\r\n                                                    Sin imagen\r\n                                                </div>\r\n                                            )}\r\n                                        </Link>\r\n                                        {producto.stock <= 0 && (\r\n                                            <div className=\"absolute inset-0 bg-foreground/60 flex items-center justify-center\">\r\n                                                <span className=\"text-sidebar-primary-foreground font-bold\">Agotado</span>\r\n                                            </div>\r\n                                        )}\r\n\r\n                                        {hasVideo && (\r\n                                            <div className=\"absolute left-2 bottom-2\">\r\n                                                <span className=\"inline-flex items-center rounded-full bg-black/70 px-2 py-1 text-[11px] font-bold text-white\">\r\n                                                    Video\r\n                                                </span>\r\n                                            </div>\r\n                                        )}\r\n                                    </div>\r\n\r\n                                    {/* Info */}\r\n                                    <div className=\"p-4\">\r\n                                        <Link href={`/productos/${slugify(producto.nombre)}-${producto.id}`} className=\"hover:underline\">\r\n                                            <h3 className=\"font-semibold text-foreground mb-1 line-clamp-2\">{producto.nombre}</h3>\r\n                                        </Link>\r\n                                        <p className=\"text-xl font-bold text-primary mb-3\">{formatCurrency(producto.precio)}</p>\r\n\r\n                                        {producto.stock > 0 ? (\r\n                                            quantity === 0 ? (\r\n                                                <Button\r\n                                                    className=\"w-full gap-2\"\r\n                                                    onClick={() => addItem(producto)}\r\n                                                >\r\n                                                    <ShoppingCart className=\"h-4 w-4\" />\r\n                                                    Agregar\r\n                                                </Button>\r\n                                            ) : (\r\n                                                <div className=\"flex items-center justify-between bg-popover rounded-lg p-1\">\r\n                                                    <Button\r\n                                                        variant=\"ghost\"\r\n                                                        size=\"icon\"\r\n                                                        className=\"h-8 w-8\"\r\n                                                        onClick={() => updateQuantity(producto.id, quantity - 1, null)}\r\n                                                    >\r\n                                                        <Minus className=\"h-4 w-4\" />\r\n                                                    </Button>\r\n                                                    <span className=\"font-bold\">{quantity}</span>\r\n                                                    <Button\r\n                                                        variant=\"ghost\"\r\n                                                        size=\"icon\"\r\n                                                        className=\"h-8 w-8\"\r\n                                                        onClick={() => updateQuantity(producto.id, quantity + 1, null)}\r\n                                                    >\r\n                                                        <Plus className=\"h-4 w-4\" />\r\n                                                    </Button>\r\n                                                </div>\r\n                                            )\r\n                                        ) : (\r\n                                            <Button disabled className=\"w-full\">\r\n                                                Sin Stock\r\n                                            </Button>\r\n                                        )}\r\n                                    </div>\r\n                                </div>\r\n                            )\r\n                        })}\r\n                    </div>\r\n                )}\r\n\r\n                {!loading && totalCount > 0 && totalPages > 1 && (\r\n                    <div className=\"flex items-center justify-center gap-2 mt-10\">\r\n                        <Button\r\n                            variant=\"outline\"\r\n                            size=\"sm\"\r\n                            disabled={currentPage <= 1}\r\n                            onClick={() => updateUrl({ page: String(Math.max(1, currentPage - 1)) }, 'push')}\r\n                        >\r\n                            Anterior\r\n                        </Button>\r\n\r\n                        {Array.from({ length: totalPages }).slice(0, 100).map((_, idx) => {\r\n                            const p = idx + 1\r\n                            const isEdge = p === 1 || p === totalPages\r\n                            const near = Math.abs(p - currentPage) <= 1\r\n\r\n                            if (!isEdge && !near) {\r\n                                if (p === 2 && currentPage > 3) {\r\n                                    return (\r\n                                        <span key=\"gap-left\" className=\"px-2 text-muted-foreground\">\r\n                                            …\r\n                                        </span>\r\n                                    )\r\n                                }\r\n                                if (p === totalPages - 1 && currentPage < totalPages - 2) {\r\n                                    return (\r\n                                        <span key=\"gap-right\" className=\"px-2 text-muted-foreground\">\r\n                                            …\r\n                                        </span>\r\n                                    )\r\n                                }\r\n                                return null\r\n                            }\r\n\r\n                            return (\r\n                                <Button\r\n                                    key={p}\r\n                                    variant={p === currentPage ? 'default' : 'outline'}\r\n                                    size=\"sm\"\r\n                                    onClick={() => updateUrl({ page: p === 1 ? undefined : String(p) }, 'push')}\r\n                                >\r\n                                    {p}\r\n                                </Button>\r\n                            )\r\n                        })}\r\n\r\n                        <Button\r\n                            variant=\"outline\"\r\n                            size=\"sm\"\r\n                            disabled={currentPage >= totalPages}\r\n                            onClick={() => updateUrl({ page: String(Math.min(totalPages, currentPage + 1)) }, 'push')}\r\n                        >\r\n                            Siguiente\r\n                        </Button>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n"],"names":[],"mappings":"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"}}]
}