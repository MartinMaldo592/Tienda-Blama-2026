{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 26, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Martin/Desktop/PROYECTOS/Tienda-Blama-2026/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from \"clsx\"\r\nimport { twMerge } from \"tailwind-merge\"\r\n\r\nconst currencyFormatter = new Intl.NumberFormat('es-PE', {\r\n  style: 'currency',\r\n  currency: 'PEN',\r\n  minimumFractionDigits: 2,\r\n  maximumFractionDigits: 2,\r\n})\r\n\r\nexport function cn(...inputs: ClassValue[]) {\r\n  return twMerge(clsx(inputs))\r\n}\r\n\r\nexport function formatCurrency(value: number | string | null | undefined) {\r\n  const num = typeof value === 'string' ? Number(value) : value ?? 0\r\n  const safe = Number.isFinite(num) ? num : 0\r\n  return currencyFormatter.format(safe)\r\n}\r\n\r\nexport function slugify(input: string) {\r\n  return String(input || '')\r\n    .normalize('NFD')\r\n    .replace(/[\\u0300-\\u036f]/g, '')\r\n    .toLowerCase()\r\n    .trim()\r\n    .replace(/[^a-z0-9]+/g, '-')\r\n    .replace(/(^-|-$)/g, '')\r\n}\r\n"],"names":[],"mappings":";;;;;;;;AAAA;AACA;;;AAEA,MAAM,oBAAoB,IAAI,KAAK,YAAY,CAAC,SAAS;IACvD,OAAO;IACP,UAAU;IACV,uBAAuB;IACvB,uBAAuB;AACzB;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,sKAAO,EAAC,IAAA,6IAAI,EAAC;AACtB;AAEO,SAAS,eAAe,KAAyC;IACtE,MAAM,MAAM,OAAO,UAAU,WAAW,OAAO,SAAS,SAAS;IACjE,MAAM,OAAO,OAAO,QAAQ,CAAC,OAAO,MAAM;IAC1C,OAAO,kBAAkB,MAAM,CAAC;AAClC;AAEO,SAAS,QAAQ,KAAa;IACnC,OAAO,OAAO,SAAS,IACpB,SAAS,CAAC,OACV,OAAO,CAAC,oBAAoB,IAC5B,WAAW,GACX,IAAI,GACJ,OAAO,CAAC,eAAe,KACvB,OAAO,CAAC,YAAY;AACzB"}},
    {"offset": {"line": 59, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Martin/Desktop/PROYECTOS/Tienda-Blama-2026/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport { Slot } from \"@radix-ui/react-slot\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst buttonVariants = cva(\r\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\r\n        destructive:\r\n          \"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60\",\r\n        outline:\r\n          \"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50\",\r\n        secondary:\r\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\r\n        ghost:\r\n          \"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50\",\r\n        link: \"text-primary underline-offset-4 hover:underline\",\r\n      },\r\n      size: {\r\n        default: \"h-9 px-4 py-2 has-[>svg]:px-3\",\r\n        sm: \"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5\",\r\n        lg: \"h-10 rounded-md px-6 has-[>svg]:px-4\",\r\n        icon: \"size-9\",\r\n        \"icon-sm\": \"size-8\",\r\n        \"icon-lg\": \"size-10\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n      size: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nfunction Button({\r\n  className,\r\n  variant = \"default\",\r\n  size = \"default\",\r\n  asChild = false,\r\n  ...props\r\n}: React.ComponentProps<\"button\"> &\r\n  VariantProps<typeof buttonVariants> & {\r\n    asChild?: boolean\r\n  }) {\r\n  const Comp = asChild ? Slot : \"button\"\r\n\r\n  return (\r\n    <Comp\r\n      data-slot=\"button\"\r\n      data-variant={variant}\r\n      data-size={size}\r\n      className={cn(buttonVariants({ variant, size, className }))}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Button, buttonVariants }\r\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,IAAA,uKAAG,EACxB,+bACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;YACN,WAAW;YACX,WAAW;QACb;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,UAAU,SAAS,EACnB,OAAO,SAAS,EAChB,UAAU,KAAK,EACf,GAAG,OAIF;IACD,MAAM,OAAO,UAAU,wKAAI,GAAG;IAE9B,qBACE,8OAAC;QACC,aAAU;QACV,gBAAc;QACd,aAAW;QACX,WAAW,IAAA,kHAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 120, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Martin/Desktop/PROYECTOS/Tienda-Blama-2026/components/product-card.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const ProductCard = registerClientReference(\n    function() { throw new Error(\"Attempted to call ProductCard() from the server but ProductCard is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/product-card.tsx <module evaluation>\",\n    \"ProductCard\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,cAAc,IAAA,wQAAuB,EAC9C;IAAa,MAAM,IAAI,MAAM;AAAsO,GACnQ,6DACA","ignoreList":[0]}},
    {"offset": {"line": 134, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Martin/Desktop/PROYECTOS/Tienda-Blama-2026/components/product-card.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const ProductCard = registerClientReference(\n    function() { throw new Error(\"Attempted to call ProductCard() from the server but ProductCard is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/product-card.tsx\",\n    \"ProductCard\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,cAAc,IAAA,wQAAuB,EAC9C;IAAa,MAAM,IAAI,MAAM;AAAsO,GACnQ,yCACA","ignoreList":[0]}},
    {"offset": {"line": 148, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 156, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Martin/Desktop/PROYECTOS/Tienda-Blama-2026/components/promo-carousel.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const PromoCarousel = registerClientReference(\n    function() { throw new Error(\"Attempted to call PromoCarousel() from the server but PromoCarousel is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/promo-carousel.tsx <module evaluation>\",\n    \"PromoCarousel\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,gBAAgB,IAAA,wQAAuB,EAChD;IAAa,MAAM,IAAI,MAAM;AAA0O,GACvQ,+DACA","ignoreList":[0]}},
    {"offset": {"line": 170, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Martin/Desktop/PROYECTOS/Tienda-Blama-2026/components/promo-carousel.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const PromoCarousel = registerClientReference(\n    function() { throw new Error(\"Attempted to call PromoCarousel() from the server but PromoCarousel is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/promo-carousel.tsx\",\n    \"PromoCarousel\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,gBAAgB,IAAA,wQAAuB,EAChD;IAAa,MAAM,IAAI,MAAM;AAA0O,GACvQ,2CACA","ignoreList":[0]}},
    {"offset": {"line": 184, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 192, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Martin/Desktop/PROYECTOS/Tienda-Blama-2026/features/products/services/products.server.ts"],"sourcesContent":["import { createClient } from \"@supabase/supabase-js\"\r\nimport type { Category, Product } from \"@/features/products/types\"\r\n\r\nfunction createAnonServerClient() {\r\n    const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL\r\n    const supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY\r\n    if (!supabaseUrl || !supabaseAnonKey) return null\r\n    return createClient(supabaseUrl, supabaseAnonKey, {\r\n        auth: { persistSession: false },\r\n    })\r\n}\r\n\r\nexport async function fetchProductForMeta(id: number) {\r\n    const supabase = createAnonServerClient()\r\n    if (!supabase) return null\r\n\r\n    const { data, error } = await supabase\r\n        .from(\"productos\")\r\n        .select(\"id, nombre, descripcion, imagen_url, imagenes\")\r\n        .eq(\"id\", id)\r\n        .maybeSingle()\r\n\r\n    if (error) return null\r\n    return data\r\n}\r\n\r\nexport async function getHomePageData(opts: {\r\n    selectedCategorySlug?: string\r\n    productsLimit: number\r\n}) {\r\n    const supabase = createAnonServerClient()\r\n    if (!supabase) {\r\n        return {\r\n            categories: [] as Category[],\r\n            products: [] as Product[],\r\n            bestSellers: [] as Product[],\r\n            offers: [] as Product[],\r\n            productsError: null as any,\r\n        }\r\n    }\r\n\r\n    const { data: categories } = await supabase.from(\"categorias\").select(\"*\").order(\"nombre\", { ascending: true })\r\n\r\n\r\n    const selectedCategorySlug = String(opts.selectedCategorySlug || \"\").trim()\r\n    const selectedCategory = (categories as Category[] | null)?.find((c) => c.slug === selectedCategorySlug)\r\n\r\n    let productsQuery = supabase.from(\"productos\").select(\"*\").order(\"created_at\", { ascending: false })\r\n    productsQuery = productsQuery.limit(opts.productsLimit)\r\n\r\n    if ((selectedCategory as any)?.id) {\r\n        const catId = (selectedCategory as any).id\r\n        const allCats = (categories as any[]) || []\r\n        const childIds = allCats.filter(c => c.parent_id === catId).map(c => c.id)\r\n        const ids = [catId, ...childIds]\r\n        productsQuery = productsQuery.in(\"categoria_id\", ids)\r\n    }\r\n    const { data: products, error: productsError } = await productsQuery\r\n\r\n    let bestSellers: Product[] = []\r\n    let offers: Product[] = []\r\n\r\n    try {\r\n        const { data: soldItems, error: soldItemsError } = await supabase\r\n            .from(\"pedido_items\")\r\n            .select(`\r\n        cantidad,\r\n        productos (*),\r\n        pedidos (status)\r\n      `)\r\n            .limit(1000)\r\n\r\n        if (!soldItemsError && soldItems && soldItems.length > 0) {\r\n            const soldByProductId = new Map<number, { product: Product; sold: number }>()\r\n\r\n            for (const row of soldItems as any[]) {\r\n                const status: string | undefined = row.pedidos?.status\r\n                if (status && [\"Fallido\", \"Devuelto\"].includes(status)) continue\r\n\r\n                const product: Product | null | undefined = row.productos\r\n                if (!product) continue\r\n\r\n                const productId = product.id\r\n                const qty = Number(row.cantidad) || 0\r\n                if (qty <= 0) continue\r\n\r\n                const current = soldByProductId.get(productId)\r\n                if (current) {\r\n                    current.sold += qty\r\n                } else {\r\n                    soldByProductId.set(productId, { product, sold: qty })\r\n                }\r\n            }\r\n\r\n            bestSellers = Array.from(soldByProductId.values())\r\n                .sort((a, b) => b.sold - a.sold)\r\n                .slice(0, 10)\r\n                .map((x) => x.product)\r\n        }\r\n    } catch (err) {\r\n        bestSellers = []\r\n    }\r\n\r\n    try {\r\n        const { data: offersRaw, error: offersError } = await supabase\r\n            .from(\"productos\")\r\n            .select(\"*\")\r\n            .not(\"precio_antes\", \"is\", null)\r\n            .limit(60)\r\n\r\n        if (!offersError && offersRaw && offersRaw.length > 0) {\r\n            offers = (offersRaw as Product[])\r\n                .filter((p) => {\r\n                    const before = Number((p as any)?.precio_antes ?? 0)\r\n                    const current = Number((p as any)?.precio ?? 0)\r\n                    return Number.isFinite(before) && Number.isFinite(current) && before > current && current > 0\r\n                })\r\n                .sort((a, b) => {\r\n                    const beforeA = Number((a as any)?.precio_antes ?? 0)\r\n                    const currentA = Number((a as any)?.precio ?? 0)\r\n                    const beforeB = Number((b as any)?.precio_antes ?? 0)\r\n                    const currentB = Number((b as any)?.precio ?? 0)\r\n                    const discA = beforeA > 0 ? (beforeA - currentA) / beforeA : 0\r\n                    const discB = beforeB > 0 ? (beforeB - currentB) / beforeB : 0\r\n                    return discB - discA\r\n                })\r\n                .slice(0, 6)\r\n        }\r\n    } catch (err) {\r\n        offers = []\r\n    }\r\n\r\n    const visibleCategories = ((categories as Category[]) || []).filter((c: any) => !c.parent_id)\r\n\r\n    return {\r\n        categories: visibleCategories,\r\n        products: (products as Product[] | null) || [],\r\n        bestSellers,\r\n        offers,\r\n        productsError,\r\n    }\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 318, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Martin/Desktop/PROYECTOS/Tienda-Blama-2026/components/store-location.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const StoreLocation = registerClientReference(\n    function() { throw new Error(\"Attempted to call StoreLocation() from the server but StoreLocation is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/store-location.tsx <module evaluation>\",\n    \"StoreLocation\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,gBAAgB,IAAA,wQAAuB,EAChD;IAAa,MAAM,IAAI,MAAM;AAA0O,GACvQ,+DACA","ignoreList":[0]}},
    {"offset": {"line": 332, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Martin/Desktop/PROYECTOS/Tienda-Blama-2026/components/store-location.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const StoreLocation = registerClientReference(\n    function() { throw new Error(\"Attempted to call StoreLocation() from the server but StoreLocation is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/store-location.tsx\",\n    \"StoreLocation\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,gBAAgB,IAAA,wQAAuB,EAChD;IAAa,MAAM,IAAI,MAAM;AAA0O,GACvQ,2CACA","ignoreList":[0]}},
    {"offset": {"line": 346, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 354, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Martin/Desktop/PROYECTOS/Tienda-Blama-2026/app/page.tsx"],"sourcesContent":["import type { Metadata } from \"next\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { ProductCard } from \"@/components/product-card\"\r\nimport { PromoCarousel } from \"@/components/promo-carousel\"\r\nimport Link from \"next/link\"\r\nimport { slugify } from \"@/lib/utils\"\r\nimport { getHomePageData } from \"@/features/products/services/products.server\"\r\nimport { StoreLocation } from \"@/components/store-location\"\r\n\r\nconst HOME_PRODUCTS_LIMIT = 12\r\n\r\n\r\n\r\nexport const metadata: Metadata = {\r\n  title: \"Tienda Online Premium\",\r\n  description:\r\n    \"Blama.shop es una tienda online en Perú con productos seleccionados, compras simples y atención rápida por WhatsApp. Descubre novedades, ofertas y envíos a domicilio.\",\r\n  alternates: {\r\n    canonical: \"/\",\r\n  },\r\n  openGraph: {\r\n    title: \"Blama.shop | Tienda Online Premium\",\r\n    description:\r\n      \"Compra en Blama.shop: productos seleccionados, ofertas y atención rápida por WhatsApp. Envíos a domicilio y experiencia de compra simple.\",\r\n    url: \"/\",\r\n    type: \"website\",\r\n    locale: \"es_ES\",\r\n    siteName: \"Blama.shop\",\r\n  },\r\n  twitter: {\r\n    card: \"summary_large_image\",\r\n    title: \"Blama.shop | Tienda Online Premium\",\r\n    description:\r\n      \"Tienda online en Perú con atención rápida por WhatsApp. Novedades, ofertas y envíos a domicilio.\",\r\n  },\r\n}\r\n\r\nexport const revalidate = 300 // Disable cache for real-time feel (optional, better for dev)\r\n\r\nexport default async function Home({\r\n  searchParams,\r\n}: {\r\n  searchParams?:\r\n  | Record<string, string | string[] | undefined>\r\n  | Promise<Record<string, string | string[] | undefined>>\r\n}) {\r\n  const resolvedSearchParams:\r\n    | Record<string, string | string[] | undefined>\r\n    | undefined =\r\n    searchParams && typeof (searchParams as any).then === 'function'\r\n      ? await (searchParams as Promise<Record<string, string | string[] | undefined>>)\r\n      : (searchParams as Record<string, string | string[] | undefined> | undefined)\r\n\r\n  const rawCat = resolvedSearchParams?.cat\r\n  const selectedCategorySlug = (Array.isArray(rawCat) ? rawCat[0] : rawCat || '').trim()\r\n\r\n  const { categories, products, bestSellers, offers, productsError } = await getHomePageData({\r\n    selectedCategorySlug,\r\n    productsLimit: HOME_PRODUCTS_LIMIT,\r\n  })\r\n\r\n  if (productsError) {\r\n    console.error(\"Error fetching products:\", productsError)\r\n    return <div className=\"p-4 text-red-500\">Error cargando productos. Revisa tu conexión a Supabase.</div>\r\n  }\r\n\r\n  return (\r\n    <main className=\"pb-20 font-sans\">\r\n\r\n      <section className=\"p-4\">\r\n        <PromoCarousel />\r\n      </section>\r\n\r\n\r\n\r\n      {bestSellers.length > 0 && (\r\n        <section className=\"p-4 px-2\" data-nosnippet>\r\n          <div className=\"flex justify-between items-center mb-4 px-2\">\r\n            <h3 className=\"text-lg font-bold text-foreground\">Lo más vendido</h3>\r\n            <Button asChild variant=\"link\" size=\"sm\" className=\"text-muted-foreground hover:text-primary\">\r\n              <Link href=\"/productos\">Ver todo</Link>\r\n            </Button>\r\n          </div>\r\n          <div className=\"grid grid-cols-2 gap-3 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5\">\r\n            {bestSellers.slice(0, 6).map((product, idx) => (\r\n              <ProductCard key={`bestseller-${product.id}`} product={product} imagePriority={idx < 2} />\r\n            ))}\r\n          </div>\r\n        </section>\r\n      )}\r\n\r\n      {offers.length > 0 && (\r\n        <section className=\"p-4 px-2\" data-nosnippet>\r\n          <div className=\"flex justify-between items-center mb-4 px-2\">\r\n            <div className=\"flex flex-col\">\r\n              <h3 className=\"text-lg font-bold text-foreground\">Ofertas</h3>\r\n              <span className=\"text-xs text-muted-foreground\">Aprovecha descuento por tiempo limitado</span>\r\n            </div>\r\n            <Button asChild variant=\"link\" size=\"sm\" className=\"text-muted-foreground hover:text-primary\">\r\n              <Link href=\"/productos\">Ver todo</Link>\r\n            </Button>\r\n          </div>\r\n          <div className=\"grid grid-cols-2 gap-3 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5\">\r\n            {offers.slice(0, 6).map((product, idx) => (\r\n              <ProductCard key={`offer-${product.id}`} product={product} imagePriority={idx < 1} />\r\n            ))}\r\n          </div>\r\n        </section>\r\n      )}\r\n\r\n      {/* Product Grid */}\r\n      <section className=\"p-4 px-2\" data-nosnippet>\r\n        <div className=\"flex justify-between items-center mb-4 px-2\">\r\n          <div className=\"flex flex-col\">\r\n            <h3 className=\"text-lg font-bold text-foreground\">Novedades</h3>\r\n            <span className=\"text-xs text-muted-foreground\">Últimos productos agregados</span>\r\n          </div>\r\n          <Button asChild variant=\"link\" size=\"sm\" className=\"text-muted-foreground hover:text-primary\">\r\n            <Link href=\"/productos\">Ver todo</Link>\r\n          </Button>\r\n        </div>\r\n\r\n        {categories && categories.length > 0 && (\r\n          <div className=\"flex gap-2 overflow-x-auto px-2 pb-3\">\r\n            <Button\r\n              asChild\r\n              variant={!selectedCategorySlug ? 'secondary' : 'outline'}\r\n              size=\"sm\"\r\n              className=\"shrink-0\"\r\n            >\r\n              <Link href=\"/\">Todos</Link>\r\n            </Button>\r\n            {categories.map((cat) => (\r\n              <Button\r\n                key={cat.id}\r\n                asChild\r\n                variant={cat.slug === selectedCategorySlug ? 'secondary' : 'outline'}\r\n                size=\"sm\"\r\n                className=\"shrink-0\"\r\n              >\r\n                <Link href={`/?cat=${encodeURIComponent(cat.slug)}`}>{cat.nombre}</Link>\r\n              </Button>\r\n            ))}\r\n          </div>\r\n        )}\r\n\r\n        {!products || products.length === 0 ? (\r\n          <div className=\"text-center py-10 text-gray-500\">\r\n            <p>No hay productos disponibles.</p>\r\n            <p className=\"text-xs mt-2 text-gray-400\">Ejecuta el script de seed.sql en Supabase.</p>\r\n          </div>\r\n        ) : (\r\n          <div className=\"grid grid-cols-2 gap-3 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5\">\r\n            {products.slice(0, 12).map((product, idx) => (\r\n              <ProductCard key={product.id} product={product} imagePriority={idx < 2} />\r\n            ))}\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"mt-6 flex justify-center\">\r\n          <Button asChild className=\"rounded-xl\">\r\n            <Link href=\"/productos\">Ver todos los productos</Link>\r\n          </Button>\r\n        </div>\r\n      </section>\r\n\r\n      <StoreLocation />\r\n    </main>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}}]
}