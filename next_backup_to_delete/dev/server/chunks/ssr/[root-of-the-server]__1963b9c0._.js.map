{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Martin/Desktop/PROYECTOS/Tienda-Blama-2026/features/cart/cart-animation.ts"],"sourcesContent":["\r\nimport { create } from 'zustand'\r\n\r\nexport interface AnimationItem {\r\n  id: string\r\n  src: string\r\n  startRect: DOMRect\r\n}\r\n\r\ninterface CartAnimationState {\r\n  cartButtonRef: HTMLButtonElement | null\r\n  animations: AnimationItem[]\r\n  bumpTimestamp: number\r\n  registerCartButton: (ref: HTMLButtonElement | null) => void\r\n  startAnimation: (src: string, startRect: DOMRect) => void\r\n  removeAnimation: (id: string) => void\r\n  triggerBump: () => void\r\n  isCartOpen: boolean\r\n  setCartOpen: (open: boolean) => void\r\n}\r\n\r\nexport const useCartAnimationStore = create<CartAnimationState>((set) => ({\r\n  cartButtonRef: null,\r\n  animations: [],\r\n  bumpTimestamp: 0,\r\n  registerCartButton: (ref) => set({ cartButtonRef: ref }),\r\n  startAnimation: (src, startRect) => {\r\n    const id = Math.random().toString(36).substring(7)\r\n    set((state) => ({\r\n      animations: [...state.animations, { id, src, startRect }],\r\n    }))\r\n  },\r\n  removeAnimation: (id) =>\r\n    set((state) => ({\r\n      animations: state.animations.filter((a) => a.id !== id),\r\n    })),\r\n  triggerBump: () => set({ bumpTimestamp: Date.now() }),\r\n  isCartOpen: false,\r\n  setCartOpen: (open: boolean) => set({ isCartOpen: open }),\r\n}))\r\n"],"names":[],"mappings":";;;;AACA;;AAoBO,MAAM,wBAAwB,IAAA,kJAAM,EAAqB,CAAC,MAAQ,CAAC;QACxE,eAAe;QACf,YAAY,EAAE;QACd,eAAe;QACf,oBAAoB,CAAC,MAAQ,IAAI;gBAAE,eAAe;YAAI;QACtD,gBAAgB,CAAC,KAAK;YACpB,MAAM,KAAK,KAAK,MAAM,GAAG,QAAQ,CAAC,IAAI,SAAS,CAAC;YAChD,IAAI,CAAC,QAAU,CAAC;oBACd,YAAY;2BAAI,MAAM,UAAU;wBAAE;4BAAE;4BAAI;4BAAK;wBAAU;qBAAE;gBAC3D,CAAC;QACH;QACA,iBAAiB,CAAC,KAChB,IAAI,CAAC,QAAU,CAAC;oBACd,YAAY,MAAM,UAAU,CAAC,MAAM,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;gBACtD,CAAC;QACH,aAAa,IAAM,IAAI;gBAAE,eAAe,KAAK,GAAG;YAAG;QACnD,YAAY;QACZ,aAAa,CAAC,OAAkB,IAAI;gBAAE,YAAY;YAAK;IACzD,CAAC"}},
    {"offset": {"line": 69, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Martin/Desktop/PROYECTOS/Tienda-Blama-2026/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from \"clsx\"\r\nimport { twMerge } from \"tailwind-merge\"\r\n\r\nconst currencyFormatter = new Intl.NumberFormat('es-PE', {\r\n  style: 'currency',\r\n  currency: 'PEN',\r\n  minimumFractionDigits: 2,\r\n  maximumFractionDigits: 2,\r\n})\r\n\r\nexport function cn(...inputs: ClassValue[]) {\r\n  return twMerge(clsx(inputs))\r\n}\r\n\r\nexport function formatCurrency(value: number | string | null | undefined) {\r\n  const num = typeof value === 'string' ? Number(value) : value ?? 0\r\n  const safe = Number.isFinite(num) ? num : 0\r\n  return currencyFormatter.format(safe)\r\n}\r\n\r\nexport function slugify(input: string) {\r\n  return String(input || '')\r\n    .normalize('NFD')\r\n    .replace(/[\\u0300-\\u036f]/g, '')\r\n    .toLowerCase()\r\n    .trim()\r\n    .replace(/[^a-z0-9]+/g, '-')\r\n    .replace(/(^-|-$)/g, '')\r\n}\r\n"],"names":[],"mappings":";;;;;;;;AAAA;AACA;;;AAEA,MAAM,oBAAoB,IAAI,KAAK,YAAY,CAAC,SAAS;IACvD,OAAO;IACP,UAAU;IACV,uBAAuB;IACvB,uBAAuB;AACzB;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,sKAAO,EAAC,IAAA,6IAAI,EAAC;AACtB;AAEO,SAAS,eAAe,KAAyC;IACtE,MAAM,MAAM,OAAO,UAAU,WAAW,OAAO,SAAS,SAAS;IACjE,MAAM,OAAO,OAAO,QAAQ,CAAC,OAAO,MAAM;IAC1C,OAAO,kBAAkB,MAAM,CAAC;AAClC;AAEO,SAAS,QAAQ,KAAa;IACnC,OAAO,OAAO,SAAS,IACpB,SAAS,CAAC,OACV,OAAO,CAAC,oBAAoB,IAC5B,WAAW,GACX,IAAI,GACJ,OAAO,CAAC,eAAe,KACvB,OAAO,CAAC,YAAY;AACzB"}},
    {"offset": {"line": 102, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Martin/Desktop/PROYECTOS/Tienda-Blama-2026/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport { Slot } from \"@radix-ui/react-slot\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst buttonVariants = cva(\r\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\r\n        destructive:\r\n          \"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60\",\r\n        outline:\r\n          \"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50\",\r\n        secondary:\r\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\r\n        ghost:\r\n          \"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50\",\r\n        link: \"text-primary underline-offset-4 hover:underline\",\r\n      },\r\n      size: {\r\n        default: \"h-9 px-4 py-2 has-[>svg]:px-3\",\r\n        sm: \"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5\",\r\n        lg: \"h-10 rounded-md px-6 has-[>svg]:px-4\",\r\n        icon: \"size-9\",\r\n        \"icon-sm\": \"size-8\",\r\n        \"icon-lg\": \"size-10\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n      size: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nfunction Button({\r\n  className,\r\n  variant = \"default\",\r\n  size = \"default\",\r\n  asChild = false,\r\n  ...props\r\n}: React.ComponentProps<\"button\"> &\r\n  VariantProps<typeof buttonVariants> & {\r\n    asChild?: boolean\r\n  }) {\r\n  const Comp = asChild ? Slot : \"button\"\r\n\r\n  return (\r\n    <Comp\r\n      data-slot=\"button\"\r\n      data-variant={variant}\r\n      data-size={size}\r\n      className={cn(buttonVariants({ variant, size, className }))}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Button, buttonVariants }\r\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,IAAA,uKAAG,EACxB,+bACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;YACN,WAAW;YACX,WAAW;QACb;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,UAAU,SAAS,EACnB,OAAO,SAAS,EAChB,UAAU,KAAK,EACf,GAAG,OAIF;IACD,MAAM,OAAO,UAAU,wKAAI,GAAG;IAE9B,qBACE,8OAAC;QACC,aAAU;QACV,gBAAc;QACd,aAAW;QACX,WAAW,IAAA,kHAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 163, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 169, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Martin/Desktop/PROYECTOS/Tienda-Blama-2026/features/cart/store.ts"],"sourcesContent":["import { create } from \"zustand\"\r\nimport { persist } from \"zustand/middleware\"\r\n\r\nimport type { CartState } from \"@/features/cart/types\"\r\n\r\nexport const useCartStore = create<CartState>()(\r\n    persist(\r\n        (set, get) => ({\r\n            items: [],\r\n            total: 0,\r\n            addItem: (product, variant) => {\r\n                set((state) => {\r\n                    const items = state.items\r\n                    const variantId = variant?.id ?? null\r\n                    const existingItem = items.find(\r\n                        (item) => item.id === product.id && (item.producto_variante_id ?? null) === variantId\r\n                    )\r\n\r\n                    const effectivePrice = Number(variant?.precio ?? product.precio)\r\n                    const effectivePriceBefore = (variant?.precio_antes ?? (product as any).precio_antes ?? null) as number | null\r\n                    const varianteNombre = variant?.etiqueta ?? null\r\n\r\n                    const nextItems = existingItem\r\n                        ? items.map((item) =>\r\n                              item.id === product.id && (item.producto_variante_id ?? null) === variantId\r\n                                  ? { ...item, quantity: item.quantity + 1 }\r\n                                  : item\r\n                          )\r\n                        : [\r\n                              ...items,\r\n                              {\r\n                                  ...product,\r\n                                  precio: effectivePrice,\r\n                                  precio_antes: effectivePriceBefore,\r\n                                  producto_variante_id: variantId,\r\n                                  variante_nombre: varianteNombre,\r\n                                  quantity: 1,\r\n                              },\r\n                          ]\r\n\r\n                    const total = nextItems.reduce((sum, item) => sum + item.precio * item.quantity, 0)\r\n                    return { items: nextItems, total }\r\n                })\r\n            },\r\n            removeItem: (productId, variantId) => {\r\n                const v = variantId ?? null\r\n                set((state) => {\r\n                    const nextItems = state.items.filter(\r\n                        (item) => !(item.id === productId && (item.producto_variante_id ?? null) === v)\r\n                    )\r\n                    const total = nextItems.reduce((sum, item) => sum + item.precio * item.quantity, 0)\r\n                    return { items: nextItems, total }\r\n                })\r\n            },\r\n            updateQuantity: (productId, quantity, variantId) => {\r\n                const v = variantId ?? null\r\n                if (quantity <= 0) {\r\n                    get().removeItem(productId, v)\r\n                    return\r\n                }\r\n                set((state) => {\r\n                    const nextItems = state.items.map((item) =>\r\n                        item.id === productId && (item.producto_variante_id ?? null) === v\r\n                            ? { ...item, quantity }\r\n                            : item\r\n                    )\r\n                    const total = nextItems.reduce((sum, item) => sum + item.precio * item.quantity, 0)\r\n                    return { items: nextItems, total }\r\n                })\r\n            },\r\n            clearCart: () => set({ items: [], total: 0 }),\r\n        }),\r\n        {\r\n            name: \"cart-storage\",\r\n        }\r\n    )\r\n)\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAIO,MAAM,eAAe,IAAA,kJAAM,IAC9B,IAAA,wJAAO,EACH,CAAC,KAAK,MAAQ,CAAC;QACX,OAAO,EAAE;QACT,OAAO;QACP,SAAS,CAAC,SAAS;YACf,IAAI,CAAC;gBACD,MAAM,QAAQ,MAAM,KAAK;gBACzB,MAAM,YAAY,SAAS,MAAM;gBACjC,MAAM,eAAe,MAAM,IAAI,CAC3B,CAAC,OAAS,KAAK,EAAE,KAAK,QAAQ,EAAE,IAAI,CAAC,KAAK,oBAAoB,IAAI,IAAI,MAAM;gBAGhF,MAAM,iBAAiB,OAAO,SAAS,UAAU,QAAQ,MAAM;gBAC/D,MAAM,uBAAwB,SAAS,gBAAgB,AAAC,QAAgB,YAAY,IAAI;gBACxF,MAAM,iBAAiB,SAAS,YAAY;gBAE5C,MAAM,YAAY,eACZ,MAAM,GAAG,CAAC,CAAC,OACP,KAAK,EAAE,KAAK,QAAQ,EAAE,IAAI,CAAC,KAAK,oBAAoB,IAAI,IAAI,MAAM,YAC5D;wBAAE,GAAG,IAAI;wBAAE,UAAU,KAAK,QAAQ,GAAG;oBAAE,IACvC,QAEV;uBACO;oBACH;wBACI,GAAG,OAAO;wBACV,QAAQ;wBACR,cAAc;wBACd,sBAAsB;wBACtB,iBAAiB;wBACjB,UAAU;oBACd;iBACH;gBAEP,MAAM,QAAQ,UAAU,MAAM,CAAC,CAAC,KAAK,OAAS,MAAM,KAAK,MAAM,GAAG,KAAK,QAAQ,EAAE;gBACjF,OAAO;oBAAE,OAAO;oBAAW;gBAAM;YACrC;QACJ;QACA,YAAY,CAAC,WAAW;YACpB,MAAM,IAAI,aAAa;YACvB,IAAI,CAAC;gBACD,MAAM,YAAY,MAAM,KAAK,CAAC,MAAM,CAChC,CAAC,OAAS,CAAC,CAAC,KAAK,EAAE,KAAK,aAAa,CAAC,KAAK,oBAAoB,IAAI,IAAI,MAAM,CAAC;gBAElF,MAAM,QAAQ,UAAU,MAAM,CAAC,CAAC,KAAK,OAAS,MAAM,KAAK,MAAM,GAAG,KAAK,QAAQ,EAAE;gBACjF,OAAO;oBAAE,OAAO;oBAAW;gBAAM;YACrC;QACJ;QACA,gBAAgB,CAAC,WAAW,UAAU;YAClC,MAAM,IAAI,aAAa;YACvB,IAAI,YAAY,GAAG;gBACf,MAAM,UAAU,CAAC,WAAW;gBAC5B;YACJ;YACA,IAAI,CAAC;gBACD,MAAM,YAAY,MAAM,KAAK,CAAC,GAAG,CAAC,CAAC,OAC/B,KAAK,EAAE,KAAK,aAAa,CAAC,KAAK,oBAAoB,IAAI,IAAI,MAAM,IAC3D;wBAAE,GAAG,IAAI;wBAAE;oBAAS,IACpB;gBAEV,MAAM,QAAQ,UAAU,MAAM,CAAC,CAAC,KAAK,OAAS,MAAM,KAAK,MAAM,GAAG,KAAK,QAAQ,EAAE;gBACjF,OAAO;oBAAE,OAAO;oBAAW;gBAAM;YACrC;QACJ;QACA,WAAW,IAAM,IAAI;gBAAE,OAAO,EAAE;gBAAE,OAAO;YAAE;IAC/C,CAAC,GACD;IACI,MAAM;AACV"}},
    {"offset": {"line": 249, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Martin/Desktop/PROYECTOS/Tienda-Blama-2026/features/cart/index.ts"],"sourcesContent":["export * from \"@/features/cart/types\"\r\nexport * from \"@/features/cart/store\"\r\n"],"names":[],"mappings":";AAAA;AACA"}},
    {"offset": {"line": 258, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Martin/Desktop/PROYECTOS/Tienda-Blama-2026/components/ui/input.tsx"],"sourcesContent":["import * as React from \"react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nfunction Input({ className, type, ...props }: React.ComponentProps<\"input\">) {\r\n  return (\r\n    <input\r\n      type={type}\r\n      data-slot=\"input\"\r\n      className={cn(\r\n        \"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\r\n        \"focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]\",\r\n        \"aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Input }\r\n"],"names":[],"mappings":";;;;;AAEA;;;AAEA,SAAS,MAAM,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAsC;IACzE,qBACE,8OAAC;QACC,MAAM;QACN,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,8bACA,iFACA,0GACA;QAED,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 283, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Martin/Desktop/PROYECTOS/Tienda-Blama-2026/components/ui/label.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nfunction Label({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof LabelPrimitive.Root>) {\r\n  return (\r\n    <LabelPrimitive.Root\r\n      data-slot=\"label\"\r\n      className={cn(\r\n        \"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Label }\r\n"],"names":[],"mappings":";;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,MAAM,EACb,SAAS,EACT,GAAG,OAC8C;IACjD,qBACE,8OAAC,yKAAmB;QAClB,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,uNACA;QAED,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 310, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 316, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Martin/Desktop/PROYECTOS/Tienda-Blama-2026/lib/supabaseClient.ts"],"sourcesContent":["\r\nimport { createClient } from '@supabase/supabase-js'\r\n\r\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL!\r\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\r\n\r\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey)\r\n"],"names":[],"mappings":";;;;AACA;;AAEA,MAAM;AACN,MAAM;AAEC,MAAM,WAAW,IAAA,8LAAY,EAAC,aAAa"}},
    {"offset": {"line": 329, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Martin/Desktop/PROYECTOS/Tienda-Blama-2026/features/checkout/services/coupons.client.ts"],"sourcesContent":["import { supabase } from \"@/lib/supabaseClient\"\r\n\r\nimport type { ValidateCouponResult } from \"@/features/checkout/types\"\r\n\r\nexport async function validateCoupon(rawCode: string, subtotal: number): Promise<ValidateCouponResult> {\r\n    const code = String(rawCode || \"\").trim()\r\n    if (!code) {\r\n        return { descuento: 0, codigo: null }\r\n    }\r\n\r\n    const { data, error } = await supabase\r\n        .from(\"cupones\")\r\n        .select(\"*\")\r\n        .ilike(\"codigo\", code)\r\n        .limit(1)\r\n        .maybeSingle()\r\n\r\n    if (error) throw new Error(error.message)\r\n    if (!data) throw new Error(\"Cup√≥n inv√°lido\")\r\n    if (!data.activo) throw new Error(\"Cup√≥n inactivo\")\r\n    if (Number(subtotal) < Number(data.min_total || 0)) throw new Error(\"El cup√≥n no aplica para este total\")\r\n\r\n    const now = new Date()\r\n    if (data.starts_at) {\r\n        const starts = new Date(data.starts_at)\r\n        if (now < starts) throw new Error(\"El cup√≥n a√∫n no est√° disponible\")\r\n    }\r\n    if (data.expires_at) {\r\n        const expires = new Date(data.expires_at)\r\n        if (now > expires) throw new Error(\"El cup√≥n expir√≥\")\r\n    }\r\n    if (data.max_usos != null && data.usos != null && Number(data.usos) >= Number(data.max_usos)) {\r\n        throw new Error(\"El cup√≥n ya alcanz√≥ el m√°ximo de usos\")\r\n    }\r\n\r\n    let descuento = 0\r\n    const valor = Number(data.valor) || 0\r\n\r\n    if (data.tipo === \"porcentaje\") {\r\n        descuento = subtotal * (valor / 100)\r\n    } else {\r\n        descuento = valor\r\n    }\r\n\r\n    descuento = Math.max(0, Math.min(subtotal, Math.round(descuento * 100) / 100))\r\n\r\n    return { descuento, codigo: data.codigo as string }\r\n}\r\n\r\nexport function isCouponRelatedError(message: string) {\r\n    const m = String(message || \"\").toLowerCase()\r\n    return (\r\n        m.includes(\"cup√≥n\") ||\r\n        m.includes(\"cupon\") ||\r\n        m.includes(\"agotado\") ||\r\n        m.includes(\"expir\") ||\r\n        m.includes(\"inval\") ||\r\n        m.includes(\"no aplica\") ||\r\n        m.includes(\"a√∫n no\")\r\n    )\r\n}\r\n"],"names":[],"mappings":";;;;;;AAAA;;AAIO,eAAe,eAAe,OAAe,EAAE,QAAgB;IAClE,MAAM,OAAO,OAAO,WAAW,IAAI,IAAI;IACvC,IAAI,CAAC,MAAM;QACP,OAAO;YAAE,WAAW;YAAG,QAAQ;QAAK;IACxC;IAEA,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,iIAAQ,CACjC,IAAI,CAAC,WACL,MAAM,CAAC,KACP,KAAK,CAAC,UAAU,MAChB,KAAK,CAAC,GACN,WAAW;IAEhB,IAAI,OAAO,MAAM,IAAI,MAAM,MAAM,OAAO;IACxC,IAAI,CAAC,MAAM,MAAM,IAAI,MAAM;IAC3B,IAAI,CAAC,KAAK,MAAM,EAAE,MAAM,IAAI,MAAM;IAClC,IAAI,OAAO,YAAY,OAAO,KAAK,SAAS,IAAI,IAAI,MAAM,IAAI,MAAM;IAEpE,MAAM,MAAM,IAAI;IAChB,IAAI,KAAK,SAAS,EAAE;QAChB,MAAM,SAAS,IAAI,KAAK,KAAK,SAAS;QACtC,IAAI,MAAM,QAAQ,MAAM,IAAI,MAAM;IACtC;IACA,IAAI,KAAK,UAAU,EAAE;QACjB,MAAM,UAAU,IAAI,KAAK,KAAK,UAAU;QACxC,IAAI,MAAM,SAAS,MAAM,IAAI,MAAM;IACvC;IACA,IAAI,KAAK,QAAQ,IAAI,QAAQ,KAAK,IAAI,IAAI,QAAQ,OAAO,KAAK,IAAI,KAAK,OAAO,KAAK,QAAQ,GAAG;QAC1F,MAAM,IAAI,MAAM;IACpB;IAEA,IAAI,YAAY;IAChB,MAAM,QAAQ,OAAO,KAAK,KAAK,KAAK;IAEpC,IAAI,KAAK,IAAI,KAAK,cAAc;QAC5B,YAAY,WAAW,CAAC,QAAQ,GAAG;IACvC,OAAO;QACH,YAAY;IAChB;IAEA,YAAY,KAAK,GAAG,CAAC,GAAG,KAAK,GAAG,CAAC,UAAU,KAAK,KAAK,CAAC,YAAY,OAAO;IAEzE,OAAO;QAAE;QAAW,QAAQ,KAAK,MAAM;IAAW;AACtD;AAEO,SAAS,qBAAqB,OAAe;IAChD,MAAM,IAAI,OAAO,WAAW,IAAI,WAAW;IAC3C,OACI,EAAE,QAAQ,CAAC,YACX,EAAE,QAAQ,CAAC,YACX,EAAE,QAAQ,CAAC,cACX,EAAE,QAAQ,CAAC,YACX,EAAE,QAAQ,CAAC,YACX,EAAE,QAAQ,CAAC,gBACX,EAAE,QAAQ,CAAC;AAEnB"}},
    {"offset": {"line": 383, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Martin/Desktop/PROYECTOS/Tienda-Blama-2026/features/checkout/services/checkout.client.ts"],"sourcesContent":["import type { CreateOrderPayload, CreateOrderResponse } from \"@/features/checkout/types\"\r\n\r\nexport async function createCheckoutOrder(payload: CreateOrderPayload) {\r\n    const res = await fetch(\"/api/checkout/whatsapp\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify(payload),\r\n    })\r\n\r\n    let json: CreateOrderResponse | null = null\r\n    try {\r\n        json = (await res.json()) as CreateOrderResponse\r\n    } catch (err) {\r\n        json = null\r\n    }\r\n\r\n    if (!res.ok || !json || (json as any)?.ok !== true) {\r\n        const baseMsg = String((json as any)?.error || \"No se pudo crear el pedido\")\r\n        const missing = Array.isArray((json as any)?.missing) ? ((json as any).missing as string[]) : null\r\n        const msg = missing && missing.length > 0 ? `${baseMsg}. Falta configurar: ${missing.join(\", \")}` : baseMsg\r\n        throw new Error(msg)\r\n    }\r\n\r\n    const orderId = Number((json as any)?.orderId ?? 0)\r\n    if (!orderId) {\r\n        throw new Error(\"No se pudo crear el pedido\")\r\n    }\r\n\r\n    return {\r\n        orderId,\r\n        subtotal: Number((json as any)?.subtotal ?? 0),\r\n        descuento: Number((json as any)?.descuento ?? 0),\r\n        total: Number((json as any)?.total ?? 0),\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AAEO,eAAe,oBAAoB,OAA2B;IACjE,MAAM,MAAM,MAAM,MAAM,0BAA0B;QAC9C,QAAQ;QACR,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,MAAM,KAAK,SAAS,CAAC;IACzB;IAEA,IAAI,OAAmC;IACvC,IAAI;QACA,OAAQ,MAAM,IAAI,IAAI;IAC1B,EAAE,OAAO,KAAK;QACV,OAAO;IACX;IAEA,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,QAAQ,AAAC,MAAc,OAAO,MAAM;QAChD,MAAM,UAAU,OAAO,AAAC,MAAc,SAAS;QAC/C,MAAM,UAAU,MAAM,OAAO,CAAE,MAAc,WAAY,AAAC,KAAa,OAAO,GAAgB;QAC9F,MAAM,MAAM,WAAW,QAAQ,MAAM,GAAG,IAAI,GAAG,QAAQ,oBAAoB,EAAE,QAAQ,IAAI,CAAC,OAAO,GAAG;QACpG,MAAM,IAAI,MAAM;IACpB;IAEA,MAAM,UAAU,OAAO,AAAC,MAAc,WAAW;IACjD,IAAI,CAAC,SAAS;QACV,MAAM,IAAI,MAAM;IACpB;IAEA,OAAO;QACH;QACA,UAAU,OAAO,AAAC,MAAc,YAAY;QAC5C,WAAW,OAAO,AAAC,MAAc,aAAa;QAC9C,OAAO,OAAO,AAAC,MAAc,SAAS;IAC1C;AACJ"}},
    {"offset": {"line": 422, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Martin/Desktop/PROYECTOS/Tienda-Blama-2026/features/checkout/utils/device.ts"],"sourcesContent":["export function isInAppBrowser() {\r\n    const ua = String(navigator?.userAgent || \"\")\r\n    const uaLower = ua.toLowerCase()\r\n\r\n    if (uaLower.includes(\"fban\") || uaLower.includes(\"fbav\")) return true\r\n    if (uaLower.includes(\"instagram\")) return true\r\n    if (uaLower.includes(\"tiktok\")) return true\r\n    if (uaLower.includes(\"snapchat\")) return true\r\n    if (uaLower.includes(\"pinterest\")) return true\r\n    if (uaLower.includes(\"linkedinapp\")) return true\r\n    if (uaLower.includes(\"wv\") || uaLower.includes(\"; wv\")) return true\r\n    if (uaLower.includes(\"webview\")) return true\r\n    return false\r\n}\r\n\r\nexport function isMobileDevice() {\r\n    const ua = String(navigator?.userAgent || \"\").toLowerCase()\r\n    if (ua.includes(\"android\")) return true\r\n    if (ua.includes(\"iphone\") || ua.includes(\"ipad\") || ua.includes(\"ipod\")) return true\r\n    try {\r\n        if (window.matchMedia && window.matchMedia(\"(pointer: coarse)\").matches) return true\r\n    } catch (err) {\r\n    }\r\n    return false\r\n}\r\n"],"names":[],"mappings":";;;;;;AAAO,SAAS;IACZ,MAAM,KAAK,OAAO,WAAW,aAAa;IAC1C,MAAM,UAAU,GAAG,WAAW;IAE9B,IAAI,QAAQ,QAAQ,CAAC,WAAW,QAAQ,QAAQ,CAAC,SAAS,OAAO;IACjE,IAAI,QAAQ,QAAQ,CAAC,cAAc,OAAO;IAC1C,IAAI,QAAQ,QAAQ,CAAC,WAAW,OAAO;IACvC,IAAI,QAAQ,QAAQ,CAAC,aAAa,OAAO;IACzC,IAAI,QAAQ,QAAQ,CAAC,cAAc,OAAO;IAC1C,IAAI,QAAQ,QAAQ,CAAC,gBAAgB,OAAO;IAC5C,IAAI,QAAQ,QAAQ,CAAC,SAAS,QAAQ,QAAQ,CAAC,SAAS,OAAO;IAC/D,IAAI,QAAQ,QAAQ,CAAC,YAAY,OAAO;IACxC,OAAO;AACX;AAEO,SAAS;IACZ,MAAM,KAAK,OAAO,WAAW,aAAa,IAAI,WAAW;IACzD,IAAI,GAAG,QAAQ,CAAC,YAAY,OAAO;IACnC,IAAI,GAAG,QAAQ,CAAC,aAAa,GAAG,QAAQ,CAAC,WAAW,GAAG,QAAQ,CAAC,SAAS,OAAO;IAChF,IAAI;QACA,IAAI,OAAO,UAAU,IAAI,OAAO,UAAU,CAAC,qBAAqB,OAAO,EAAE,OAAO;IACpF,EAAE,OAAO,KAAK,CACd;IACA,OAAO;AACX"}},
    {"offset": {"line": 454, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Martin/Desktop/PROYECTOS/Tienda-Blama-2026/features/checkout/utils/whatsapp.ts"],"sourcesContent":["import { formatCurrency } from \"@/lib/utils\"\r\n\r\nimport type { CheckoutItem } from \"@/features/checkout/types\"\r\n\r\nexport function normalizeDigits(value: unknown) {\r\n    return String(value ?? \"\").replace(/\\D/g, \"\")\r\n}\r\n\r\nexport function normalizeDni(value: unknown) {\r\n    return normalizeDigits(value).slice(0, 8)\r\n}\r\n\r\nexport function buildWhatsAppPreviewMessage(input: {\r\n    name: string\r\n    dni: string\r\n    phone: string\r\n    address: string\r\n    reference?: string\r\n    locationLink?: string\r\n    items: CheckoutItem[]\r\n    subtotal: number\r\n    discount: number\r\n    total: number\r\n    couponCode?: string | null\r\n    shippingMethod?: string\r\n}) {\r\n    const { name, dni, phone, address, reference, locationLink, items, subtotal, discount, total, couponCode, shippingMethod } = input\r\n\r\n    let message = `¬°Hola! Soy ${name || \"Cliente\"}. Quiero confirmar mi pedido: üõçÔ∏è\\n`\r\n    message += `*DATOS DE ENV√çO*:\\n`\r\n    if (shippingMethod) message += `M√©todo Env√≠o: ${shippingMethod === 'lima' ? 'Lima' : 'Provincia'}\\n`\r\n    message += `Cliente: ${name}\\n`\r\n    message += `DNI: ${dni}\\n`\r\n    message += `Tel√©fono: ${phone}\\n`\r\n    message += `Direcci√≥n: ${address || \"\"}\\n`\r\n    if (reference) message += `Referencia: ${reference}\\n`\r\n    if (locationLink) message += `Ubicaci√≥n: ${locationLink}\\n`\r\n    message += `\\n*DETALLE DEL PEDIDO:*\\n`\r\n    items.forEach((item) => {\r\n        message += `‚Ä¢ ${item.quantity} x ${item.nombre} - ${formatCurrency(item.precio * item.quantity)}\\n`\r\n    })\r\n    if (discount > 0 && couponCode) {\r\n        message += `\\n*SUBTOTAL: ${formatCurrency(subtotal)}*`\r\n        message += `\\n*CUP√ìN (${couponCode}): -${formatCurrency(discount)}*`\r\n    }\r\n    message += `\\n*TOTAL: ${formatCurrency(total)}*`\r\n\r\n    return message\r\n}\r\n\r\nexport function buildWhatsAppFinalMessage(input: {\r\n    orderIdFormatted: string\r\n    name: string\r\n    dni: string\r\n    phone: string\r\n    address: string\r\n    reference?: string\r\n    locationLink?: string\r\n    items: CheckoutItem[]\r\n    subtotal: number\r\n    discount: number\r\n    total: number\r\n    couponCode?: string | null\r\n    shippingMethod?: string\r\n}) {\r\n    const { orderIdFormatted, name, dni, phone, address, reference, locationLink, items, subtotal, discount, total, couponCode, shippingMethod } = input\r\n\r\n    let message = `¬°Hola! Soy ${name}. Quiero confirmar mi pedido: üõçÔ∏è\\n`\r\n    message += `üìã *Pedido #${orderIdFormatted}*\\n\\n`\r\n    message += `*DATOS DE ENV√çO* üì¶\\n`\r\n    if (shippingMethod) message += `üöö *M√©todo:* ${shippingMethod === 'lima' ? 'Lima' : 'Provincia'}\\n`\r\n    message += `üë§ *Cliente:* ${name}\\n`\r\n    message += `ü™™ *DNI:* ${dni}\\n`\r\n    message += `üì± *Tel√©fono:* ${phone}\\n`\r\n    message += `üìç *Direcci√≥n:* ${address}\\n`\r\n    if (reference) message += `üè† *Referencia:* ${reference}\\n`\r\n    if (locationLink) message += `üó∫Ô∏è *Ubicaci√≥n:* ${locationLink}\\n`\r\n\r\n    message += `\\n--------------------------------\\n\\n`\r\n    message += `*DETALLE DEL PEDIDO:*\\n`\r\n    items.forEach((item) => {\r\n        const vName = item.variante_nombre ? ` (${String(item.variante_nombre)})` : \"\"\r\n        message += `‚Ä¢ ${item.quantity} x ${item.nombre}${vName}\\n   Sub: ${formatCurrency(item.precio * item.quantity)}\\n`\r\n    })\r\n    message += `\\n--------------------------------\\n`\r\n    if (discount > 0 && couponCode) {\r\n        message += `üíµ *SUBTOTAL: ${formatCurrency(subtotal)}*\\n`\r\n        message += `üè∑Ô∏è *CUP√ìN (${couponCode}): -${formatCurrency(discount)}*\\n`\r\n    }\r\n    message += `üí∞ *TOTAL A PAGAR: ${formatCurrency(total)}*`\r\n\r\n    return message\r\n}\r\n\r\nexport function buildWhatsAppUrl(phone: string, text: string) {\r\n    return `https://api.whatsapp.com/send/?phone=${encodeURIComponent(phone)}&text=${encodeURIComponent(text)}&type=phone_number&app_absent=0`\r\n}\r\n\r\nexport function buildPreOpenUrl(phone: string, text: string) {\r\n    return `/open-wa?phone=${encodeURIComponent(phone)}&text=${encodeURIComponent(text)}&auto=1`\r\n}\r\n\r\nexport function setLastOrderSuccessMarker(orderIdFormatted: string) {\r\n    try {\r\n        localStorage.setItem(\"blama_last_order_success\", JSON.stringify({ orderId: orderIdFormatted, ts: Date.now() }))\r\n    } catch (err) {\r\n    }\r\n\r\n    try {\r\n        const payload = encodeURIComponent(JSON.stringify({ orderId: orderIdFormatted, ts: Date.now() }))\r\n        const isHttps = typeof window !== \"undefined\" && window.location.protocol === \"https:\"\r\n        document.cookie = `blama_last_order_success=${payload}; Max-Age=${60 * 30}; Path=/; SameSite=Lax${isHttps ? \"; Secure\" : \"\"}`\r\n    } catch (err) {\r\n    }\r\n}\r\n\r\nexport function clearCartStorage() {\r\n    try {\r\n        localStorage.removeItem(\"cart-storage\")\r\n    } catch (err) {\r\n    }\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 559, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Martin/Desktop/PROYECTOS/Tienda-Blama-2026/features/checkout/index.ts"],"sourcesContent":["export * from \"@/features/checkout/types\"\r\nexport * from \"@/features/checkout/services/coupons.client\"\r\nexport * from \"@/features/checkout/services/checkout.client\"\r\nexport * from \"@/features/checkout/utils/device\"\r\nexport * from \"@/features/checkout/utils/whatsapp\"\r\n"],"names":[],"mappings":";AAAA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 574, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Martin/Desktop/PROYECTOS/Tienda-Blama-2026/components/checkout-form.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useState } from \"react\"\r\nimport { useLoadScript } from \"@react-google-maps/api\"\r\nimport usePlacesAutocomplete, {\r\n    getGeocode,\r\n    getLatLng,\r\n} from \"use-places-autocomplete\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { Input } from \"@/components/ui/input\"\r\nimport { Label } from \"@/components/ui/label\"\r\nimport { ArrowLeft, Loader2, MapPin } from \"lucide-react\"\r\nimport { formatCurrency } from \"@/lib/utils\"\r\nimport {\r\n    buildPreOpenUrl,\r\n    buildWhatsAppFinalMessage,\r\n    buildWhatsAppPreviewMessage,\r\n    buildWhatsAppUrl,\r\n    clearCartStorage,\r\n    createCheckoutOrder,\r\n    isCouponRelatedError,\r\n    isInAppBrowser,\r\n    isMobileDevice,\r\n    normalizeDigits,\r\n    normalizeDni,\r\n    setLastOrderSuccessMarker,\r\n    validateCoupon,\r\n} from \"@/features/checkout\"\r\n\r\n// Define libraries array outside component to prevent re-renders\r\nconst libraries: (\"places\")[] = [\"places\"];\r\n\r\ninterface CheckoutFormProps {\r\n    items: any[]\r\n    total: number\r\n    onBack: () => void\r\n    onComplete: () => void\r\n}\r\n\r\nexport function CheckoutForm({ items, total, onBack, onComplete }: CheckoutFormProps) {\r\n    const { isLoaded } = useLoadScript({\r\n        googleMapsApiKey: process.env.NEXT_PUBLIC_GOOGLE_MAPS_API_KEY || \"\",\r\n        libraries: libraries,\r\n    })\r\n\r\n    if (!isLoaded) {\r\n        return (\r\n            <div className=\"flex flex-col items-center justify-center h-48 space-y-4\">\r\n                <Loader2 className=\"h-8 w-8 animate-spin text-primary\" />\r\n                <p className=\"text-sm text-muted-foreground\">Cargando mapa...</p>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    return <FormContent items={items} total={total} onBack={onBack} onComplete={onComplete} />\r\n}\r\n\r\n\r\nfunction FormContent({ items, total, onBack, onComplete }: CheckoutFormProps) {\r\n    const [name, setName] = useState(\"\")\r\n    const [shippingMethod, setShippingMethod] = useState(\"lima\")\r\n    const [phone, setPhone] = useState(\"\")\r\n    const [phoneError, setPhoneError] = useState(\"\")\r\n    const [dni, setDni] = useState(\"\")\r\n    const [dniError, setDniError] = useState(\"\")\r\n    const [reference, setReference] = useState(\"\")\r\n    const [locationLink, setLocationLink] = useState(\"\")\r\n    const [isSubmitting, setIsSubmitting] = useState(false)\r\n    const [waPromptOpen, setWaPromptOpen] = useState(false)\r\n    const [waUrl, setWaUrl] = useState<string | null>(null)\r\n    const [couponCode, setCouponCode] = useState(\"\")\r\n    const [couponDiscount, setCouponDiscount] = useState(0)\r\n    const [couponApplying, setCouponApplying] = useState(false)\r\n    const [couponError, setCouponError] = useState(\"\")\r\n    const [couponApplied, setCouponApplied] = useState(false)\r\n\r\n    const {\r\n        ready,\r\n        value,\r\n        setValue,\r\n        suggestions: { status, data },\r\n        clearSuggestions,\r\n    } = usePlacesAutocomplete({\r\n        requestOptions: {\r\n            componentRestrictions: { country: \"pe\" },\r\n        },\r\n    })\r\n\r\n    const handleSelect = async (address: string) => {\r\n        setValue(address, false)\r\n        clearSuggestions()\r\n\r\n        try {\r\n            const results = await getGeocode({ address })\r\n            const { lat, lng } = await getLatLng(results[0])\r\n            setLocationLink(`https://www.google.com/maps/?q=${lat},${lng}`)\r\n        } catch (error) {\r\n            console.error(\"Error: \", error)\r\n        }\r\n    }\r\n\r\n    const handlePhoneChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const raw = e.target.value.replace(/\\D/g, \"\").slice(0, 9)\r\n        setPhone(raw)\r\n        if (phoneError) setPhoneError(\"\")\r\n    }\r\n\r\n    const subtotalAmount = Number(total) || 0\r\n    const discountAmount = Math.max(0, Math.min(subtotalAmount, Number(couponDiscount) || 0))\r\n    const totalToPay = Math.max(0, Math.round((subtotalAmount - discountAmount) * 100) / 100)\r\n\r\n\r\n    const handleApplyCoupon = async () => {\r\n        setCouponError(\"\")\r\n        setCouponApplying(true)\r\n        setCouponApplied(false)\r\n        try {\r\n            const res = await validateCoupon(couponCode, subtotalAmount)\r\n            setCouponDiscount(res.descuento)\r\n            setCouponApplied(res.descuento > 0)\r\n        } catch (err: any) {\r\n            setCouponDiscount(0)\r\n            setCouponApplied(false)\r\n            setCouponError(err?.message || 'No se pudo aplicar el cup√≥n')\r\n        } finally {\r\n            setCouponApplying(false)\r\n        }\r\n    }\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault()\r\n        setIsSubmitting(true)\r\n\r\n        setCouponError(\"\")\r\n        setDniError(\"\")\r\n\r\n        const normalizedPhone = phone.replace(/\\D/g, \"\")\r\n        if (normalizedPhone.length !== 9) {\r\n            setPhoneError('El celular debe tener 9 d√≠gitos')\r\n            setIsSubmitting(false)\r\n            return\r\n        }\r\n\r\n        const normalizedDni = normalizeDni(dni)\r\n        if (normalizedDni.length !== 8) {\r\n            setDniError('El DNI debe tener 8 d√≠gitos')\r\n            setIsSubmitting(false)\r\n            return\r\n        }\r\n\r\n        let appliedCouponCode: string | null = null\r\n        let appliedDiscount = discountAmount\r\n        if (couponCode.trim()) {\r\n            try {\r\n                const res = await validateCoupon(couponCode, subtotalAmount)\r\n                appliedCouponCode = res.codigo\r\n                appliedDiscount = res.descuento\r\n            } catch (err: any) {\r\n                setCouponError(err?.message || 'Cup√≥n inv√°lido')\r\n                setIsSubmitting(false)\r\n                return\r\n            }\r\n        }\r\n\r\n        const finalDiscount = Math.max(0, Math.min(subtotalAmount, Number(appliedDiscount) || 0))\r\n        const finalTotal = Math.max(0, Math.round((subtotalAmount - finalDiscount) * 100) / 100)\r\n\r\n        const checkoutItems = (Array.isArray(items) ? items : []).map((it: any) => ({\r\n            id: Number(it?.id ?? 0),\r\n            quantity: Number(it?.quantity ?? 0),\r\n            precio: Number(it?.precio ?? 0),\r\n            nombre: String(it?.nombre ?? ''),\r\n            producto_variante_id: (it as any)?.producto_variante_id ?? null,\r\n            variante_nombre: (it as any)?.variante_nombre ?? null,\r\n        }))\r\n\r\n        // Construimos el mensaje del pedido SYNCRONAMENTE usando los datos del formulario\r\n        // y los items disponibles. De esta forma podemos abrir la URL de WhatsApp\r\n        // en una nueva pesta√±a inmediatamente (evento de usuario) y evitar bloqueos.\r\n        const messageClientePreview = buildWhatsAppPreviewMessage({\r\n            name: name || 'Cliente',\r\n            dni: normalizedDni,\r\n            phone,\r\n            address: value || '',\r\n            reference,\r\n            locationLink,\r\n            items: checkoutItems,\r\n            subtotal: subtotalAmount,\r\n            discount: finalDiscount,\r\n            total: finalTotal,\r\n            couponCode: appliedCouponCode,\r\n            shippingMethod,\r\n        })\r\n\r\n        const phoneNumberClienteInit = process.env.NEXT_PUBLIC_WHATSAPP_TIENDA || \"982432561\";\r\n\r\n        // Abrimos WhatsApp DIRECTO por API (sin p√°ginas intermedias) en una pesta√±a nueva\r\n        // para que la tienda no se cierre.\r\n        // Pre-abrimos la pesta√±a en blanco durante el click del usuario para minimizar bloqueos.\r\n        const inApp = isInAppBrowser()\r\n        const isMobile = isMobileDevice()\r\n        let popup: Window | null = null\r\n        if (!inApp && isMobile) {\r\n            const preUrl = buildPreOpenUrl(phoneNumberClienteInit, messageClientePreview)\r\n            popup = window.open(preUrl, '_blank', 'noopener,noreferrer')\r\n            if (popup) {\r\n                try {\r\n                    ; (popup as any).opener = null\r\n                } catch (err) {\r\n                }\r\n            }\r\n        }\r\n\r\n\r\n        try {\r\n            const normalizedPhone = normalizeDigits(phone)\r\n\r\n            const { orderId: newOrderId } = await createCheckoutOrder({\r\n                name,\r\n                phone: normalizedPhone,\r\n                dni: normalizedDni,\r\n                address: value,\r\n                reference,\r\n                locationLink,\r\n                couponCode: appliedCouponCode,\r\n                discountAmount: finalDiscount,\r\n                shippingMethod,\r\n                items: checkoutItems.map((it) => ({\r\n                    id: it.id,\r\n                    quantity: it.quantity,\r\n                    precio: it.precio,\r\n                    nombre: it.nombre,\r\n                    producto_variante_id: it.producto_variante_id ?? null,\r\n                    variante_nombre: it.variante_nombre ?? null,\r\n                })),\r\n            })\r\n\r\n            // E. WhatsApp mensaje al cliente\r\n            const phoneNumberCliente = process.env.NEXT_PUBLIC_WHATSAPP_TIENDA || \"982432561\"\r\n            const orderIdFormatted = newOrderId.toString().padStart(6, '0')\r\n\r\n            const messageCliente = buildWhatsAppFinalMessage({\r\n                orderIdFormatted,\r\n                name,\r\n                dni: normalizedDni,\r\n                phone,\r\n                address: value,\r\n                reference,\r\n                locationLink,\r\n                items: checkoutItems,\r\n                subtotal: subtotalAmount,\r\n                discount: finalDiscount,\r\n                total: finalTotal,\r\n                couponCode: appliedCouponCode,\r\n                shippingMethod,\r\n            })\r\n\r\n            // F. ‚≠ê NOTIFICACI√ìN AUTOM√ÅTICA AL ADMIN (Twilio)\r\n            try {\r\n                const notifyRes = await fetch('/api/notify-admin', {\r\n                    method: 'POST',\r\n                    headers: { 'Content-Type': 'application/json' },\r\n                    body: JSON.stringify({\r\n                        orderId: orderIdFormatted,\r\n                        clientName: name,\r\n                        clientDni: normalizedDni,\r\n                        clientPhone: phone,\r\n                        address: `${value} ${reference ? `(Ref: ${reference})` : ''}`,\r\n                        items: items,\r\n                        total: finalTotal,\r\n                        panelLink: `${window.location.origin}/admin/pedidos/${newOrderId}`\r\n                    })\r\n                })\r\n                let notifyJson: any = null\r\n                try {\r\n                    notifyJson = await notifyRes.json()\r\n                } catch (err) {\r\n                    notifyJson = null\r\n                }\r\n                if (!notifyRes.ok) {\r\n                    console.error('Admin notification failed:', notifyRes.status, notifyJson)\r\n                } else {\r\n                    console.log('Admin notification response:', notifyJson)\r\n                }\r\n            } catch (notifyError) {\r\n                // No bloqueamos el flujo si falla la notificaci√≥n\r\n                console.error('Error sending admin notification:', notifyError)\r\n            }\r\n\r\n            // G. Preparar enlace de WhatsApp final (incluye id de pedido).\r\n            const urlCliente = buildWhatsAppUrl(phoneNumberCliente, messageCliente)\r\n\r\n            setLastOrderSuccessMarker(orderIdFormatted)\r\n            clearCartStorage()\r\n\r\n            onComplete()\r\n\r\n            try {\r\n                if (inApp || !isMobile) {\r\n                    window.location.href = urlCliente\r\n                } else if (popup && !popup.closed) {\r\n                    popup.location.href = urlCliente\r\n                } else {\r\n                    const opened = window.open(urlCliente, '_blank')\r\n                    if (!opened) {\r\n                        setWaUrl(urlCliente)\r\n                        setWaPromptOpen(true)\r\n                    }\r\n                }\r\n            } catch (err) {\r\n                setWaUrl(urlCliente)\r\n                setWaPromptOpen(true)\r\n            }\r\n\r\n        } catch (error: any) {\r\n            console.error(\"Error al procesar:\", error)\r\n\r\n            const msg = String(error?.message || '')\r\n            if (isCouponRelatedError(msg)) {\r\n                setCouponDiscount(0)\r\n                setCouponApplied(false)\r\n                setCouponError(\r\n                    `El cup√≥n ya no est√° disponible o no es v√°lido en este momento. ` +\r\n                    `Vuelve a intentar aplicar el cup√≥n o usa otro.\\n\\nDetalle: ${msg}`\r\n                )\r\n            } else {\r\n                alert(\"Error al procesar el pedido: \" + msg)\r\n            }\r\n        } finally {\r\n            setIsSubmitting(false)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <form onSubmit={handleSubmit} className=\"flex flex-col h-full\">\r\n                <div className=\"p-4 border-b flex items-center gap-2 bg-popover\">\r\n                    <Button type=\"button\" variant=\"ghost\" size=\"icon\" onClick={onBack} disabled={isSubmitting} className=\"h-8 w-8 hover:bg-popover/80\">\r\n                        <ArrowLeft className=\"h-4 w-4\" />\r\n                    </Button>\r\n                    <h3 className=\"font-semibold text-foreground\">Datos de Env√≠o</h3>\r\n                </div>\r\n\r\n                <div className=\"flex-1 overflow-y-auto p-4 space-y-4\">\r\n                    <div className=\"space-y-3\">\r\n                        <Label className=\"text-base\">M√©todo de envi√≥ gratuito <span className=\"text-destructive\">*</span></Label>\r\n                        <div className=\"flex flex-col gap-2 pl-1\">\r\n                            <label className=\"flex items-center gap-2 cursor-pointer\">\r\n                                <input\r\n                                    type=\"radio\"\r\n                                    name=\"shipping\"\r\n                                    value=\"lima\"\r\n                                    checked={shippingMethod === 'lima'}\r\n                                    onChange={(e) => setShippingMethod(e.target.value)}\r\n                                    className=\"accent-black h-4 w-4\"\r\n                                />\r\n                                <span className=\"text-sm font-medium\">Lima</span>\r\n                            </label>\r\n                            <label className=\"flex items-center gap-2 cursor-pointer\">\r\n                                <input\r\n                                    type=\"radio\"\r\n                                    name=\"shipping\"\r\n                                    value=\"provincia\"\r\n                                    checked={shippingMethod === 'provincia'}\r\n                                    onChange={(e) => setShippingMethod(e.target.value)}\r\n                                    className=\"accent-black h-4 w-4\"\r\n                                />\r\n                                <span className=\"text-sm font-medium\">Provincia</span>\r\n                            </label>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"space-y-2\">\r\n                        <Label htmlFor=\"name\">Nombre Completo</Label>\r\n                        <Input id=\"name\" required placeholder=\"Juan P√©rez\" value={name} onChange={(e) => setName(e.target.value)} disabled={isSubmitting} />\r\n                    </div>\r\n\r\n                    <div className=\"space-y-2\">\r\n                        <Label htmlFor=\"phone\">Celular</Label>\r\n                        <Input\r\n                            id=\"phone\"\r\n                            required\r\n                            type=\"tel\"\r\n                            inputMode=\"numeric\"\r\n                            pattern=\"[0-9]{9}\"\r\n                            minLength={9}\r\n                            maxLength={9}\r\n                            placeholder=\"999 999 999\"\r\n                            value={phone}\r\n                            onChange={handlePhoneChange}\r\n                            disabled={isSubmitting}\r\n                            onInvalid={(e) => {\r\n                                e.currentTarget.setCustomValidity('Ingresa un n√∫mero de celular v√°lido de 9 d√≠gitos')\r\n                            }}\r\n                            onInput={(e) => {\r\n                                e.currentTarget.setCustomValidity('')\r\n                            }}\r\n                        />\r\n                        {phoneError && <p className=\"text-xs text-destructive\">{phoneError}</p>}\r\n                    </div>\r\n\r\n                    <div className=\"space-y-2\">\r\n                        <Label htmlFor=\"dni\">DNI</Label>\r\n                        <Input\r\n                            id=\"dni\"\r\n                            required\r\n                            inputMode=\"numeric\"\r\n                            pattern=\"[0-9]{8}\"\r\n                            minLength={8}\r\n                            maxLength={8}\r\n                            placeholder=\"12345678\"\r\n                            value={dni}\r\n                            onChange={(e) => {\r\n                                const next = e.target.value.replace(/\\D/g, '').slice(0, 8)\r\n                                setDni(next)\r\n                                if (dniError) setDniError(\"\")\r\n                            }}\r\n                            onInvalid={(e) => {\r\n                                e.currentTarget.setCustomValidity('Ingresa un DNI v√°lido de 8 d√≠gitos')\r\n                            }}\r\n                            onInput={(e) => {\r\n                                e.currentTarget.setCustomValidity('')\r\n                            }}\r\n                            disabled={isSubmitting}\r\n                        />\r\n                        {dniError && <p className=\"text-xs text-destructive\">{dniError}</p>}\r\n                    </div>\r\n\r\n                    <div className=\"space-y-2 relative\">\r\n                        <Label htmlFor=\"address\">Direcci√≥n (Google Maps)</Label>\r\n                        <div className=\"relative\">\r\n                            <MapPin className=\"absolute left-3 top-3 h-4 w-4 text-muted-foreground\" />\r\n                            <Input\r\n                                id=\"address\"\r\n                                value={value}\r\n                                onChange={(e) => setValue(e.target.value)}\r\n                                disabled={!ready || isSubmitting}\r\n                                placeholder=\"Escribe tu direcci√≥n...\"\r\n                                className=\"pl-9\"\r\n                                autoComplete=\"off\"\r\n                            />\r\n                        </div>\r\n                        {status === \"OK\" && (\r\n                            <ul className=\"absolute z-10 w-full bg-card border border-border rounded-md shadow-lg mt-1 max-h-60 overflow-auto\">\r\n                                {data.map(({ place_id, description }) => (\r\n                                    <li key={place_id} onClick={() => handleSelect(description)} className=\"px-4 py-2 hover:bg-popover cursor-pointer text-sm text-muted-foreground\">\r\n                                        {description}\r\n                                    </li>\r\n                                ))}\r\n                            </ul>\r\n                        )}\r\n                    </div>\r\n\r\n                    <div className=\"space-y-2\">\r\n                        <Label htmlFor=\"reference\">Referencia (Opcional)</Label>\r\n                        <Input id=\"reference\" placeholder=\"Frente al parque, casa azul...\" value={reference} onChange={(e) => setReference(e.target.value)} disabled={isSubmitting} />\r\n                    </div>\r\n\r\n                    {!process.env.NEXT_PUBLIC_GOOGLE_MAPS_API_KEY && (\r\n                        <div className=\"text-xs text-amber-600 bg-amber-50 p-2 rounded\">‚ö†Ô∏è Nota: Autocompletado deshabilitado. Falta API Key.</div>\r\n                    )}\r\n                </div>\r\n\r\n                <div className=\"p-4 border-t mt-auto bg-popover\">\r\n                    <div className=\"space-y-3 mb-4\">\r\n                        <div className=\"space-y-2\">\r\n                            <Label htmlFor=\"coupon\">Cup√≥n de descuento (Opcional)</Label>\r\n                            <div className=\"flex gap-2\">\r\n                                <Input\r\n                                    id=\"coupon\"\r\n                                    placeholder=\"Ej: PROMO10\"\r\n                                    value={couponCode}\r\n                                    onChange={(e) => {\r\n                                        setCouponCode(e.target.value)\r\n                                        setCouponApplied(false)\r\n                                        setCouponError(\"\")\r\n                                    }}\r\n                                    disabled={isSubmitting}\r\n                                />\r\n                                <Button type=\"button\" variant=\"outline\" onClick={handleApplyCoupon} disabled={isSubmitting || couponApplying}>\r\n                                    {couponApplying ? <Loader2 className=\"h-4 w-4 animate-spin\" /> : \"Aplicar\"}\r\n                                </Button>\r\n                            </div>\r\n                            {couponError && (\r\n                                <p className=\"text-xs text-destructive\">{couponError}</p>\r\n                            )}\r\n                            {couponApplied && !couponError && (\r\n                                <p className=\"text-xs text-green-600\">Cup√≥n aplicado</p>\r\n                            )}\r\n                        </div>\r\n\r\n                        <div className=\"text-sm font-medium space-y-1\">\r\n                            <div className=\"flex justify-between items-center\">\r\n                                <span>Subtotal:</span>\r\n                                <span>{formatCurrency(subtotalAmount)}</span>\r\n                            </div>\r\n                            <div className=\"flex justify-between items-center\">\r\n                                <span>Descuento:</span>\r\n                                <span>-{formatCurrency(discountAmount)}</span>\r\n                            </div>\r\n                            <div className=\"flex justify-between items-center\">\r\n                                <span>Total a Pagar:</span>\r\n                                <span className=\"text-lg font-bold\">{formatCurrency(totalToPay)}</span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <Button type=\"submit\" className=\"w-full bg-green-600 hover:bg-green-700 h-12 text-base font-bold\" disabled={isSubmitting}>\r\n                        {isSubmitting ? <><Loader2 className=\"mr-2 h-4 w-4 animate-spin\" /> Procesando...</> : \"Confirmar Pedido en WhatsApp\"}\r\n                    </Button>\r\n                </div>\r\n            </form>\r\n            {waPromptOpen && waUrl && (\r\n                <div className=\"fixed inset-0 z-50 flex items-end md:items-center justify-center p-4\">\r\n                    <div className=\"w-full max-w-xl bg-card border border-border rounded-lg shadow-lg p-4\">\r\n                        <h3 className=\"text-lg font-semibold text-foreground\">Abrir WhatsApp</h3>\r\n                        <p className=\"text-sm text-muted-foreground mt-2\">Pulsa el bot√≥n para abrir tu pedido en WhatsApp.</p>\r\n                        <div className=\"mt-4 flex gap-3\">\r\n                            <a href={waUrl} target=\"_blank\" rel=\"noopener noreferrer\" className=\"inline-flex items-center justify-center px-4 py-2 bg-green-600 text-white rounded-md\">Abrir WhatsApp</a>\r\n                            <button onClick={() => { setWaPromptOpen(false); setWaUrl(null) }} className=\"px-4 py-2 border border-border rounded-md\">Cerrar</button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </>\r\n    )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1536, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Martin/Desktop/PROYECTOS/Tienda-Blama-2026/components/ui/sheet.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\r\nimport { XIcon } from \"lucide-react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nfunction Sheet({ ...props }: React.ComponentProps<typeof SheetPrimitive.Root>) {\r\n  return <SheetPrimitive.Root data-slot=\"sheet\" {...props} />\r\n}\r\n\r\nfunction SheetTrigger({\r\n  ...props\r\n}: React.ComponentProps<typeof SheetPrimitive.Trigger>) {\r\n  return <SheetPrimitive.Trigger data-slot=\"sheet-trigger\" {...props} />\r\n}\r\n\r\nfunction SheetClose({\r\n  ...props\r\n}: React.ComponentProps<typeof SheetPrimitive.Close>) {\r\n  return <SheetPrimitive.Close data-slot=\"sheet-close\" {...props} />\r\n}\r\n\r\nfunction SheetPortal({\r\n  ...props\r\n}: React.ComponentProps<typeof SheetPrimitive.Portal>) {\r\n  return <SheetPrimitive.Portal data-slot=\"sheet-portal\" {...props} />\r\n}\r\n\r\nfunction SheetOverlay({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof SheetPrimitive.Overlay>) {\r\n  return (\r\n    <SheetPrimitive.Overlay\r\n      data-slot=\"sheet-overlay\"\r\n      className={cn(\r\n        \"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction SheetContent({\r\n  className,\r\n  children,\r\n  side = \"right\",\r\n  ...props\r\n}: React.ComponentProps<typeof SheetPrimitive.Content> & {\r\n  side?: \"top\" | \"right\" | \"bottom\" | \"left\"\r\n}) {\r\n  return (\r\n    <SheetPortal>\r\n      <SheetOverlay />\r\n      <SheetPrimitive.Content\r\n        data-slot=\"sheet-content\"\r\n        className={cn(\r\n          \"bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500\",\r\n          side === \"right\" &&\r\n            \"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm\",\r\n          side === \"left\" &&\r\n            \"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm\",\r\n          side === \"top\" &&\r\n            \"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b\",\r\n          side === \"bottom\" &&\r\n            \"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t\",\r\n          className\r\n        )}\r\n        {...props}\r\n      >\r\n        {children}\r\n        <SheetPrimitive.Close className=\"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none\">\r\n          <XIcon className=\"size-4\" />\r\n          <span className=\"sr-only\">Close</span>\r\n        </SheetPrimitive.Close>\r\n      </SheetPrimitive.Content>\r\n    </SheetPortal>\r\n  )\r\n}\r\n\r\nfunction SheetHeader({ className, ...props }: React.ComponentProps<\"div\">) {\r\n  return (\r\n    <div\r\n      data-slot=\"sheet-header\"\r\n      className={cn(\"flex flex-col gap-1.5 p-4\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction SheetFooter({ className, ...props }: React.ComponentProps<\"div\">) {\r\n  return (\r\n    <div\r\n      data-slot=\"sheet-footer\"\r\n      className={cn(\"mt-auto flex flex-col gap-2 p-4\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction SheetTitle({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof SheetPrimitive.Title>) {\r\n  return (\r\n    <SheetPrimitive.Title\r\n      data-slot=\"sheet-title\"\r\n      className={cn(\"text-foreground font-semibold\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction SheetDescription({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof SheetPrimitive.Description>) {\r\n  return (\r\n    <SheetPrimitive.Description\r\n      data-slot=\"sheet-description\"\r\n      className={cn(\"text-muted-foreground text-sm\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport {\r\n  Sheet,\r\n  SheetTrigger,\r\n  SheetClose,\r\n  SheetContent,\r\n  SheetHeader,\r\n  SheetFooter,\r\n  SheetTitle,\r\n  SheetDescription,\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAGA;AACA;AAEA;AANA;;;;;AAQA,SAAS,MAAM,EAAE,GAAG,OAAyD;IAC3E,qBAAO,8OAAC,0KAAmB;QAAC,aAAU;QAAS,GAAG,KAAK;;;;;;AACzD;AAEA,SAAS,aAAa,EACpB,GAAG,OACiD;IACpD,qBAAO,8OAAC,6KAAsB;QAAC,aAAU;QAAiB,GAAG,KAAK;;;;;;AACpE;AAEA,SAAS,WAAW,EAClB,GAAG,OAC+C;IAClD,qBAAO,8OAAC,2KAAoB;QAAC,aAAU;QAAe,GAAG,KAAK;;;;;;AAChE;AAEA,SAAS,YAAY,EACnB,GAAG,OACgD;IACnD,qBAAO,8OAAC,4KAAqB;QAAC,aAAU;QAAgB,GAAG,KAAK;;;;;;AAClE;AAEA,SAAS,aAAa,EACpB,SAAS,EACT,GAAG,OACiD;IACpD,qBACE,8OAAC,6KAAsB;QACrB,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,0JACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,aAAa,EACpB,SAAS,EACT,QAAQ,EACR,OAAO,OAAO,EACd,GAAG,OAGJ;IACC,qBACE,8OAAC;;0BACC,8OAAC;;;;;0BACD,8OAAC,6KAAsB;gBACrB,aAAU;gBACV,WAAW,IAAA,kHAAE,EACX,8MACA,SAAS,WACP,oIACF,SAAS,UACP,iIACF,SAAS,SACP,4GACF,SAAS,YACP,qHACF;gBAED,GAAG,KAAK;;oBAER;kCACD,8OAAC,2KAAoB;wBAAC,WAAU;;0CAC9B,8OAAC,yMAAK;gCAAC,WAAU;;;;;;0CACjB,8OAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;;;;;;;;;;;;;AAKpC;AAEA,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,6BAA6B;QAC1C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,mCAAmC;QAChD,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAClB,SAAS,EACT,GAAG,OAC+C;IAClD,qBACE,8OAAC,2KAAoB;QACnB,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,iBAAiB,EACxB,SAAS,EACT,GAAG,OACqD;IACxD,qBACE,8OAAC,iLAA0B;QACzB,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 1714, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Martin/Desktop/PROYECTOS/Tienda-Blama-2026/components/cart-button.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useCartAnimationStore } from \"@/features/cart/cart-animation\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { ShoppingCart, Trash2, Plus, Minus, Image as ImageIcon, CheckCircle } from \"lucide-react\"\r\nimport { useCartStore } from \"@/features/cart\"\r\nimport { useEffect, useState } from \"react\"\r\nimport { CheckoutForm } from \"@/components/checkout-form\"\r\nimport { formatCurrency } from \"@/lib/utils\"\r\nimport {\r\n    Sheet,\r\n    SheetContent,\r\n    SheetHeader,\r\n    SheetTitle,\r\n    SheetTrigger,\r\n    SheetClose,\r\n} from \"@/components/ui/sheet\"\r\n\r\nexport function CartButton() {\r\n    // Use state to avoid hydration mismatch with persisted store\r\n    const [mounted, setMounted] = useState(false)\r\n    const [view, setView] = useState<'cart' | 'checkout' | 'success'>('cart')\r\n    const [successToastOpen, setSuccessToastOpen] = useState(false)\r\n    const [successOrderId, setSuccessOrderId] = useState<string | null>(null)\r\n\r\n    const registerCartButton = useCartAnimationStore((s) => s.registerCartButton)\r\n    const bumpTimestamp = useCartAnimationStore((s) => s.bumpTimestamp)\r\n    const [isBumping, setIsBumping] = useState(false)\r\n\r\n    useEffect(() => {\r\n        if (!bumpTimestamp) return\r\n        setIsBumping(true)\r\n        const t = setTimeout(() => setIsBumping(false), 300)\r\n        return () => clearTimeout(t)\r\n    }, [bumpTimestamp])\r\n\r\n    const items = useCartStore((state) => state.items)\r\n    const removeItem = useCartStore((state) => state.removeItem)\r\n    const updateQuantity = useCartStore((state) => state.updateQuantity)\r\n    const clearCart = useCartStore((state) => state.clearCart)\r\n    const total = useCartStore((state) => state.total)\r\n\r\n    useEffect(() => {\r\n        setMounted(true)\r\n\r\n        const readCookie = (name: string) => {\r\n            try {\r\n                const value = `; ${document.cookie}`\r\n                const parts = value.split(`; ${name}=`)\r\n                if (parts.length < 2) return null\r\n                return parts.pop()!.split(';').shift() || null\r\n            } catch (err) {\r\n                return null\r\n            }\r\n        }\r\n\r\n        const deleteCookie = (name: string) => {\r\n            try {\r\n                const isHttps = typeof window !== 'undefined' && window.location.protocol === 'https:'\r\n                document.cookie = `${name}=; Max-Age=0; Path=/; SameSite=Lax${isHttps ? '; Secure' : ''}`\r\n            } catch (err) {\r\n            }\r\n        }\r\n\r\n        const consumeSuccessMarker = () => {\r\n            try {\r\n                const raw = localStorage.getItem('blama_last_order_success')\r\n                const cookieRaw = raw ? null : readCookie('blama_last_order_success')\r\n                const source = raw ?? (cookieRaw ? decodeURIComponent(cookieRaw) : null)\r\n                if (!source) return\r\n\r\n                const parsed = JSON.parse(source)\r\n                const orderId = parsed?.orderId ? String(parsed.orderId) : null\r\n                const ts = Number(parsed?.ts || 0)\r\n                const isFresh = ts > 0 && Date.now() - ts < 1000 * 60 * 30 // 30 min\r\n                if (!isFresh) {\r\n                    localStorage.removeItem('blama_last_order_success')\r\n                    deleteCookie('blama_last_order_success')\r\n                    return\r\n                }\r\n\r\n                clearCart()\r\n                try {\r\n                    localStorage.removeItem('cart-storage')\r\n                } catch (err) {\r\n                }\r\n                setView('success')\r\n                setSuccessOrderId(orderId)\r\n                setSuccessToastOpen(true)\r\n                localStorage.removeItem('blama_last_order_success')\r\n                deleteCookie('blama_last_order_success')\r\n            } catch (err) {\r\n            }\r\n        }\r\n\r\n        consumeSuccessMarker()\r\n\r\n        const onPageShow = () => consumeSuccessMarker()\r\n        const onFocus = () => consumeSuccessMarker()\r\n        const onVisibility = () => {\r\n            if (document.visibilityState === 'visible') consumeSuccessMarker()\r\n        }\r\n\r\n        window.addEventListener('pageshow', onPageShow)\r\n        window.addEventListener('focus', onFocus)\r\n        document.addEventListener('visibilitychange', onVisibility)\r\n        return () => {\r\n            window.removeEventListener('pageshow', onPageShow)\r\n            window.removeEventListener('focus', onFocus)\r\n            document.removeEventListener('visibilitychange', onVisibility)\r\n        }\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        if (!successToastOpen) return\r\n        const id = window.setTimeout(() => {\r\n            setSuccessToastOpen(false)\r\n        }, 6500)\r\n        return () => window.clearTimeout(id)\r\n    }, [successToastOpen])\r\n\r\n    const totalItems = mounted ? items.reduce((sum, item) => sum + item.quantity, 0) : 0\r\n\r\n    const isCartOpen = useCartAnimationStore((s) => s.isCartOpen)\r\n    const setCartOpen = useCartAnimationStore((s) => s.setCartOpen)\r\n\r\n    const handleOpenChange = (open: boolean) => {\r\n        setCartOpen(open)\r\n        if (!open) {\r\n            // Reset view when closing, unless we are in success (optional)\r\n            setTimeout(() => setView('cart'), 300)\r\n        }\r\n    }\r\n\r\n    const handleComplete = () => {\r\n        clearCart()\r\n        try {\r\n            localStorage.removeItem('cart-storage')\r\n        } catch (err) {\r\n        }\r\n        setView('success')\r\n        setSuccessOrderId(null)\r\n        setSuccessToastOpen(true)\r\n    }\r\n\r\n    const handleContinueShopping = () => {\r\n        setCartOpen(false)\r\n        setView('cart')\r\n    }\r\n\r\n    return (\r\n\r\n        <>\r\n            {successToastOpen && (\r\n                <div className=\"fixed inset-x-0 bottom-4 z-50 flex justify-center px-4\">\r\n                    <div className=\"w-full max-w-md rounded-xl border border-border bg-card shadow-lg p-4\">\r\n                        <div className=\"flex items-start gap-3\">\r\n                            <div className=\"h-10 w-10 rounded-full bg-green-100 flex items-center justify-center text-green-700\">\r\n                                <CheckCircle className=\"h-6 w-6\" />\r\n                            </div>\r\n                            <div className=\"flex-1\">\r\n                                <div className=\"font-semibold text-foreground\">¬°Pedido confirmado!</div>\r\n                                <div className=\"text-sm text-muted-foreground\">\r\n                                    {successOrderId ? `Pedido #${successOrderId}` : 'Tu pedido se registr√≥ correctamente.'}\r\n                                </div>\r\n                            </div>\r\n                            <Button variant=\"ghost\" size=\"icon\" className=\"h-8 w-8\" onClick={() => setSuccessToastOpen(false)}>\r\n                                ‚úï\r\n                            </Button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            <Sheet open={isCartOpen} onOpenChange={handleOpenChange}>\r\n                <SheetTrigger asChild>\r\n                    <Button variant=\"ghost\" className={`relative hover:bg-popover flex items-center gap-2 px-3 h-10 rounded-full border border-border shadow-sm transition-all hover:shadow-md active:scale-95 ${isBumping ? 'scale-110 bg-accent text-accent-foreground ring-2 ring-primary duration-100' : 'duration-300'}`}>\r\n                        <div className=\"relative\" ref={(el) => registerCartButton(el as any)}>\r\n                            <ShoppingCart className=\"h-5 w-5\" />\r\n                            {totalItems > 0 && (\r\n                                <span className=\"absolute -top-2 -right-2 h-4 w-4 bg-red-600 rounded-full text-[10px] font-bold text-white flex items-center justify-center animate-in zoom-in ring-2 ring-ring\">\r\n                                    {totalItems}\r\n                                </span>\r\n                            )}\r\n                        </div>\r\n                        <span className=\"font-bold text-sm text-foreground mr-1\">Carrito</span>\r\n                    </Button>\r\n                </SheetTrigger>\r\n                <SheetContent side=\"right\" className=\"w-[90%] sm:max-w-[400px] flex flex-col p-0\">\r\n\r\n                    <SheetHeader className=\"sr-only\">\r\n                        <SheetTitle>Carrito</SheetTitle>\r\n                    </SheetHeader>\r\n\r\n                    {/* VIEW: SUCCESS */}\r\n                    {view === 'success' && (\r\n                        <div className=\"flex flex-col items-center justify-center h-full space-y-6 text-center animate-in fade-in zoom-in duration-300 p-6\">\r\n                            <div className=\"h-24 w-24 bg-green-100 rounded-full flex items-center justify-center text-green-600 shadow-inner\">\r\n                                <CheckCircle className=\"h-12 w-12\" />\r\n                            </div>\r\n                            <div className=\"space-y-2\">\r\n                                <h3 className=\"text-2xl font-bold text-gray-900\">¬°Pedido Confirmado!</h3>\r\n                                <p className=\"text-gray-500 max-w-[250px] mx-auto text-sm leading-relaxed\">\r\n                                    Tu pedido se registr√≥ correctamente. Ahora se abrir√° WhatsApp para finalizar la confirmaci√≥n. ¬°Gracias por tu preferencia!\r\n                                </p>\r\n                            </div>\r\n\r\n                            <SheetClose asChild>\r\n                                <Button\r\n                                    className=\"w-full max-w-[200px] bg-black hover:bg-gray-800\"\r\n                                    onClick={handleContinueShopping}\r\n                                >\r\n                                    Seguir Comprando\r\n                                </Button>\r\n                            </SheetClose>\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* VIEW: CHECKOUT FORM */}\r\n                    {view === 'checkout' && (\r\n                        <CheckoutForm\r\n                            items={items}\r\n                            total={total}\r\n                            onBack={() => setView('cart')}\r\n                            onComplete={handleComplete}\r\n                        />\r\n                    )}\r\n\r\n                    {/* VIEW: CART LIST (Default) */}\r\n                    {view === 'cart' && (\r\n                        <>\r\n                            <SheetHeader className=\"p-4 border-b\">\r\n                                <SheetTitle className=\"flex items-center gap-2\">\r\n                                    <ShoppingCart className=\"h-5 w-5\" />\r\n                                    Mi Carrito ({totalItems})\r\n                                </SheetTitle>\r\n                            </SheetHeader>\r\n\r\n                            <div className=\"flex-1 overflow-y-auto p-4 space-y-4\">\r\n                                {!mounted ? (\r\n                                    <p className=\"text-center text-muted-foreground mt-10\">Cargando...</p>\r\n                                ) : items.length === 0 ? (\r\n                                    <div className=\"text-center mt-10 space-y-2\">\r\n                                        <p className=\"text-4xl\">üõí</p>\r\n                                        <p className=\"text-muted-foreground font-medium\">Tu carrito est√° vac√≠o</p>\r\n                                        <p className=\"text-sm text-muted-foreground\">Agrega productos para comenzar.</p>\r\n                                    </div>\r\n                                ) : (\r\n                                    items.map((item) => (\r\n                                        <div key={`${item.id}-${item.producto_variante_id ?? 'base'}`} className=\"flex gap-3 bg-card p-2 rounded-lg border border-border shadow-sm\">\r\n                                            <div className=\"h-20 w-20 bg-popover rounded-md overflow-hidden flex-shrink-0\">\r\n                                                {item.imagen_url ? (\r\n                                                    <img src={item.imagen_url} alt={item.nombre} className=\"h-full w-full object-cover\" />\r\n                                                ) : (\r\n                                                    <div className=\"h-full w-full flex items-center justify-center text-gray-400\">\r\n                                                        <ImageIcon className=\"h-6 w-6\" />\r\n                                                    </div>\r\n                                                )}\r\n                                            </div>\r\n\r\n                                            <div className=\"flex-1 flex flex-col justify-between\">\r\n                                                <div>\r\n                                                    <h4 className=\"font-semibold text-sm line-clamp-1\">{item.nombre}</h4>\r\n                                                    {item.variante_nombre && (\r\n                                                        <p className=\"text-xs text-muted-foreground\">{item.variante_nombre}</p>\r\n                                                    )}\r\n                                                    <p className=\"text-xs text-muted-foreground\">Unitario: {formatCurrency(item.precio)}</p>\r\n                                                </div>\r\n\r\n                                                <div className=\"flex justify-between items-end\">\r\n                                                    <div className=\"flex items-center gap-2 border border-border rounded-md p-1 h-8\">\r\n                                                        <Button\r\n                                                            variant=\"ghost\"\r\n                                                            size=\"icon\"\r\n                                                            className=\"h-6 w-6\"\r\n                                                            onClick={() => updateQuantity(item.id, item.quantity - 1, item.producto_variante_id ?? null)}\r\n                                                            disabled={item.quantity <= 1}\r\n                                                        >\r\n                                                            <Minus className=\"h-3 w-3\" />\r\n                                                        </Button>\r\n                                                        <span className=\"text-xs font-medium w-4 text-center\">{item.quantity}</span>\r\n                                                        <Button\r\n                                                            variant=\"ghost\"\r\n                                                            size=\"icon\"\r\n                                                            className=\"h-6 w-6\"\r\n                                                            onClick={() => updateQuantity(item.id, item.quantity + 1, item.producto_variante_id ?? null)}\r\n                                                        >\r\n                                                            <Plus className=\"h-3 w-3\" />\r\n                                                        </Button>\r\n                                                    </div>\r\n\r\n                                                    <Button\r\n                                                        variant=\"ghost\"\r\n                                                        size=\"icon\"\r\n                                                        className=\"h-8 w-8 text-red-500 hover:text-red-700 hover:bg-red-50\"\r\n                                                        onClick={() => removeItem(item.id, item.producto_variante_id ?? null)}\r\n                                                    >\r\n                                                        <Trash2 className=\"h-4 w-4\" />\r\n                                                    </Button>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    ))\r\n                                )}\r\n                            </div>\r\n\r\n                            {items.length > 0 && (\r\n                                <div className=\"p-4 border-t border-border bg-popover space-y-4\">\r\n                                    <div className=\"flex justify-between items-center text-lg font-bold\">\r\n                                        <span>Total:</span>\r\n                                        <span>{formatCurrency(total)}</span>\r\n                                    </div>\r\n                                    <Button\r\n                                        onClick={() => setView('checkout')}\r\n                                        className=\"w-full h-12 text-base font-bold bg-primary text-primary-foreground hover:bg-primary/90\"\r\n                                    >\r\n                                        Ir a Completar Datos\r\n                                    </Button>\r\n                                </div>\r\n                            )}\r\n                        </>\r\n                    )}\r\n                </SheetContent>\r\n            </Sheet>\r\n        </>\r\n    )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2374, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Martin/Desktop/PROYECTOS/Tienda-Blama-2026/components/header.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport Link from 'next/link'\r\nimport { CartButton } from \"@/components/cart-button\"\r\nimport { Menu, Search, X } from \"lucide-react\"\r\nimport { useEffect, useState } from \"react\"\r\nimport { usePathname, useRouter } from \"next/navigation\"\r\nimport { createPortal } from \"react-dom\"\r\nimport { Input } from \"@/components/ui/input\"\r\n\r\nexport function Header() {\r\n    const pathname = usePathname()\r\n    const [mobileMenuOpen, setMobileMenuOpen] = useState(false)\r\n    const [mounted, setMounted] = useState(false)\r\n    const [searchQuery, setSearchQuery] = useState(\"\")\r\n    const [showDesktopSearch, setShowDesktopSearch] = useState(false)\r\n    const router = useRouter()\r\n\r\n    const handleSearch = (e: React.FormEvent) => {\r\n        e.preventDefault()\r\n        if (!searchQuery.trim()) return\r\n        router.push(`/productos?q=${encodeURIComponent(searchQuery)}`)\r\n        setMobileMenuOpen(false)\r\n        setShowDesktopSearch(false)\r\n    }\r\n\r\n    useEffect(() => {\r\n        setMobileMenuOpen(false)\r\n    }, [pathname])\r\n\r\n    useEffect(() => {\r\n        setMounted(true)\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        if (!mobileMenuOpen) return\r\n        const prevOverflow = document.body.style.overflow\r\n        document.body.style.overflow = \"hidden\"\r\n        return () => {\r\n            document.body.style.overflow = prevOverflow\r\n        }\r\n    }, [mobileMenuOpen])\r\n\r\n    return (\r\n        <header className=\"sticky top-0 z-50 bg-background/80 backdrop-blur-md shadow-sm border-b\">\r\n            <div className=\"container mx-auto px-4 h-16 flex items-center justify-between\">\r\n\r\n                {/* Mobile Menu Trigger & Logo */}\r\n                <div className=\"flex items-center gap-2 md:gap-4\">\r\n                    <button\r\n                        type=\"button\"\r\n                        className=\"md:hidden relative z-50 h-10 w-10 rounded-full border border-border bg-background/70 backdrop-blur shadow-sm hover:shadow-md active:scale-95 transition-all inline-flex items-center justify-center touch-manipulation\"\r\n                        aria-label=\"Abrir men√∫\"\r\n                        onClick={() => setMobileMenuOpen(true)}\r\n                    >\r\n                        <Menu className=\"h-6 w-6\" />\r\n                    </button>\r\n\r\n                    <Link href=\"/\" className=\"text-xl font-extrabold tracking-tight text-primary\">\r\n                        Blama Shop\r\n                    </Link>\r\n                </div>\r\n\r\n                {mobileMenuOpen && (\r\n                    mounted ? createPortal(\r\n                        <>\r\n                            <div\r\n                                className=\"fixed inset-0 z-[70] bg-black/70\"\r\n                                onClick={() => setMobileMenuOpen(false)}\r\n                                aria-hidden=\"true\"\r\n                            />\r\n                            <div\r\n                                className=\"fixed inset-y-0 left-0 z-[80] w-[300px] bg-background shadow-xl border-r border-border opacity-100\"\r\n                                role=\"dialog\"\r\n                                aria-modal=\"true\"\r\n                                aria-label=\"Men√∫\"\r\n                            >\r\n                                <button\r\n                                    type=\"button\"\r\n                                    className=\"absolute right-3 top-3 h-10 w-10 rounded-full border border-border bg-background shadow-sm hover:shadow-md active:scale-95 transition-all inline-flex items-center justify-center\"\r\n                                    aria-label=\"Cerrar men√∫\"\r\n                                    onClick={() => setMobileMenuOpen(false)}\r\n                                >\r\n                                    <X className=\"h-5 w-5\" />\r\n                                </button>\r\n\r\n                                <div className=\"mt-14 px-5 mb-6\">\r\n                                    <form onSubmit={handleSearch} className=\"relative\">\r\n                                        <Search className=\"absolute left-3 top-2.5 h-4 w-4 text-muted-foreground\" />\r\n                                        <Input\r\n                                            type=\"search\"\r\n                                            placeholder=\"Buscar productos...\"\r\n                                            className=\"pl-9 w-full bg-muted/50\"\r\n                                            value={searchQuery}\r\n                                            onChange={(e) => setSearchQuery(e.target.value)}\r\n                                        />\r\n                                    </form>\r\n                                </div>\r\n\r\n                                <nav className=\"flex flex-col gap-4 px-5\">\r\n                                    <Link href=\"/\" className=\"text-lg font-medium hover:text-primary\" onClick={() => setMobileMenuOpen(false)}>Inicio</Link>\r\n                                    <Link href=\"/productos\" className=\"text-lg font-medium hover:text-primary\" onClick={() => setMobileMenuOpen(false)}>Cat√°logo</Link>\r\n                                    <Link href=\"/nosotros\" className=\"text-lg font-medium hover:text-primary\" onClick={() => setMobileMenuOpen(false)}>Qui√©nes Somos</Link>\r\n                                    <Link href=\"/contacto\" className=\"text-lg font-medium hover:text-primary\" onClick={() => setMobileMenuOpen(false)}>Contacto</Link>\r\n                                </nav>\r\n\r\n                                <div className=\"absolute bottom-4 left-4 text-sm font-extrabold tracking-tight text-primary\">\r\n                                    Blama Shop\r\n                                </div>\r\n                            </div>\r\n                        </>,\r\n                        document.body\r\n                    ) : null\r\n                )}\r\n\r\n                {/* Desktop Navigation */}\r\n                <nav className=\"hidden md:flex gap-6 text-sm font-medium text-muted-foreground\">\r\n                    <Link href=\"/\" className=\"hover:text-primary transition-colors\">Inicio</Link>\r\n                    <Link href=\"/productos\" className=\"hover:text-primary transition-colors\">Cat√°logo</Link>\r\n                    <Link href=\"/nosotros\" className=\"hover:text-primary transition-colors\">Qui√©nes Somos</Link>\r\n                    <Link href=\"/contacto\" className=\"hover:text-primary transition-colors\">Contacto</Link>\r\n                </nav>\r\n\r\n                {/* Cart Action */}\r\n                <div className=\"flex items-center gap-2\">\r\n                    {/* Search (Visible on all devices) */}\r\n                    <div className=\"flex items-center\">\r\n                        <div className={`overflow-hidden transition-all duration-300 ease-in-out ${showDesktopSearch ? 'w-40 md:w-64 opacity-100 mr-2' : 'w-0 opacity-0'}`}>\r\n                            <form onSubmit={handleSearch}>\r\n                                <Input\r\n                                    type=\"search\"\r\n                                    placeholder=\"Buscar...\"\r\n                                    className=\"h-9 text-sm\"\r\n                                    value={searchQuery}\r\n                                    onChange={(e) => setSearchQuery(e.target.value)}\r\n                                />\r\n                            </form>\r\n                        </div>\r\n                        <button\r\n                            type=\"button\"\r\n                            onClick={() => setShowDesktopSearch(!showDesktopSearch)}\r\n                            className=\"p-2 hover:bg-accent rounded-full text-foreground transition-colors\"\r\n                            aria-label=\"Buscar\"\r\n                        >\r\n                            <Search className=\"h-5 w-5\" />\r\n                        </button>\r\n                    </div>\r\n\r\n                    <CartButton />\r\n                </div>\r\n            </div>\r\n        </header>\r\n    )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2729, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Martin/Desktop/PROYECTOS/Tienda-Blama-2026/components/flying-product-image.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useEffect, useState } from \"react\"\r\nimport { useCartAnimationStore } from \"@/features/cart/cart-animation\" // Ensure this path is correct\r\nimport { createPortal } from \"react-dom\"\r\n\r\nconst ANIMATION_DURATION = 800 // ms\r\n\r\nexport function FlyingProductImage() {\r\n    const animations = useCartAnimationStore((s) => s.animations)\r\n    const cartButtonRef = useCartAnimationStore((s) => s.cartButtonRef)\r\n    const removeAnimation = useCartAnimationStore((s) => s.removeAnimation)\r\n    const triggerBump = useCartAnimationStore((s) => s.triggerBump)\r\n    const [mounted, setMounted] = useState(false)\r\n\r\n    useEffect(() => {\r\n        setMounted(true)\r\n    }, [])\r\n\r\n    if (!mounted) return null\r\n\r\n    // Ensure we have a portal target (document.body)\r\n    return createPortal(\r\n        <>\r\n            {animations.map((anim) => (\r\n                <FlyingItem\r\n                    key={anim.id}\r\n                    item={anim}\r\n                    targetRef={cartButtonRef}\r\n                    onComplete={() => {\r\n                        removeAnimation(anim.id)\r\n                        triggerBump()\r\n                    }}\r\n                />\r\n            ))}\r\n        </>,\r\n        document.body\r\n    )\r\n}\r\n\r\nfunction FlyingItem({\r\n    item,\r\n    targetRef,\r\n    onComplete,\r\n}: {\r\n    item: { id: string; src: string; startRect: DOMRect }\r\n    targetRef: HTMLButtonElement | null\r\n    onComplete: () => void\r\n}) {\r\n    const [style, setStyle] = useState<React.CSSProperties>({\r\n        position: \"fixed\",\r\n        left: item.startRect.left,\r\n        top: item.startRect.top,\r\n        width: item.startRect.width,\r\n        height: item.startRect.height,\r\n        opacity: 1,\r\n        zIndex: 9999,\r\n        pointerEvents: \"none\",\r\n        transition: `all ${ANIMATION_DURATION}ms cubic-bezier(0.2, 0.8, 0.2, 1)`,\r\n        borderRadius: \"0.5rem\",\r\n        boxShadow: \"0 10px 15px -3px rgba(0, 0, 0, 0.1)\",\r\n    })\r\n\r\n    useEffect(() => {\r\n        // Trigger animation in next frame\r\n        requestAnimationFrame(() => {\r\n            if (!targetRef) {\r\n                // If no target, just fade out or move up slightly\r\n                setStyle((prev) => ({\r\n                    ...prev,\r\n                    opacity: 0,\r\n                    transform: \"translateY(-50px) scale(0.5)\",\r\n                }))\r\n                return\r\n            }\r\n\r\n            const targetRect = targetRef.getBoundingClientRect()\r\n            // Center of target\r\n            const targetX = targetRect.left + targetRect.width / 2\r\n            const targetY = targetRect.top + targetRect.height / 2\r\n\r\n            // Center of start (to calculate translate)\r\n            // Actually, easiest is just to set left/top/width/height to target values\r\n            // But we want it to shrink into the icon.\r\n\r\n            // Target size (small icon size)\r\n            const targetSize = 24\r\n\r\n            setStyle((prev) => ({\r\n                ...prev,\r\n                left: targetX - targetSize / 2,\r\n                top: targetY - targetSize / 2,\r\n                width: targetSize,\r\n                height: targetSize,\r\n                opacity: 0.5,\r\n                borderRadius: \"50%\",\r\n            }))\r\n        })\r\n\r\n        const timer = setTimeout(onComplete, ANIMATION_DURATION)\r\n        return () => clearTimeout(timer)\r\n    }, [targetRef, onComplete])\r\n\r\n    return (\r\n        <img\r\n            src={item.src}\r\n            alt=\"\"\r\n            style={style}\r\n            className=\"object-cover border-2 border-white\"\r\n        />\r\n    )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA,yOAAuE,8BAA8B;AACrG;AAJA;;;;;AAMA,MAAM,qBAAqB,IAAI,KAAK;;AAE7B,SAAS;IACZ,MAAM,aAAa,IAAA,8JAAqB,EAAC,CAAC,IAAM,EAAE,UAAU;IAC5D,MAAM,gBAAgB,IAAA,8JAAqB,EAAC,CAAC,IAAM,EAAE,aAAa;IAClE,MAAM,kBAAkB,IAAA,8JAAqB,EAAC,CAAC,IAAM,EAAE,eAAe;IACtE,MAAM,cAAc,IAAA,8JAAqB,EAAC,CAAC,IAAM,EAAE,WAAW;IAC9D,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,IAAA,kNAAS,EAAC;QACN,WAAW;IACf,GAAG,EAAE;IAEL,IAAI,CAAC,SAAS,OAAO;IAErB,iDAAiD;IACjD,qBAAO,IAAA,4NAAY,gBACf;kBACK,WAAW,GAAG,CAAC,CAAC,qBACb,8OAAC;gBAEG,MAAM;gBACN,WAAW;gBACX,YAAY;oBACR,gBAAgB,KAAK,EAAE;oBACvB;gBACJ;eANK,KAAK,EAAE;;;;;uBAUxB,SAAS,IAAI;AAErB;AAEA,SAAS,WAAW,EAChB,IAAI,EACJ,SAAS,EACT,UAAU,EAKb;IACG,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAsB;QACpD,UAAU;QACV,MAAM,KAAK,SAAS,CAAC,IAAI;QACzB,KAAK,KAAK,SAAS,CAAC,GAAG;QACvB,OAAO,KAAK,SAAS,CAAC,KAAK;QAC3B,QAAQ,KAAK,SAAS,CAAC,MAAM;QAC7B,SAAS;QACT,QAAQ;QACR,eAAe;QACf,YAAY,CAAC,IAAI,EAAE,mBAAmB,iCAAiC,CAAC;QACxE,cAAc;QACd,WAAW;IACf;IAEA,IAAA,kNAAS,EAAC;QACN,kCAAkC;QAClC,sBAAsB;YAClB,IAAI,CAAC,WAAW;gBACZ,kDAAkD;gBAClD,SAAS,CAAC,OAAS,CAAC;wBAChB,GAAG,IAAI;wBACP,SAAS;wBACT,WAAW;oBACf,CAAC;gBACD;YACJ;YAEA,MAAM,aAAa,UAAU,qBAAqB;YAClD,mBAAmB;YACnB,MAAM,UAAU,WAAW,IAAI,GAAG,WAAW,KAAK,GAAG;YACrD,MAAM,UAAU,WAAW,GAAG,GAAG,WAAW,MAAM,GAAG;YAErD,2CAA2C;YAC3C,0EAA0E;YAC1E,0CAA0C;YAE1C,gCAAgC;YAChC,MAAM,aAAa;YAEnB,SAAS,CAAC,OAAS,CAAC;oBAChB,GAAG,IAAI;oBACP,MAAM,UAAU,aAAa;oBAC7B,KAAK,UAAU,aAAa;oBAC5B,OAAO;oBACP,QAAQ;oBACR,SAAS;oBACT,cAAc;gBAClB,CAAC;QACL;QAEA,MAAM,QAAQ,WAAW,YAAY;QACrC,OAAO,IAAM,aAAa;IAC9B,GAAG;QAAC;QAAW;KAAW;IAE1B,qBACI,8OAAC;QACG,KAAK,KAAK,GAAG;QACb,KAAI;QACJ,OAAO;QACP,WAAU;;;;;;AAGtB"}},
    {"offset": {"line": 2836, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Martin/Desktop/PROYECTOS/Tienda-Blama-2026/components/announcement-bar.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useEffect, useMemo, useRef, useState } from \"react\"\r\n\r\ntype AnnouncementBarProps = {\r\n  messages?: string[]\r\n  intervalMs?: number\r\n  className?: string\r\n}\r\n\r\nexport function AnnouncementBar({\r\n  messages,\r\n  intervalMs = 3000,\r\n  className,\r\n}: AnnouncementBarProps) {\r\n  const defaultMessages = useMemo(\r\n    () => [\r\n      \"üì¶üöö Env√≠o GRATIS para todos los pedidos\",\r\n      \"‚ö°üè∑Ô∏è Descuentos en productos destacados\",\r\n      \"‚è±Ô∏èüìç Entrega r√°pida + contraentrega en 24 horas (solo Lima Metropolitana)\",\r\n    ],\r\n    []\r\n  )\r\n\r\n  const items = messages && messages.length > 0 ? messages : defaultMessages\r\n\r\n  const [index, setIndex] = useState(0)\r\n  const pausedRef = useRef(false)\r\n\r\n  useEffect(() => {\r\n    if (items.length <= 1) return\r\n\r\n    const id = window.setInterval(() => {\r\n      if (pausedRef.current) return\r\n      setIndex((prev) => (prev + 1) % items.length)\r\n    }, intervalMs)\r\n\r\n    return () => window.clearInterval(id)\r\n  }, [intervalMs, items.length])\r\n\r\n  return (\r\n    <div\r\n      className={\r\n        \"w-full h-10 sm:h-9 bg-blue-600 text-white flex items-center justify-center px-4 border-b border-blue-700 \" +\r\n        (className || \"\")\r\n      }\r\n      onMouseEnter={() => {\r\n        pausedRef.current = true\r\n      }}\r\n      onMouseLeave={() => {\r\n        pausedRef.current = false\r\n      }}\r\n      role=\"status\"\r\n      aria-live=\"polite\"\r\n    >\r\n      <div className=\"flex items-center justify-center text-center text-[12px] sm:text-[13px] tracking-wide uppercase font-extrabold animate-pulse\">\r\n        <span key={index} className=\"animate-in fade-in duration-300 text-center\">\r\n          {items[index]}\r\n        </span>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAUO,SAAS,gBAAgB,EAC9B,QAAQ,EACR,aAAa,IAAI,EACjB,SAAS,EACY;IACrB,MAAM,kBAAkB,IAAA,gNAAO,EAC7B,IAAM;YACJ;YACA;YACA;SACD,EACD,EAAE;IAGJ,MAAM,QAAQ,YAAY,SAAS,MAAM,GAAG,IAAI,WAAW;IAE3D,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IACnC,MAAM,YAAY,IAAA,+MAAM,EAAC;IAEzB,IAAA,kNAAS,EAAC;QACR,IAAI,MAAM,MAAM,IAAI,GAAG;QAEvB,MAAM,KAAK,OAAO,WAAW,CAAC;YAC5B,IAAI,UAAU,OAAO,EAAE;YACvB,SAAS,CAAC,OAAS,CAAC,OAAO,CAAC,IAAI,MAAM,MAAM;QAC9C,GAAG;QAEH,OAAO,IAAM,OAAO,aAAa,CAAC;IACpC,GAAG;QAAC;QAAY,MAAM,MAAM;KAAC;IAE7B,qBACE,8OAAC;QACC,WACE,8GACA,CAAC,aAAa,EAAE;QAElB,cAAc;YACZ,UAAU,OAAO,GAAG;QACtB;QACA,cAAc;YACZ,UAAU,OAAO,GAAG;QACtB;QACA,MAAK;QACL,aAAU;kBAEV,cAAA,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAiB,WAAU;0BACzB,KAAK,CAAC,MAAM;eADJ;;;;;;;;;;;;;;;AAMnB"}},
    {"offset": {"line": 2900, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Martin/Desktop/PROYECTOS/Tienda-Blama-2026/components/footer.tsx"],"sourcesContent":["import Link from 'next/link'\r\n\r\nexport function Footer() {\r\n    return (\r\n        <footer className=\"bg-[#09090b] text-gray-300 py-16 mt-auto border-t border-gray-800\">\r\n            <div className=\"container mx-auto px-6 grid grid-cols-1 md:grid-cols-4 gap-12\">\r\n                {/* Brand */}\r\n                <div className=\"space-y-4\">\r\n                    <h3 className=\"text-2xl font-bold text-white tracking-tight\">Blama Shop</h3>\r\n                    <p className=\"text-base leading-relaxed text-gray-300 max-w-xs\">\r\n                        La mejor experiencia de compra online con atenci√≥n personalizada v√≠a WhatsApp. Calidad, rapidez y confianza en cada pedido.\r\n                    </p>\r\n                </div>\r\n\r\n                {/* Links R√°pidos */}\r\n                <div>\r\n                    <h4 className=\"text-white font-bold uppercase text-sm tracking-widest mb-6\">Navegaci√≥n</h4>\r\n                    <ul className=\"space-y-3 text-base\">\r\n                        <li><Link href=\"/\" className=\"hover:text-white transition-colors duration-200\">Inicio</Link></li>\r\n                        <li><Link href=\"/productos\" className=\"hover:text-white transition-colors duration-200\">Cat√°logo</Link></li>\r\n                        <li><Link href=\"/nosotros\" className=\"hover:text-white transition-colors duration-200\">Qui√©nes Somos</Link></li>\r\n                        <li><Link href=\"/contacto\" className=\"hover:text-white transition-colors duration-200\">Cont√°ctanos</Link></li>\r\n                    </ul>\r\n                </div>\r\n\r\n                {/* Legal */}\r\n                <div>\r\n                    <h4 className=\"text-white font-bold uppercase text-sm tracking-widest mb-6\">Legal</h4>\r\n                    <ul className=\"space-y-3 text-base\">\r\n                        <li><Link href=\"/terminos\" className=\"hover:text-white transition-colors duration-200\">T√©rminos y Condiciones</Link></li>\r\n                        <li><Link href=\"/privacidad\" className=\"hover:text-white transition-colors duration-200\">Pol√≠tica de Privacidad</Link></li>\r\n                        <li><Link href=\"/envios\" className=\"hover:text-white transition-colors duration-200\">Pol√≠tica de Env√≠os</Link></li>\r\n                    </ul>\r\n                </div>\r\n\r\n                {/* Redes */}\r\n                <div className=\"flex flex-col items-center md:items-start\">\r\n                    <h4 className=\"text-white font-bold text-base uppercase tracking-wider mb-6 text-center md:text-left\">\r\n                        ¬°√önete a nuestra comunidad!\r\n                    </h4>\r\n                    <div className=\"flex gap-4\">\r\n                        {/* TikTok */}\r\n                        <a href=\"https://www.tiktok.com\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"hover:scale-110 transition-transform duration-200 hover:opacity-90\">\r\n                            <svg className=\"h-10 w-10\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                                <circle cx=\"12\" cy=\"12\" r=\"12\" fill=\"#000000\" />\r\n                                {/* Red Layer */}\r\n                                <path d=\"M16.7 8.2c-.63 0-1.2-.2-1.7-.5v4.5c0 3.2-2.6 5.8-5.8 5.8-3.2 0-5.8-2.6-5.8-5.8 0-3.2 2.6-5.8 5.8-5.8.34 0 .67.04 1 .1V9.3c-.3-.1-.6-.1-1-.1-1.6 0-3 1.3-3 3 0 1.6 1.3 3 3 3s3-1.3 3-3V2h3.2c0 2.2 1.8 3.9 3.9 4v3.2c-1.8 0-3.3-.6-4.6-1.5z\" fill=\"#FE2C55\" transform=\"translate(0.5, 0.5)\" opacity=\"0\" />\r\n                                {/* Clean Composite Path */}\r\n                                <g transform=\"translate(4, 4) scale(0.66)\">\r\n                                    <path d=\"M19.589 6.686a4.793 4.793 0 0 1-3.77-4.245V2h-3.445v13.672a2.896 2.896 0 0 1-5.201 1.743l-.002-.001.002.001a2.895 2.895 0 0 1 3.183-4.51v-3.5a6.329 6.329 0 0 0-5.394 10.692 6.33 6.33 0 0 0 10.857-4.424V8.687a8.182 8.182 0 0 0 4.773 1.526V6.79a4.831 4.831 0 0 1-1.003-.104z\" fill=\"#FE2C55\" transform=\"translate(0.5, 0.5)\" />\r\n                                    <path d=\"M19.589 6.686a4.793 4.793 0 0 1-3.77-4.245V2h-3.445v13.672a2.896 2.896 0 0 1-5.201 1.743l-.002-.001.002.001a2.895 2.895 0 0 1 3.183-4.51v-3.5a6.329 6.329 0 0 0-5.394 10.692 6.33 6.33 0 0 0 10.857-4.424V8.687a8.182 8.182 0 0 0 4.773 1.526V6.79a4.831 4.831 0 0 1-1.003-.104z\" fill=\"#25F4EE\" transform=\"translate(-0.5, -0.5)\" />\r\n                                    <path d=\"M19.589 6.686a4.793 4.793 0 0 1-3.77-4.245V2h-3.445v13.672a2.896 2.896 0 0 1-5.201 1.743l-.002-.001.002.001a2.895 2.895 0 0 1 3.183-4.51v-3.5a6.329 6.329 0 0 0-5.394 10.692 6.33 6.33 0 0 0 10.857-4.424V8.687a8.182 8.182 0 0 0 4.773 1.526V6.79a4.831 4.831 0 0 1-1.003-.104z\" fill=\"#FFFFFF\" />\r\n                                </g>\r\n                            </svg>\r\n                        </a>\r\n                        {/* Facebook */}\r\n                        <a href=\"https://www.facebook.com\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"hover:scale-110 transition-transform duration-200 hover:opacity-90\">\r\n                            <svg className=\"h-10 w-10\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                                <circle cx=\"12\" cy=\"12\" r=\"12\" fill=\"#1877F2\" />\r\n                                <path d=\"M13.5 19.5V12H15.5L16 9.5H13.5V8C13.5 7.375 13.844 7 14.5 7H16V4.5H14C11.5 4.5 10.5 5.875 10.5 8V9.5H8.5V12H10.5V19.5\" fill=\"white\" />\r\n                            </svg>\r\n                        </a>\r\n                        {/* Instagram */}\r\n                        <a href=\"https://www.instagram.com\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"hover:scale-110 transition-transform duration-200 hover:opacity-90\">\r\n                            <svg className=\"h-10 w-10\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                                <rect width=\"24\" height=\"24\" rx=\"6\" fill=\"url(#paint0_radial_instagram_lg)\" />\r\n                                <rect x=\"5\" y=\"5\" width=\"14\" height=\"14\" rx=\"4\" stroke=\"white\" strokeWidth=\"2\" />\r\n                                <circle cx=\"12\" cy=\"12\" r=\"3\" stroke=\"white\" strokeWidth=\"2\" />\r\n                                <circle cx=\"17\" cy=\"7\" r=\"1\" fill=\"white\" />\r\n                                <defs>\r\n                                    <radialGradient id=\"paint0_radial_instagram_lg\" cx=\"0\" cy=\"0\" r=\"1\" gradientUnits=\"userSpaceOnUse\" gradientTransform=\"translate(7 23) rotate(-90) scale(26 25)\">\r\n                                        <stop stopColor=\"#FCAF45\" />\r\n                                        <stop offset=\"0.32\" stopColor=\"#F77737\" />\r\n                                        <stop offset=\"0.63\" stopColor=\"#E1306C\" />\r\n                                        <stop offset=\"1\" stopColor=\"#833AB4\" />\r\n                                    </radialGradient>\r\n                                </defs>\r\n                            </svg>\r\n                        </a>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"container mx-auto px-6 mt-12 pt-8 border-t border-gray-800 text-center md:flex md:justify-between md:text-left text-sm text-gray-500\">\r\n                <p>¬© {new Date().getFullYear()} Blama Shop. Todos los derechos reservados.</p>\r\n                <div className=\"flex justify-center gap-4 mt-2 md:mt-0\">\r\n                    <span className=\"hover:text-gray-300 cursor-pointer transition-colors\">Per√∫</span>\r\n                </div>\r\n            </div>\r\n        </footer>\r\n    )\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;;;AAEO,SAAS;IACZ,qBACI,8OAAC;QAAO,WAAU;;0BACd,8OAAC;gBAAI,WAAU;;kCAEX,8OAAC;wBAAI,WAAU;;0CACX,8OAAC;gCAAG,WAAU;0CAA+C;;;;;;0CAC7D,8OAAC;gCAAE,WAAU;0CAAmD;;;;;;;;;;;;kCAMpE,8OAAC;;0CACG,8OAAC;gCAAG,WAAU;0CAA8D;;;;;;0CAC5E,8OAAC;gCAAG,WAAU;;kDACV,8OAAC;kDAAG,cAAA,8OAAC,uKAAI;4CAAC,MAAK;4CAAI,WAAU;sDAAkD;;;;;;;;;;;kDAC/E,8OAAC;kDAAG,cAAA,8OAAC,uKAAI;4CAAC,MAAK;4CAAa,WAAU;sDAAkD;;;;;;;;;;;kDACxF,8OAAC;kDAAG,cAAA,8OAAC,uKAAI;4CAAC,MAAK;4CAAY,WAAU;sDAAkD;;;;;;;;;;;kDACvF,8OAAC;kDAAG,cAAA,8OAAC,uKAAI;4CAAC,MAAK;4CAAY,WAAU;sDAAkD;;;;;;;;;;;;;;;;;;;;;;;kCAK/F,8OAAC;;0CACG,8OAAC;gCAAG,WAAU;0CAA8D;;;;;;0CAC5E,8OAAC;gCAAG,WAAU;;kDACV,8OAAC;kDAAG,cAAA,8OAAC,uKAAI;4CAAC,MAAK;4CAAY,WAAU;sDAAkD;;;;;;;;;;;kDACvF,8OAAC;kDAAG,cAAA,8OAAC,uKAAI;4CAAC,MAAK;4CAAc,WAAU;sDAAkD;;;;;;;;;;;kDACzF,8OAAC;kDAAG,cAAA,8OAAC,uKAAI;4CAAC,MAAK;4CAAU,WAAU;sDAAkD;;;;;;;;;;;;;;;;;;;;;;;kCAK7F,8OAAC;wBAAI,WAAU;;0CACX,8OAAC;gCAAG,WAAU;0CAAwF;;;;;;0CAGtG,8OAAC;gCAAI,WAAU;;kDAEX,8OAAC;wCAAE,MAAK;wCAAyB,QAAO;wCAAS,KAAI;wCAAsB,WAAU;kDACjF,cAAA,8OAAC;4CAAI,WAAU;4CAAY,SAAQ;4CAAY,MAAK;4CAAO,OAAM;;8DAC7D,8OAAC;oDAAO,IAAG;oDAAK,IAAG;oDAAK,GAAE;oDAAK,MAAK;;;;;;8DAEpC,8OAAC;oDAAK,GAAE;oDAA6O,MAAK;oDAAU,WAAU;oDAAsB,SAAQ;;;;;;8DAE5S,8OAAC;oDAAE,WAAU;;sEACT,8OAAC;4DAAK,GAAE;4DAAmR,MAAK;4DAAU,WAAU;;;;;;sEACpT,8OAAC;4DAAK,GAAE;4DAAmR,MAAK;4DAAU,WAAU;;;;;;sEACpT,8OAAC;4DAAK,GAAE;4DAAmR,MAAK;;;;;;;;;;;;;;;;;;;;;;;kDAK5S,8OAAC;wCAAE,MAAK;wCAA2B,QAAO;wCAAS,KAAI;wCAAsB,WAAU;kDACnF,cAAA,8OAAC;4CAAI,WAAU;4CAAY,SAAQ;4CAAY,MAAK;4CAAO,OAAM;;8DAC7D,8OAAC;oDAAO,IAAG;oDAAK,IAAG;oDAAK,GAAE;oDAAK,MAAK;;;;;;8DACpC,8OAAC;oDAAK,GAAE;oDAAwH,MAAK;;;;;;;;;;;;;;;;;kDAI7I,8OAAC;wCAAE,MAAK;wCAA4B,QAAO;wCAAS,KAAI;wCAAsB,WAAU;kDACpF,cAAA,8OAAC;4CAAI,WAAU;4CAAY,SAAQ;4CAAY,MAAK;4CAAO,OAAM;;8DAC7D,8OAAC;oDAAK,OAAM;oDAAK,QAAO;oDAAK,IAAG;oDAAI,MAAK;;;;;;8DACzC,8OAAC;oDAAK,GAAE;oDAAI,GAAE;oDAAI,OAAM;oDAAK,QAAO;oDAAK,IAAG;oDAAI,QAAO;oDAAQ,aAAY;;;;;;8DAC3E,8OAAC;oDAAO,IAAG;oDAAK,IAAG;oDAAK,GAAE;oDAAI,QAAO;oDAAQ,aAAY;;;;;;8DACzD,8OAAC;oDAAO,IAAG;oDAAK,IAAG;oDAAI,GAAE;oDAAI,MAAK;;;;;;8DAClC,8OAAC;8DACG,cAAA,8OAAC;wDAAe,IAAG;wDAA6B,IAAG;wDAAI,IAAG;wDAAI,GAAE;wDAAI,eAAc;wDAAiB,mBAAkB;;0EACjH,8OAAC;gEAAK,WAAU;;;;;;0EAChB,8OAAC;gEAAK,QAAO;gEAAO,WAAU;;;;;;0EAC9B,8OAAC;gEAAK,QAAO;gEAAO,WAAU;;;;;;0EAC9B,8OAAC;gEAAK,QAAO;gEAAI,WAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0BASvD,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;;4BAAE;4BAAG,IAAI,OAAO,WAAW;4BAAG;;;;;;;kCAC/B,8OAAC;wBAAI,WAAU;kCACX,cAAA,8OAAC;4BAAK,WAAU;sCAAuD;;;;;;;;;;;;;;;;;;;;;;;AAK3F"}},
    {"offset": {"line": 3407, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Martin/Desktop/PROYECTOS/Tienda-Blama-2026/components/layout-shell.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useEffect, useMemo, useState } from \"react\"\r\nimport { usePathname } from \"next/navigation\"\r\n\r\nimport { Header } from \"@/components/header\"\r\nimport { FlyingProductImage } from \"@/components/flying-product-image\"\r\nimport { AnnouncementBar } from \"@/components/announcement-bar\"\r\nimport { Footer } from \"@/components/footer\"\r\nimport { supabase } from \"@/lib/supabaseClient\"\r\n\r\ntype LayoutShellProps = {\r\n  children: React.ReactNode\r\n}\r\n\r\nexport function LayoutShell({ children }: LayoutShellProps) {\r\n  const pathname = usePathname()\r\n  const isAdmin = pathname?.startsWith(\"/admin\")\r\n  const isAuth = pathname?.startsWith(\"/auth\")\r\n  const isOpenWa = pathname?.startsWith(\"/open-wa\")\r\n\r\n  const [announcementEnabled, setAnnouncementEnabled] = useState<boolean | null>(null)\r\n  const [announcementIntervalMs, setAnnouncementIntervalMs] = useState(3500)\r\n  const [announcementMessages, setAnnouncementMessages] = useState<string[] | undefined>(undefined)\r\n\r\n  if (isAdmin || isAuth) {\r\n    return <>{children}</>\r\n  }\r\n\r\n  useEffect(() => {\r\n    let cancelled = false\r\n\r\n      ; (async () => {\r\n        const { data, error } = await supabase\r\n          .from(\"announcement_bar\")\r\n          .select(\"enabled, interval_ms, messages\")\r\n          .eq(\"id\", 1)\r\n          .maybeSingle()\r\n\r\n        if (cancelled) return\r\n        if (error || !data) {\r\n          setAnnouncementEnabled(true)\r\n          return\r\n        }\r\n\r\n        setAnnouncementEnabled(Boolean((data as any).enabled))\r\n        setAnnouncementIntervalMs(Number((data as any).interval_ms) || 3500)\r\n\r\n        const msgs = Array.isArray((data as any).messages) ? ((data as any).messages as string[]) : []\r\n        setAnnouncementMessages(msgs.length > 0 ? msgs : undefined)\r\n      })()\r\n\r\n    return () => {\r\n      cancelled = true\r\n    }\r\n  }, [])\r\n\r\n  const shouldShowAnnouncement = useMemo(() => {\r\n    return announcementEnabled === true\r\n  }, [announcementEnabled])\r\n\r\n  const whatsappNumber = process.env.NEXT_PUBLIC_WHATSAPP_TIENDA || \"51999999999\"\r\n  const defaultMessage = encodeURIComponent(\"Hola, quisiera informaci√≥n sobre sus productos.\")\r\n  const whatsappUrl = `https://api.whatsapp.com/send?phone=${encodeURIComponent(whatsappNumber)}&text=${defaultMessage}`\r\n\r\n  return (\r\n    <>\r\n      <Header />\r\n      <FlyingProductImage />\r\n      {shouldShowAnnouncement && (\r\n        <AnnouncementBar\r\n          className=\"sticky top-16 z-40\"\r\n          intervalMs={announcementIntervalMs}\r\n          messages={announcementMessages}\r\n        />\r\n      )}\r\n      <div className=\"flex-1\">{children}</div>\r\n      <Footer />\r\n\r\n      {!isOpenWa && (\r\n        <a\r\n          href={whatsappUrl}\r\n          target=\"_blank\"\r\n          rel=\"noopener noreferrer\"\r\n          aria-label=\"Abrir chat de WhatsApp\"\r\n          className=\"fixed bottom-16 right-4 md:bottom-6 md:right-6 z-50 inline-flex h-14 w-14 items-center justify-center rounded-full bg-green-600 text-white shadow-lg transition-transform hover:scale-105 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-green-500 focus-visible:ring-offset-2\"\r\n        >\r\n          <svg\r\n            viewBox=\"0 0 32 32\"\r\n            width=\"26\"\r\n            height=\"26\"\r\n            fill=\"currentColor\"\r\n            aria-hidden=\"true\"\r\n          >\r\n            <path d=\"M19.11 17.22c-.27-.14-1.59-.78-1.84-.87-.25-.09-.43-.14-.61.14-.18.27-.7.86-.86 1.04-.16.18-.32.2-.59.07-.27-.14-1.15-.42-2.2-1.35-.81-.72-1.36-1.61-1.52-1.88-.16-.27-.02-.41.12-.55.12-.12.27-.32.41-.48.14-.16.18-.27.27-.45.09-.18.05-.34-.02-.48-.07-.14-.61-1.47-.84-2.01-.22-.53-.45-.46-.61-.47-.16-.01-.34-.01-.52-.01-.18 0-.48.07-.73.34-.25.27-.95.93-.95 2.27 0 1.34.98 2.64 1.11 2.82.14.18 1.93 2.95 4.69 4.13.66.28 1.17.45 1.57.58.66.21 1.26.18 1.73.11.53-.08 1.59-.65 1.82-1.28.23-.63.23-1.17.16-1.28-.07-.11-.25-.18-.52-.32z\" />\r\n            <path d=\"M16.03 2.67c-7.16 0-12.98 5.82-12.98 12.98 0 2.29.61 4.53 1.77 6.51L3 29.33l7.35-1.92c1.91 1.05 4.06 1.6 6.26 1.6h.01c7.16 0 12.98-5.82 12.98-12.98 0-3.47-1.35-6.73-3.8-9.18-2.45-2.45-5.71-3.8-9.18-3.8zm0 23.99h-.01c-1.95 0-3.86-.52-5.53-1.51l-.4-.24-4.36 1.14 1.16-4.25-.26-.43c-1.07-1.72-1.64-3.71-1.64-5.76 0-6.12 4.98-11.1 11.1-11.1 2.97 0 5.76 1.15 7.86 3.25 2.1 2.1 3.25 4.89 3.25 7.86 0 6.12-4.98 11.1-11.1 11.1z\" />\r\n          </svg>\r\n        </a>\r\n      )}\r\n    </>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AATA;;;;;;;;;AAeO,SAAS,YAAY,EAAE,QAAQ,EAAoB;IACxD,MAAM,WAAW,IAAA,iJAAW;IAC5B,MAAM,UAAU,UAAU,WAAW;IACrC,MAAM,SAAS,UAAU,WAAW;IACpC,MAAM,WAAW,UAAU,WAAW;IAEtC,MAAM,CAAC,qBAAqB,uBAAuB,GAAG,IAAA,iNAAQ,EAAiB;IAC/E,MAAM,CAAC,wBAAwB,0BAA0B,GAAG,IAAA,iNAAQ,EAAC;IACrE,MAAM,CAAC,sBAAsB,wBAAwB,GAAG,IAAA,iNAAQ,EAAuB;IAEvF,IAAI,WAAW,QAAQ;QACrB,qBAAO;sBAAG;;IACZ;IAEA,IAAA,kNAAS,EAAC;QACR,IAAI,YAAY;QAEZ,CAAC;YACD,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,iIAAQ,CACnC,IAAI,CAAC,oBACL,MAAM,CAAC,kCACP,EAAE,CAAC,MAAM,GACT,WAAW;YAEd,IAAI,WAAW;YACf,IAAI,SAAS,CAAC,MAAM;gBAClB,uBAAuB;gBACvB;YACF;YAEA,uBAAuB,QAAQ,AAAC,KAAa,OAAO;YACpD,0BAA0B,OAAO,AAAC,KAAa,WAAW,KAAK;YAE/D,MAAM,OAAO,MAAM,OAAO,CAAC,AAAC,KAAa,QAAQ,IAAK,AAAC,KAAa,QAAQ,GAAgB,EAAE;YAC9F,wBAAwB,KAAK,MAAM,GAAG,IAAI,OAAO;QACnD,CAAC;QAEH,OAAO;YACL,YAAY;QACd;IACF,GAAG,EAAE;IAEL,MAAM,yBAAyB,IAAA,gNAAO,EAAC;QACrC,OAAO,wBAAwB;IACjC,GAAG;QAAC;KAAoB;IAExB,MAAM,iBAAiB,oDAA2C;IAClE,MAAM,iBAAiB,mBAAmB;IAC1C,MAAM,cAAc,CAAC,oCAAoC,EAAE,mBAAmB,gBAAgB,MAAM,EAAE,gBAAgB;IAEtH,qBACE;;0BACE,8OAAC,+HAAM;;;;;0BACP,8OAAC,+JAAkB;;;;;YAClB,wCACC,8OAAC,qJAAe;gBACd,WAAU;gBACV,YAAY;gBACZ,UAAU;;;;;;0BAGd,8OAAC;gBAAI,WAAU;0BAAU;;;;;;0BACzB,8OAAC,+HAAM;;;;;YAEN,CAAC,0BACA,8OAAC;gBACC,MAAM;gBACN,QAAO;gBACP,KAAI;gBACJ,cAAW;gBACX,WAAU;0BAEV,cAAA,8OAAC;oBACC,SAAQ;oBACR,OAAM;oBACN,QAAO;oBACP,MAAK;oBACL,eAAY;;sCAEZ,8OAAC;4BAAK,GAAE;;;;;;sCACR,8OAAC;4BAAK,GAAE;;;;;;;;;;;;;;;;;;;AAMpB"}}]
}