{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Martin/Desktop/PROYECTOS/Tienda-Blama-2026/features/admin/services/admin.server.ts"],"sourcesContent":["import { NextResponse } from \"next/server\"\r\nimport { createClient } from \"@supabase/supabase-js\"\r\n\r\nexport const ADMIN_RUNTIME = \"nodejs\" as const\r\n\r\nexport function getSupabaseEnv() {\r\n  const url = process.env.SUPABASE_URL || process.env.NEXT_PUBLIC_SUPABASE_URL\r\n  const anon = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY\r\n  const service = process.env.SUPABASE_SERVICE_ROLE_KEY\r\n  return { url, anon, service }\r\n}\r\n\r\nexport async function requireAdmin(req: Request) {\r\n  const { url, anon, service } = getSupabaseEnv()\r\n  if (!url || !anon || !service) {\r\n    const missing: string[] = []\r\n    if (!url) missing.push(\"SUPABASE_URL or NEXT_PUBLIC_SUPABASE_URL\")\r\n    if (!anon) missing.push(\"NEXT_PUBLIC_SUPABASE_ANON_KEY\")\r\n    if (!service) missing.push(\"SUPABASE_SERVICE_ROLE_KEY\")\r\n    return {\r\n      ok: false as const,\r\n      res: NextResponse.json({ error: \"Server env not configured\", missing }, { status: 500 }),\r\n    }\r\n  }\r\n\r\n  const authHeader = req.headers.get(\"authorization\") || \"\"\r\n  const token = authHeader.startsWith(\"Bearer \") ? authHeader.slice(\"Bearer \".length) : \"\"\r\n  if (!token) {\r\n    return {\r\n      ok: false as const,\r\n      res: NextResponse.json({ error: \"Missing Authorization token\" }, { status: 401 }),\r\n    }\r\n  }\r\n\r\n  const supabaseAuth = createClient(url, anon)\r\n  const { data: userData, error: userErr } = await supabaseAuth.auth.getUser(token)\r\n  if (userErr || !userData?.user) {\r\n    return { ok: false as const, res: NextResponse.json({ error: \"Invalid session\" }, { status: 401 }) }\r\n  }\r\n\r\n  const { data: profile, error: profileErr } = await supabaseAuth\r\n    .from(\"profiles\")\r\n    .select(\"role\")\r\n    .eq(\"id\", userData.user.id)\r\n    .maybeSingle()\r\n\r\n  if (profileErr) {\r\n    return { ok: false as const, res: NextResponse.json({ error: profileErr.message }, { status: 500 }) }\r\n  }\r\n\r\n  if (String((profile as any)?.role || \"\").toLowerCase() !== \"admin\") {\r\n    return { ok: false as const, res: NextResponse.json({ error: \"Forbidden\" }, { status: 403 }) }\r\n  }\r\n\r\n  const supabaseAdmin = createClient(url, service)\r\n  return { ok: true as const, supabaseAdmin }\r\n}\r\n"],"names":[],"mappings":";;;;;;;;AAAA;AACA;;;AAEO,MAAM,gBAAgB;AAEtB,SAAS;IACd,MAAM,MAAM,QAAQ,GAAG,CAAC,YAAY;IACpC,MAAM;IACN,MAAM,UAAU,QAAQ,GAAG,CAAC,yBAAyB;IACrD,OAAO;QAAE;QAAK;QAAM;IAAQ;AAC9B;AAEO,eAAe,aAAa,GAAY;IAC7C,MAAM,EAAE,GAAG,EAAE,IAAI,EAAE,OAAO,EAAE,GAAG;IAC/B,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,SAAS;QAC7B,MAAM,UAAoB,EAAE;QAC5B;;QACA,IAAI,CAAC,MAAM,QAAQ,IAAI,CAAC;QACxB,IAAI,CAAC,SAAS,QAAQ,IAAI,CAAC;QAC3B,OAAO;YACL,IAAI;YACJ,KAAK,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;gBAA6B;YAAQ,GAAG;gBAAE,QAAQ;YAAI;QACxF;IACF;IAEA,MAAM,aAAa,IAAI,OAAO,CAAC,GAAG,CAAC,oBAAoB;IACvD,MAAM,QAAQ,WAAW,UAAU,CAAC,aAAa,WAAW,KAAK,CAAC,UAAU,MAAM,IAAI;IACtF,IAAI,CAAC,OAAO;QACV,OAAO;YACL,IAAI;YACJ,KAAK,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAA8B,GAAG;gBAAE,QAAQ;YAAI;QACjF;IACF;IAEA,MAAM,eAAe,IAAA,gMAAY,EAAC,KAAK;IACvC,MAAM,EAAE,MAAM,QAAQ,EAAE,OAAO,OAAO,EAAE,GAAG,MAAM,aAAa,IAAI,CAAC,OAAO,CAAC;IAC3E,IAAI,WAAW,CAAC,UAAU,MAAM;QAC9B,OAAO;YAAE,IAAI;YAAgB,KAAK,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAkB,GAAG;gBAAE,QAAQ;YAAI;QAAG;IACrG;IAEA,MAAM,EAAE,MAAM,OAAO,EAAE,OAAO,UAAU,EAAE,GAAG,MAAM,aAChD,IAAI,CAAC,YACL,MAAM,CAAC,QACP,EAAE,CAAC,MAAM,SAAS,IAAI,CAAC,EAAE,EACzB,WAAW;IAEd,IAAI,YAAY;QACd,OAAO;YAAE,IAAI;YAAgB,KAAK,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO,WAAW,OAAO;YAAC,GAAG;gBAAE,QAAQ;YAAI;QAAG;IACtG;IAEA,IAAI,OAAO,AAAC,SAAiB,QAAQ,IAAI,WAAW,OAAO,SAAS;QAClE,OAAO;YAAE,IAAI;YAAgB,KAAK,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAY,GAAG;gBAAE,QAAQ;YAAI;QAAG;IAC/F;IAEA,MAAM,gBAAgB,IAAA,gMAAY,EAAC,KAAK;IACxC,OAAO;QAAE,IAAI;QAAe;IAAc;AAC5C"}},
    {"offset": {"line": 142, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Martin/Desktop/PROYECTOS/Tienda-Blama-2026/app/api/admin/productos/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\"\r\nimport { requireAdmin } from \"@/features/admin/services/admin.server\"\r\n\r\nexport const runtime = \"nodejs\"\r\n\r\ntype ProductPayload = {\r\n  nombre: string\r\n  precio: number\r\n  precio_antes: number | null\r\n  stock: number\r\n  imagen_url: string | null\r\n  imagenes?: string[]\r\n  videos?: string[]\r\n  descripcion: string | null\r\n  materiales: string | null\r\n  tamano: string | null\r\n  color: string | null\r\n  cuidados: string | null\r\n  uso: string | null\r\n  categoria_id: number | null\r\n  calificacion?: number\r\n}\r\n\r\ntype SpecInput = {\r\n  clave: string\r\n  valor?: string | null\r\n  orden?: number\r\n}\r\n\r\ntype VariantInput = {\r\n  etiqueta: string\r\n  precio?: number | null\r\n  precio_antes?: number | null\r\n  stock?: number\r\n  activo?: boolean\r\n}\r\n\r\nfunction normalizeText(v: unknown) {\r\n  return String(v ?? \"\").trim()\r\n}\r\n\r\nfunction normalizeNumber(v: unknown) {\r\n  const n = Number(v)\r\n  return Number.isFinite(n) ? n : null\r\n}\r\n\r\nfunction normalizeImages(input: unknown) {\r\n  const arr = Array.isArray(input) ? input : []\r\n  const unique: string[] = []\r\n  for (const raw of arr) {\r\n    const v = String(raw || \"\").trim()\r\n    if (!v) continue\r\n    const lower = v.toLowerCase()\r\n    if (\r\n      lower.endsWith(\".mp4\") ||\r\n      lower.endsWith(\".webm\") ||\r\n      lower.endsWith(\".mov\") ||\r\n      lower.endsWith(\".m4v\") ||\r\n      lower.endsWith(\".avi\") ||\r\n      lower.endsWith(\".mkv\")\r\n    ) {\r\n      continue\r\n    }\r\n    if (!unique.includes(v)) unique.push(v)\r\n    if (unique.length >= 10) break\r\n  }\r\n  return unique\r\n}\r\n\r\nfunction normalizeVideos(input: unknown) {\r\n  const arr = Array.isArray(input) ? input : []\r\n  const unique: string[] = []\r\n  for (const raw of arr) {\r\n    const v = String(raw || \"\").trim()\r\n    if (!v) continue\r\n    if (!unique.includes(v)) unique.push(v)\r\n    if (unique.length >= 6) break\r\n  }\r\n  return unique\r\n}\r\n\r\nasync function upsertProduct(args: {\r\n  supabaseAdmin: any\r\n  id?: number\r\n  product: ProductPayload\r\n}) {\r\n  const { supabaseAdmin, id, product } = args\r\n\r\n  const basePayload: any = {\r\n    nombre: normalizeText(product.nombre),\r\n    precio: Number(product.precio),\r\n    precio_antes: product.precio_antes != null ? Number(product.precio_antes) : null,\r\n    stock: Number(product.stock),\r\n    imagen_url: product.imagen_url ? String(product.imagen_url) : null,\r\n    imagenes: normalizeImages(product.imagenes),\r\n    videos: normalizeVideos(product.videos),\r\n    descripcion: product.descripcion ? normalizeText(product.descripcion) : null,\r\n    materiales: product.materiales ? normalizeText(product.materiales) : null,\r\n    tamano: product.tamano ? normalizeText(product.tamano) : null,\r\n    color: product.color ? normalizeText(product.color) : null,\r\n    cuidados: product.cuidados ? normalizeText(product.cuidados) : null,\r\n    uso: product.uso ? normalizeText(product.uso) : null,\r\n    categoria_id: (product.categoria_id != null && !Number.isNaN(Number(product.categoria_id))) ? Number(product.categoria_id) : null,\r\n    calificacion: product.calificacion ? Number(product.calificacion) : 5.0,\r\n  }\r\n\r\n  const save = async (withGallery: boolean) => {\r\n    const payload = { ...basePayload }\r\n    if (!withGallery) delete payload.imagenes\r\n\r\n    if (id && Number.isFinite(id) && id > 0) {\r\n      return supabaseAdmin.from(\"productos\").update(payload).eq(\"id\", id).select(\"id\").single()\r\n    }\r\n    return supabaseAdmin.from(\"productos\").insert(payload).select(\"id\").single()\r\n  }\r\n\r\n  const first = await save(true)\r\n  let error = first.error\r\n\r\n  if (\r\n    error &&\r\n    typeof (error as any).message === \"string\" &&\r\n    String((error as any).message).toLowerCase().includes(\"imagenes\")\r\n  ) {\r\n    const second = await save(false)\r\n    error = second.error\r\n    if (error) return { ok: false as const, error }\r\n    const savedId = id && Number.isFinite(id) && id > 0 ? id : Number((second as any)?.data?.id ?? 0)\r\n    return { ok: true as const, id: savedId }\r\n  }\r\n\r\n  if (error) return { ok: false as const, error }\r\n\r\n  const savedId = id && Number.isFinite(id) && id > 0 ? id : Number((first as any)?.data?.id ?? 0)\r\n  return { ok: true as const, id: savedId }\r\n}\r\n\r\nasync function replaceSpecs(supabaseAdmin: any, productId: number, specs: SpecInput[]) {\r\n  const { error: delErr } = await supabaseAdmin.from(\"producto_especificaciones\").delete().eq(\"producto_id\", productId)\r\n  if (delErr) return delErr\r\n\r\n  const clean = specs\r\n    .map((s) => ({\r\n      clave: normalizeText(s.clave),\r\n      valor: s.valor != null ? normalizeText(s.valor) : null,\r\n      orden: Number.isFinite(Number(s.orden)) ? Number(s.orden) : 0,\r\n    }))\r\n    .filter((s) => s.clave.length > 0)\r\n\r\n  if (clean.length === 0) return null\r\n\r\n  const { error: insErr } = await supabaseAdmin.from(\"producto_especificaciones\").insert(\r\n    clean.map((s) => ({\r\n      producto_id: productId,\r\n      clave: s.clave,\r\n      valor: s.valor,\r\n      orden: s.orden,\r\n    }))\r\n  )\r\n\r\n  return insErr || null\r\n}\r\n\r\nasync function replaceVariants(supabaseAdmin: any, productId: number, variants: VariantInput[]) {\r\n  const { error: delErr } = await supabaseAdmin.from(\"producto_variantes\").delete().eq(\"producto_id\", productId)\r\n  if (delErr) return delErr\r\n\r\n  const clean = variants\r\n    .map((v) => ({\r\n      etiqueta: normalizeText(v.etiqueta),\r\n      precio: normalizeNumber(v.precio),\r\n      precio_antes: normalizeNumber(v.precio_antes),\r\n      stock: Number.isFinite(Number(v.stock)) ? Number(v.stock) : 0,\r\n      activo: v.activo == null ? true : Boolean(v.activo),\r\n    }))\r\n    .filter((v) => v.etiqueta.length > 0)\r\n\r\n  if (clean.length === 0) return null\r\n\r\n  const { error: insErr } = await supabaseAdmin.from(\"producto_variantes\").insert(\r\n    clean.map((v) => ({\r\n      producto_id: productId,\r\n      etiqueta: v.etiqueta,\r\n      precio: v.precio,\r\n      precio_antes: v.precio_antes,\r\n      stock: v.stock,\r\n      activo: v.activo,\r\n    }))\r\n  )\r\n\r\n  return insErr || null\r\n}\r\n\r\nexport async function POST(req: Request) {\r\n  const auth = await requireAdmin(req)\r\n  if (!auth.ok) return auth.res\r\n\r\n  try {\r\n    const body = await req.json()\r\n\r\n    const product = body?.product as ProductPayload\r\n    const specs = Array.isArray(body?.specs) ? (body.specs as SpecInput[]) : []\r\n    const variants = Array.isArray(body?.variants) ? (body.variants as VariantInput[]) : []\r\n\r\n    const saved = await upsertProduct({ supabaseAdmin: auth.supabaseAdmin, product })\r\n    if (!saved.ok) {\r\n      return NextResponse.json({ error: (saved.error as any)?.message || \"Failed to save product\" }, { status: 400 })\r\n    }\r\n\r\n    const productId = Number(saved.id)\r\n\r\n    const specsErr = await replaceSpecs(auth.supabaseAdmin, productId, specs)\r\n    if (specsErr) {\r\n      return NextResponse.json({ error: (specsErr as any)?.message || \"Failed to save specs\" }, { status: 400 })\r\n    }\r\n\r\n    const variantsErr = await replaceVariants(auth.supabaseAdmin, productId, variants)\r\n    if (variantsErr) {\r\n      return NextResponse.json({ error: (variantsErr as any)?.message || \"Failed to save variants\" }, { status: 400 })\r\n    }\r\n\r\n    return NextResponse.json({ ok: true, id: productId })\r\n  } catch (e: any) {\r\n    return NextResponse.json({ error: e?.message || \"Unknown error\" }, { status: 500 })\r\n  }\r\n}\r\n\r\nexport async function PUT(req: Request) {\r\n  const auth = await requireAdmin(req)\r\n  if (!auth.ok) return auth.res\r\n\r\n  try {\r\n    const body = await req.json()\r\n    console.log(\"[API PUT Product] Body received:\", JSON.stringify(body, null, 2)) // Debug log\r\n    const id = Number(body?.id ?? 0)\r\n    if (!Number.isFinite(id) || id <= 0) {\r\n      return NextResponse.json({ error: \"Invalid product id\" }, { status: 400 })\r\n    }\r\n\r\n    const product = body?.product as ProductPayload\r\n    console.log(\"[API PUT Product] categoria_id payload:\", product.categoria_id) // Debug log\r\n    const specs = Array.isArray(body?.specs) ? (body.specs as SpecInput[]) : []\r\n    const variants = Array.isArray(body?.variants) ? (body.variants as VariantInput[]) : []\r\n\r\n    const saved = await upsertProduct({ supabaseAdmin: auth.supabaseAdmin, id, product })\r\n    if (!saved.ok) {\r\n      return NextResponse.json({ error: (saved.error as any)?.message || \"Failed to update product\" }, { status: 400 })\r\n    }\r\n\r\n    const productId = Number(saved.id)\r\n\r\n    const specsErr = await replaceSpecs(auth.supabaseAdmin, productId, specs)\r\n    if (specsErr) {\r\n      return NextResponse.json({ error: (specsErr as any)?.message || \"Failed to save specs\" }, { status: 400 })\r\n    }\r\n\r\n    const variantsErr = await replaceVariants(auth.supabaseAdmin, productId, variants)\r\n    if (variantsErr) {\r\n      return NextResponse.json({ error: (variantsErr as any)?.message || \"Failed to save variants\" }, { status: 400 })\r\n    }\r\n\r\n    return NextResponse.json({ ok: true, id: productId })\r\n  } catch (e: any) {\r\n    return NextResponse.json({ error: e?.message || \"Unknown error\" }, { status: 500 })\r\n  }\r\n}\r\n\r\nexport async function DELETE(req: Request) {\r\n  const auth = await requireAdmin(req)\r\n  if (!auth.ok) return auth.res\r\n\r\n  try {\r\n    const body = await req.json().catch(() => ({}))\r\n    const id = Number(body?.id ?? 0)\r\n    if (!Number.isFinite(id) || id <= 0) {\r\n      return NextResponse.json({ error: \"Invalid product id\" }, { status: 400 })\r\n    }\r\n\r\n    const { error } = await auth.supabaseAdmin.from(\"productos\").delete().eq(\"id\", id)\r\n    if (error) {\r\n      return NextResponse.json({ error: error.message }, { status: 400 })\r\n    }\r\n\r\n    return NextResponse.json({ ok: true })\r\n  } catch (e: any) {\r\n    return NextResponse.json({ error: e?.message || \"Unknown error\" }, { status: 500 })\r\n  }\r\n}\r\n"],"names":[],"mappings":"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"}}]
}